
# 우선 Http 요청에 대해 알아보자

## HTTP 요청
- HTTP는 HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜
- 클라이언트-서버 프로토콜


![fetching_a_page.png](..%2F..%2Fetc%2Fimage%2FNetwork_image%2Ffetching_a_page.png)


## HTTP 기반 시스템의 구성요소
- 요청은 하나의 개체, 사용자 에이전트(또는 그것을 대신하는 프록시)에 의해 전송됩니다. 
- 대부분의 경우, 사용자 에이전트는 브라우저지만, 무엇이든 될 수 있습니다. 
- 예를 들어, 검색 엔진 인덱스를 채워넣고 유지하기 위해 웹을 돌아다니는 로봇이 그러한 경우입니다.

![client-server-chain.png](..%2F..%2Fetc%2Fimage%2FNetwork_image%2Fclient-server-chain.png) 


## 프록시
- 웹 브라우저와 서버 사이에서는 수많은 컴퓨터와 머신이 HTTP 메시지를 이어 받고 전달합니다.
- 여러 계층으로 이루어진 웹 스택 구조에서 이러한 컴퓨터/머신들은 대부분은 전송, 네트워크 혹은 물리 계층에서 동작하며, 성능에 상당히 큰 영향을 주지만 HTTP 계층에서는 이들이 어떻게 동작하는지 눈에 보이지 않습니다. 
- 이러한 컴퓨터/머신 중에서도 애플리케이션 계층에서 동작하는 것들을 일반적으로 프록시라고 부릅니다. 
- 프록시는 눈에 보이거나 그렇지 않을 수도 있으며 다양한 기능들을 수행할 수 있습니다.

### 캐싱 
- 캐시는 공개 또는 비공개가 될 수 있습니다 (예: 브라우저 캐시)
### 필터링 
- 바이러스 백신 스캔, 유해 컨텐츠 차단(자녀 보호) 기능)
### 로드 밸런싱 
- 여러 서버들이 서로 다른 요청을 처리하도록 허용
### 인증 
- 다양한 리소스에 대한 접근 제어
### 로깅 
- 이력 정보를 저장


# HTTP 흐름
- 클라이언트가 서버와 통신하고자 할 때, 최종 서버가 됐든 중간 프록시가 됐든 다음 단계의 과정을 수행

#### 1. TCP 연결을 엽니다. TCP 연결은 요청을 보내거나(혹은 여러 개의 요청) 응답을 받는데 사용됩니다. 클라이언트는 새 연결을 열거나, 기존 연결을 재사용하거나, 서버에 대한 여러 TCP 연결을 열 수 있습니다.
<br>

#### 2. HTTP 메시지를 전송합니다. HTTP 메시지(HTTP/2 이전)는 인간이 읽을 수 있습니다. HTTP/2에서는 이런 간단한 메시지가 프레임 속으로 캡슐화되어 직접 읽는게 불가능하지만 원칙은 동일합니다.
![2-HTTP Flow.png](..%2F..%2Fetc%2Fimage%2FNetwork_image%2F2-HTTP%20Flow.png)

#### 3. 서버에 의해 전송된 응답을 읽어들입니다
![3-HTTP Flow.png](..%2F..%2Fetc%2Fimage%2FNetwork_image%2F3-HTTP%20Flow.png)

#### 4. 연결을 닫거나 다른 요청들을 위해 재사용합니다.
- HTTP 파이프라이닝이 활성화되면, 첫번째 응답을 완전히 수신할 때까지 기다리지 않고 여러 요청을 보낼 수 있습니다.
- HTTP 파이프라이닝은 오래된 소프트웨어와 최신 버전이 공존하고 있는, 기존의 네트워크 상에서 구현하기 어렵다는게 입증되었으며, 프레임안에서 보다 활발한 다중 요청을 보내는 HTTP/2로 교체되고 있습니다.






    출처 : https://developer.mozilla.org/ko/docs/Web/HTTP/Overview

