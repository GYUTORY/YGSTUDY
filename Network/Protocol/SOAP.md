
# SOAP
- "Simple Object Access Protocol"의 약자로, 웹 서비스 간에 통신하는 데 사용되는 프로토콜입니다.
- HTTP, HTTPS, SMTP 등을 사용하여 XML 기반의 메시지를 컴퓨터 네트워크 상에서 교환하는 통신 프로토콜을 말합니다.
- SOAP은 웹 서비스의 데이터를 교환하고, 원격 시스템 간의 통신을 위해 XML을 기반으로하는 간단한 메시지 형식을 제공합니다.


# SOAP API
- SOAP는 엄격한 통신 규칙을 정의하는 프로토콜입니다.
- 데이터 교환의 모든 측면을 제어하는 몇 가지 관련 표준이 있습니다. 

## 표준
- 웹 서비스 보안(WS-Security)은 고유 식별자로 토큰을 사용하는 것과 같은 보안 조치를 지정함
- 웹 서비스 주소 지정(WS-Addressing)에는 라우팅 정보를 메타데이터로 포함해야 함
- WS-ReliableMessaging은 SOAP 메시징의 오류 처리를 표준화함
- 웹 서비스 기술 언어(WSDL)는 SOAP 웹 서비스의 범위와 기능을 설명함


## SOAP 기본 구성 요소
### Envelope(봉투)
- SOAP 메시지의 시작과 끝을 정의합니다. 
- 모든 SOAP 메시지는 봉투로 둘러싸여 있어야 합니다.
- 이것은 XML 문서로 표현됩니다.

### Header(헤더)
- 선택적 요소로, 메시지에 부가적인 메타데이터를 포함할 수 있습니다. 
- 예를 들어, 인증 정보, 트랜잭션 정보 등을 포함할 수 있습니다.


### Body(본문)
- 실제 데이터가 들어있는 부분으로, 웹 서비스 메서드의 매개변수와 반환 값이 여기에 들어갑니다. 
- XML 요소로 구성됩니다.

### Fault(오류)
- 웹 서비스 요청 또는 응답이 실패할 경우 오류 정보를 포함하는 부분입니다. 
- 이는 웹 서비스 호출에서 발생한 오류를 설명합니다.


# 주요 차이점: SOAP와 REST 비교
- SOAP는 프로토콜이고 REST는 아키텍처 스타일입니다.
- 이로 인해 SOAP API와 REST API의 동작 방식이 크게 달라집니다.

## 설계
- SOAP API는 함수 또는 작업을 노출하는 반면 REST API는 데이터 기반입니다. 
- 다른 애플리케이션에서 조작할 수 있는 직원 데이터가 포함된 애플리케이션을 예로 들어 보겠습니다. 
- 애플리케이션의 SOAP API는 CreateEmployee라는 함수를 노출할 수 있습니다. 
- 직원을 만들려면 요청을 보낼 때 SOAP 메시지에 함수 이름을 지정해야 합니다.
- 그러나 애플리케이션의 REST API는 /employees라는 URL을 노출할 수 있으며 해당 URL에 대한 POST 요청은 새 직원 레코드를 생성합니다.

## 유연성
- SOAP API는 엄격하며 애플리케이션 간 XML 메시징만 허용합니다.
- 또한 애플리케이션 서버는 각 클라이언트의 상태를 유지해야 합니다.
- 즉, 새 요청을 처리할 때 이전 요청을 모두 기억해야 합니다.

## 성능
- SOAP 메시지는 더 크고 복잡하기 때문에 전송 및 처리 속도가 느려집니다.
- 이로 인해 페이지 로드 시간이 늘어날 수 있습니다.

## 확장성
- SOAP 프로토콜을 사용하려면 애플리케이션이 요청 간에 상태를 저장해야 하므로 대역폭과 메모리 요구 사항이 증가합니다. 
- 결과적으로 애플리케이션 비용이 많이 들고 확장하기가 어려워집니다.

## 보안
- SOAP를 HTTPS와 함께 사용하려면 추가 WS-Security 계층이 필요합니다.
- WS-Security는 추가 헤더 콘텐츠를 사용하여 지정된 서버의 지정된 프로세스만 SOAP 메시지 콘텐츠를 읽도록 합니다. 
- 이로 인해 통신 오버헤드가 추가되고 성능에 부정적인 영향을 미칩니다.

## 신뢰성
- SOAP에는 오류 처리 로직이 내장되어 있으며 더 높은 안정성을 제공합니다. 
- 반면 REST는 통신 장애 발생 시 다시 시도해야 하며 안정성이 떨어집니다.



# 정리
> SOAP은 HTTP, HTTPS, SMTP 등 다양한 프로토콜을 사용하여 메시지를 전송할 수 있습니다. 웹 서비스 요청은 보통 클라이언트에서 SOAP 메시지를 생성하고, 해당 메시지를 서버에 전송하고, 서버는 SOAP 메시지를 처리한 후 응답을 다시 클라이언트에게 보냅니다.