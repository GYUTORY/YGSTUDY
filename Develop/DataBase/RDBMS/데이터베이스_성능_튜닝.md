---
title: ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë‹
tags: [database, performance-tuning, query-optimization, indexing, connection-pool, benchmarking]
updated: 2025-11-01
---

# ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë‹

## ğŸ“‹ ëª©ì°¨
1. [ì„±ëŠ¥ íŠœë‹ ê°œìš”](#ì„±ëŠ¥-íŠœë‹-ê°œìš”)
2. [ì¿¼ë¦¬ ìµœì í™” ë° ì‹¤í–‰ ê³„íš ë¶„ì„](#ì¿¼ë¦¬-ìµœì í™”-ë°-ì‹¤í–‰-ê³„íš-ë¶„ì„)
3. [ì¸ë±ìŠ¤ ì„¤ê³„ ë° ìµœì í™” ì „ëµ](#ì¸ë±ìŠ¤-ì„¤ê³„-ë°-ìµœì í™”-ì „ëµ)
4. [ë°ì´í„°ë² ì´ìŠ¤ íŒŒí‹°ì…”ë‹ ë° ìƒ¤ë”©](#ë°ì´í„°ë² ì´ìŠ¤-íŒŒí‹°ì…”ë‹-ë°-ìƒ¤ë”©)
5. [ì—°ê²° í’€ ê´€ë¦¬ ë° ìµœì í™”](#ì—°ê²°-í’€-ê´€ë¦¬-ë°-ìµœì í™”)
6. [ì‹¤ì œ ì„±ëŠ¥ íŠœë‹ ì‚¬ë¡€ ë° ë²¤ì¹˜ë§ˆí‚¹](#ì‹¤ì œ-ì„±ëŠ¥-íŠœë‹-ì‚¬ë¡€-ë°-ë²¤ì¹˜ë§ˆí‚¹)
7. [ì°¸ê³  ìë£Œ](#ì°¸ê³ -ìë£Œ)

### ğŸ“Œ í†µí•©ëœ ê¸°ì¡´ íŒŒì¼ë“¤
ì´ ë¬¸ì„œëŠ” ë‹¤ìŒ ê¸°ì¡´ íŒŒì¼ë“¤ì˜ ë‚´ìš©ì„ í†µí•©í•œ ê²ƒì…ë‹ˆë‹¤:
- **RDBMSì—ì„œì˜ index**: ì¸ë±ìŠ¤ ì¢…ë¥˜, ì„¤ê³„ ì›ì¹™, ëª¨ë‹ˆí„°ë§ ë° ìµœì í™”
- **ì˜µí‹°ë§ˆì´ì €**: ì¿¼ë¦¬ ë¶„ì„, ì‹¤í–‰ ê³„íš ìƒì„±, ë¹„ìš© ê¸°ë°˜ ìµœì í™”
- **DB Proxy**: ì—°ê²° í’€ë§, ìë™ ì¬ì—°ê²°, ì„±ëŠ¥ ìµœì í™”
- **ë©”ì‹œì§€ í ë° ë¶„ì‚° ë½**: íŠ¸ëœì­ì…˜ ìµœì í™”, ë½ ì„±ëŠ¥ ìµœì í™”
- **ë°ì´í„°ë² ì´ìŠ¤ í†µí•© í…ŒìŠ¤íŠ¸**: ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­, ëª¨ë‹ˆí„°ë§

---

## ì„±ëŠ¥ íŠœë‹ ê°œìš”

### ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë‹ì´ë€?

ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë‹ì€ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì´ ë” ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ìµœì í™”í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ë‹¨ìˆœíˆ ì¿¼ë¦¬ ì†ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì„ ë„˜ì–´, ì „ì²´ ì‹œìŠ¤í…œì˜ ì²˜ë¦¬ëŸ‰, ì‘ë‹µ ì‹œê°„, ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ ì„ ê°œì„ í•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

#### ì„±ëŠ¥ íŠœë‹ì´ í•„ìš”í•œ ì´ìœ 

**1. ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**
```
ëŠë¦° ë°ì´í„°ë² ì´ìŠ¤ â†’ ëŠë¦° ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ ë‚˜ìœ ì‚¬ìš©ì ê²½í—˜

ì˜ˆì‹œ:
- ìƒí’ˆ ê²€ìƒ‰ì´ 5ì´ˆ ê±¸ë¦¼ â†’ ì‚¬ìš©ì ì´íƒˆ
- ê²°ì œ ì²˜ë¦¬ê°€ 10ì´ˆ ê±¸ë¦¼ â†’ ê±°ë˜ ì‹¤íŒ¨
- ëŒ€ì‹œë³´ë“œ ë¡œë”©ì´ 30ì´ˆ ê±¸ë¦¼ â†’ ì—…ë¬´ ë¹„íš¨ìœ¨
```

**2. ë¹„ìš© ì ˆê°**
```
ì„±ëŠ¥ ìµœì í™”ë¡œ ë™ì¼í•œ í•˜ë“œì›¨ì–´ì—ì„œ ë” ë§ì€ ìš”ì²­ ì²˜ë¦¬ ê°€ëŠ¥

ìµœì í™” ì „: ì„œë²„ 10ëŒ€ë¡œ 1,000 RPS ì²˜ë¦¬
ìµœì í™” í›„: ì„œë²„ 5ëŒ€ë¡œ 1,000 RPS ì²˜ë¦¬ â†’ 50% ë¹„ìš© ì ˆê°
```

**3. í™•ì¥ì„± í™•ë³´**
```
ì„±ëŠ¥ì´ ì¢‹ì€ ì‹œìŠ¤í…œì€ í™•ì¥ì´ ì‰½ìŠµë‹ˆë‹¤

ë¹„íš¨ìœ¨ì  ì‹œìŠ¤í…œ: íŠ¸ë˜í”½ 2ë°° ì¦ê°€ â†’ ì„œë²„ 5ë°° í•„ìš”
íš¨ìœ¨ì  ì‹œìŠ¤í…œ: íŠ¸ë˜í”½ 2ë°° ì¦ê°€ â†’ ì„œë²„ 2ë°° í•„ìš”
```

**4. ë¹„ì¦ˆë‹ˆìŠ¤ ì—°ì†ì„±**
```
ëŠë¦° ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì „ì²´ ì‹œìŠ¤í…œì˜ ë³‘ëª©ì´ ë©ë‹ˆë‹¤

ë°ì´í„°ë² ì´ìŠ¤ ë³‘ëª© â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ëŒ€ê¸° â†’ íƒ€ì„ì•„ì›ƒ â†’ ì„œë¹„ìŠ¤ ì¥ì• 
```

### ì„±ëŠ¥ ë¬¸ì œì˜ ì¼ë°˜ì ì¸ ì›ì¸

#### 1. ë¹„íš¨ìœ¨ì ì¸ ì¿¼ë¦¬

**ë¬¸ì œ ìƒí™©:**
```sql
-- âŒ ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”
SELECT * FROM orders WHERE YEAR(created_at) = 2024;
-- 1ì–µ ê±´ í…Œì´ë¸”ì—ì„œ 10ì´ˆ ì†Œìš”

-- âœ… ì¸ë±ìŠ¤ í™œìš©
SELECT * FROM orders WHERE created_at >= '2024-01-01' AND created_at < '2025-01-01';
-- ê°™ì€ í…Œì´ë¸”ì—ì„œ 0.1ì´ˆ ì†Œìš”
```

**ì™œ ë¬¸ì œì¸ê°€?**
- í•¨ìˆ˜ë¥¼ ì»¬ëŸ¼ì— ì ìš©í•˜ë©´ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
- ì „ì²´ í…Œì´ë¸”ì„ ì½ì–´ì•¼ í•˜ë¯€ë¡œ ë””ìŠ¤í¬ I/Oê°€ ê¸‰ì¦í•©ë‹ˆë‹¤
- ë°ì´í„°ê°€ ì¦ê°€í•˜ë©´ ì„±ëŠ¥ì´ ì„ í˜•ì ìœ¼ë¡œ ì•…í™”ë©ë‹ˆë‹¤

#### 2. ì˜ëª»ëœ ì¸ë±ìŠ¤ ì„¤ê³„

**ë¬¸ì œ ìƒí™©:**
```sql
-- í…Œì´ë¸”: users (1ì²œë§Œ ê±´)
-- ì¿¼ë¦¬: SELECT * FROM users WHERE status = 'active' AND city = 'Seoul';

-- âŒ ì¸ë±ìŠ¤ ì—†ìŒ â†’ ì „ì²´ ìŠ¤ìº” (10ì´ˆ)
-- âŒ INDEX(status) â†’ ì„ íƒë„ ë‚®ìŒ (5ì´ˆ)
-- âœ… INDEX(city, status) â†’ ë³µí•© ì¸ë±ìŠ¤ (0.05ì´ˆ)
```

**ì™œ ë¬¸ì œì¸ê°€?**
- ì„ íƒë„ê°€ ë‚®ì€ ì»¬ëŸ¼(status)ì—ë§Œ ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ë©´ íš¨ê³¼ê°€ ì ìŠµë‹ˆë‹¤
- ì¸ë±ìŠ¤ê°€ ì—†ìœ¼ë©´ ë§¤ë²ˆ ì „ì²´ ë°ì´í„°ë¥¼ ì½ì–´ì•¼ í•©ë‹ˆë‹¤
- ì˜ëª»ëœ ìˆœì„œì˜ ë³µí•© ì¸ë±ìŠ¤ëŠ” ì¼ë¶€ ì¡°ê±´ì—ë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤

#### 3. ê³¼ë„í•œ ë°ì´í„° ì¡°íšŒ

**ë¬¸ì œ ìƒí™©:**
```sql
-- âŒ í•„ìš” ì—†ëŠ” ë°ì´í„°ê¹Œì§€ ì¡°íšŒ
SELECT * FROM users WHERE id = 123;
-- 50ê°œ ì»¬ëŸ¼ ëª¨ë‘ ì¡°íšŒ

-- âœ… í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì¡°íšŒ
SELECT id, name, email FROM users WHERE id = 123;
-- 3ê°œ ì»¬ëŸ¼ë§Œ ì¡°íšŒ â†’ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 90% ê°ì†Œ
```

**ì™œ ë¬¸ì œì¸ê°€?**
- ë¶ˆí•„ìš”í•œ ë°ì´í„° ì „ì†¡ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ë‚­ë¹„
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€ë¡œ ìºì‹œ íš¨ìœ¨ ì €í•˜
- ì§ë ¬í™”/ì—­ì§ë ¬í™” ì˜¤ë²„í—¤ë“œ ì¦ê°€

#### 4. ì—°ê²° ê´€ë¦¬ ë¬¸ì œ

**ë¬¸ì œ ìƒí™©:**
```
ë™ì‹œ ì ‘ì† 1,000ëª…
ê° ìš”ì²­ë§ˆë‹¤ ìƒˆ DB ì—°ê²° ìƒì„±/ì¢…ë£Œ

ì—°ê²° ìƒì„± ì‹œê°„: 50ms
ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„: 10ms
ì—°ê²° ì¢…ë£Œ ì‹œê°„: 10ms

ì‹¤ì œ DB ì‘ì—…: 10ms (14%)
ì—°ê²° ê´€ë¦¬ ì˜¤ë²„í—¤ë“œ: 60ms (86%) â† ë‚­ë¹„!
```

**ì™œ ë¬¸ì œì¸ê°€?**
- ì—°ê²° ìƒì„±/ì¢…ë£ŒëŠ” ë¹„ìš©ì´ í° ì‘ì—…ì…ë‹ˆë‹¤
- ë°ì´í„°ë² ì´ìŠ¤ ìµœëŒ€ ì—°ê²° ìˆ˜ ì œí•œì— ë¹ ë¥´ê²Œ ë„ë‹¬í•©ë‹ˆë‹¤
- ì‹¤ì œ ì¿¼ë¦¬ ì‹¤í–‰ë³´ë‹¤ ì—°ê²° ê´€ë¦¬ì— ë” ë§ì€ ì‹œê°„ ì†Œìš”

### ì„±ëŠ¥ íŠœë‹ì˜ ì ‘ê·¼ ë°©ë²•

#### 1. ì¸¡ì • ë¨¼ì €, ìµœì í™”ëŠ” ë‚˜ì¤‘ì—

```
ì¶”ì¸¡ì´ ì•„ë‹Œ ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •

ë‹¨ê³„:
1. í˜„ì¬ ì„±ëŠ¥ ì¸¡ì • (ë² ì´ìŠ¤ë¼ì¸ ì„¤ì •)
2. ë³‘ëª© ì§€ì  ì‹ë³„
3. ëª©í‘œ ì„¤ì • (ì˜ˆ: ì‘ë‹µ ì‹œê°„ 50% ë‹¨ì¶•)
4. ìµœì í™” ìˆ˜í–‰
5. ì¸¡ì • ë° ê²€ì¦
6. ê°œì„  íš¨ê³¼ê°€ ìˆìœ¼ë©´ ì ìš©, ì—†ìœ¼ë©´ ë¡¤ë°±
```

#### 2. ìš°ì„ ìˆœìœ„ ê²°ì •

**Pareto ì›ì¹™ (80/20 ë²•ì¹™) ì ìš©:**
```
ì „ì²´ ì„±ëŠ¥ ë¬¸ì œì˜ 80%ëŠ” ìƒìœ„ 20% ì¿¼ë¦¬ì—ì„œ ë°œìƒ

ìµœì í™” ìš°ì„ ìˆœìœ„:
1. ê°€ì¥ ìì£¼ ì‹¤í–‰ë˜ëŠ” ì¿¼ë¦¬
2. ê°€ì¥ ëŠë¦° ì¿¼ë¦¬
3. ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬

ì˜ˆì‹œ:
- ë©”ì¸ í˜ì´ì§€ ì¿¼ë¦¬ (í•˜ë£¨ 100ë§Œ ë²ˆ ì‹¤í–‰)
  â†’ 0.1ì´ˆ ê°œì„  = í•˜ë£¨ 27ì‹œê°„ ì ˆì•½
- ê´€ë¦¬ì ë¦¬í¬íŠ¸ ì¿¼ë¦¬ (í•˜ë£¨ 10ë²ˆ ì‹¤í–‰)
  â†’ 1ì´ˆ ê°œì„  = í•˜ë£¨ 10ì´ˆ ì ˆì•½
```

#### 3. ë‹¨ê³„ì  ì ‘ê·¼

```
ì‘ì€ ê²ƒë¶€í„° ì‹œì‘í•˜ì—¬ ì ì§„ì ìœ¼ë¡œ ê°œì„ 

Level 1: Quick Wins (ë¹ ë¥¸ ê°œì„ )
â”œâ”€ SELECT * ì œê±°
â”œâ”€ WHERE ì ˆ ì¸ë±ìŠ¤ ì¶”ê°€
â””â”€ ë¶ˆí•„ìš”í•œ JOIN ì œê±°

Level 2: êµ¬ì¡°ì  ê°œì„ 
â”œâ”€ ë³µí•© ì¸ë±ìŠ¤ ì„¤ê³„
â”œâ”€ ì¿¼ë¦¬ ì¬ì‘ì„±
â””â”€ íŒŒí‹°ì…”ë‹ ì ìš©

Level 3: ì•„í‚¤í…ì²˜ ë³€ê²½
â”œâ”€ ì½ê¸° ì „ìš© ë³µì œë³¸ ì¶”ê°€
â”œâ”€ ìºì‹± ë ˆì´ì–´ ë„ì…
â””â”€ ìƒ¤ë”© ì ìš©

ê° ë‹¨ê³„ë§ˆë‹¤ ì¸¡ì •í•˜ê³  íš¨ê³¼ë¥¼ ê²€ì¦
```

### ì„±ëŠ¥ ì¸¡ì • ì§€í‘œ

#### 1. ì‘ë‹µ ì‹œê°„ (Response Time)

```
ì¿¼ë¦¬ ì‹œì‘ë¶€í„° ê²°ê³¼ ë°˜í™˜ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„

ì¸¡ì • ë°©ë²•:
- í‰ê·  (Average): ì „ì²´ í‰ê·  ì‹œê°„
- ì¤‘ì•™ê°’ (Median/P50): 50% ì‚¬ìš©ìê°€ ê²½í—˜í•˜ëŠ” ì‹œê°„
- P95: 95% ì‚¬ìš©ìê°€ ê²½í—˜í•˜ëŠ” ì‹œê°„ (ìƒìœ„ 5%ëŠ” ë” ëŠë¦¼)
- P99: 99% ì‚¬ìš©ìê°€ ê²½í—˜í•˜ëŠ” ì‹œê°„

ì˜ˆì‹œ:
í‰ê· : 100ms
P95: 500ms â† 20ëª… ì¤‘ 1ëª…ì€ 500ms ì´ìƒ ê²½í—˜
P99: 2000ms â† 100ëª… ì¤‘ 1ëª…ì€ 2ì´ˆ ì´ìƒ ê²½í—˜

P95, P99ê°€ ì¤‘ìš”í•œ ì´ìœ :
- í‰ê· ì€ ì´ìƒì¹˜ì— ì˜í–¥ì„ ë°›ì§€ë§Œ, ì‹¤ì œ ì‚¬ìš©ì ê²½í—˜ì„ ë°˜ì˜ ëª»í•¨
- ëŠë¦° ê²½í—˜ì„ í•œ ì‚¬ìš©ìë“¤ì´ ë¶ˆë§Œì„ ê°€ì¥ ë§ì´ í‘œì¶œ
```

#### 2. ì²˜ë¦¬ëŸ‰ (Throughput)

```
ë‹¨ìœ„ ì‹œê°„ë‹¹ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì¿¼ë¦¬/íŠ¸ëœì­ì…˜ ìˆ˜

ì¸¡ì • ë‹¨ìœ„:
- QPS (Queries Per Second): ì´ˆë‹¹ ì¿¼ë¦¬ ìˆ˜
- TPS (Transactions Per Second): ì´ˆë‹¹ íŠ¸ëœì­ì…˜ ìˆ˜

ì˜ˆì‹œ:
í˜„ì¬: 1,000 QPS
ëª©í‘œ: 5,000 QPS (5ë°° í–¥ìƒ)

ë³‘ëª© í™•ì¸:
- CPU 100% ì‚¬ìš© â†’ CPU ë³‘ëª©
- ë””ìŠ¤í¬ I/O 100% â†’ ë””ìŠ¤í¬ ë³‘ëª©
- ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ 100% â†’ ë„¤íŠ¸ì›Œí¬ ë³‘ëª©
```

#### 3. ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥ 

```
í•˜ë“œì›¨ì–´ ìì› ì‚¬ìš© í˜„í™©

ëª¨ë‹ˆí„°ë§ í•­ëª©:
â”œâ”€ CPU ì‚¬ìš©ë¥ 
â”‚   - 70% ë¯¸ë§Œ: ì—¬ìœ  ìˆìŒ
â”‚   - 70-80%: ì£¼ì˜ í•„ìš”
â”‚   - 80% ì´ìƒ: í™•ì¥ í•„ìš”
â”‚
â”œâ”€ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ 
â”‚   - Buffer Pool Hit Rate > 95%: ì¢‹ìŒ
â”‚   - < 90%: ë©”ëª¨ë¦¬ ë¶€ì¡±
â”‚
â”œâ”€ ë””ìŠ¤í¬ I/O
â”‚   - IOPS (Input/Output Per Second)
â”‚   - Latency (ì½ê¸°/ì“°ê¸° ì§€ì—°)
â”‚
â””â”€ ë„¤íŠ¸ì›Œí¬
    - ëŒ€ì—­í­ ì‚¬ìš©ë¥ 
    - íŒ¨í‚· ì†ì‹¤ë¥ 
```

#### 4. ë™ì‹œì„± ì§€í‘œ

```
ë™ì‹œì— ì²˜ë¦¬ ì¤‘ì¸ ìš”ì²­ ìˆ˜

ëª¨ë‹ˆí„°ë§ í•­ëª©:
- Active Connections: í™œì„± ì—°ê²° ìˆ˜
- Waiting Queries: ëŒ€ê¸° ì¤‘ì¸ ì¿¼ë¦¬ ìˆ˜
- Lock Waits: ë½ ëŒ€ê¸° ì‹œê°„

ì˜ˆì‹œ:
ìµœëŒ€ ì—°ê²° ìˆ˜: 200
í˜„ì¬ ì—°ê²° ìˆ˜: 180 (90% ì‚¬ìš©) â† ìœ„í—˜!
ëŒ€ê¸° ì¤‘ì¸ ì—°ê²°: 50 â† ë³‘ëª© ë°œìƒ

í•´ê²° ë°©ë²•:
1. ì—°ê²° í’€ í¬ê¸° ì¦ê°€
2. ì¿¼ë¦¬ ìµœì í™”ë¡œ ì²˜ë¦¬ ì‹œê°„ ë‹¨ì¶•
3. ì½ê¸° ì „ìš© ë³µì œë³¸ ì¶”ê°€
```

### ì„±ëŠ¥ íŠœë‹ì˜ ì¼ë°˜ ì›ì¹™

#### 1. ì¡°ê¸° ìµœì í™”ëŠ” í”¼í•˜ë¼

```
"Premature optimization is the root of all evil" - Donald Knuth

ë¬¸ì œ:
- ì‹¤ì œë¡œ ë³‘ëª©ì´ ì•„ë‹Œ ë¶€ë¶„ì„ ìµœì í™”
- ì½”ë“œ ë³µì¡ë„ë§Œ ì¦ê°€
- ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì¦ê°€

ì˜¬ë°”ë¥¸ ì ‘ê·¼:
1. ë¨¼ì € ì‘ë™í•˜ëŠ” ì½”ë“œ ì‘ì„±
2. ì„±ëŠ¥ ë¬¸ì œ ë°œìƒ ì‹œ ì¸¡ì •
3. ì‹¤ì œ ë³‘ëª©ë§Œ ìµœì í™”
```

#### 2. ìºì‹±ì€ ë§ˆì§€ë§‰ ìˆ˜ë‹¨ì´ ì•„ë‹Œ ìš°ì„  ê³ ë ¤ì‚¬í•­

```
ìºì‹±ì˜ íš¨ê³¼:
- DB ë¶€í•˜ ê°ì†Œ
- ì‘ë‹µ ì†ë„ í–¥ìƒ
- ë¹„ìš© ì ˆê°

í•˜ì§€ë§Œ:
- ë°ì´í„° ì¼ê´€ì„± ë¬¸ì œ
- ìºì‹œ ë¬´íš¨í™” ë³µì¡ì„±
- ë©”ëª¨ë¦¬ ê´€ë¦¬ í•„ìš”

ìºì‹± ì ìš© ê¸°ì¤€:
â”œâ”€ ì½ê¸°ê°€ ì“°ê¸°ë³´ë‹¤ 10ë°° ì´ìƒ ë§ì€ ë°ì´í„°
â”œâ”€ ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ë°ì´í„°
â””â”€ ì¼ì‹œì  ë¶ˆì¼ì¹˜ë¥¼ í—ˆìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°
```

#### 3. ìˆ˜ì§ í™•ì¥ vs ìˆ˜í‰ í™•ì¥

```
ìˆ˜ì§ í™•ì¥ (Scale Up):
ì¥ì : êµ¬í˜„ ê°„ë‹¨, ë°ì´í„° ì¼ê´€ì„± ìœ ì§€
ë‹¨ì : ë¹„ìš© ê¸‰ì¦, ë¬¼ë¦¬ì  í•œê³„

ìˆ˜í‰ í™•ì¥ (Scale Out):
ì¥ì : ë¹„ìš© íš¨ìœ¨ì , ë¬´ì œí•œ í™•ì¥
ë‹¨ì : ë³µì¡ë„ ì¦ê°€, ì¼ê´€ì„± ê´€ë¦¬ ì–´ë ¤ì›€

ì¼ë°˜ì  ì „ëµ:
1. ë¨¼ì € ì¿¼ë¦¬ ìµœì í™”
2. ìºì‹± ë„ì…
3. ì½ê¸° ì „ìš© ë³µì œë³¸ ì¶”ê°€ (ìˆ˜í‰ í™•ì¥)
4. ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì–‘ ì—…ê·¸ë ˆì´ë“œ (ìˆ˜ì§ í™•ì¥)
5. ìƒ¤ë”© ë„ì… (ìˆ˜í‰ í™•ì¥)
```

---

## ì¿¼ë¦¬ ìµœì í™” ë° ì‹¤í–‰ ê³„íš ë¶„ì„

### ì¿¼ë¦¬ ìµœì í™”ë€?

ì¿¼ë¦¬ ìµœì í™”ëŠ” ë™ì¼í•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë©´ì„œë„ ë” ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ SQL ì¿¼ë¦¬ë¥¼ ê°œì„ í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë‹ì—ì„œ ê°€ì¥ ì¦‰ê°ì ì´ê³  íš¨ê³¼ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤.

#### ì¿¼ë¦¬ ìµœì í™”ê°€ ì¤‘ìš”í•œ ì´ìœ 

**1. ì¦‰ê°ì ì¸ ì„±ëŠ¥ í–¥ìƒ**
```
ì½”ë“œ ëª‡ ì¤„ ìˆ˜ì •ìœ¼ë¡œ 10ë°° ì´ìƒ ì„±ëŠ¥ í–¥ìƒ ê°€ëŠ¥

ì˜ˆì‹œ:
ê¸°ì¡´ ì¿¼ë¦¬: 10ì´ˆ
ìµœì í™” í›„: 0.1ì´ˆ (100ë°° í–¥ìƒ)

ë¹„ìš©: ê°œë°œì 30ë¶„ íˆ¬ì
íš¨ê³¼: í•˜ë£¨ ìˆ˜ì²œ ëª…ì˜ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
```

**2. í•˜ë“œì›¨ì–´ ë¹„ìš© ì ˆê°**
```
ë¹„íš¨ìœ¨ì  ì¿¼ë¦¬ ìµœì í™” â†’ ì„œë²„ ì¦ì„¤ ë¶ˆí•„ìš”

ì˜ˆì‹œ:
ìµœì í™” ì „: DB ì„œë²„ 10ëŒ€ í•„ìš” (ì›” 1,000ë§Œì›)
ìµœì í™” í›„: DB ì„œë²„ 3ëŒ€ë¡œ ì¶©ë¶„ (ì›” 300ë§Œì›)
â†’ ì—°ê°„ 8,400ë§Œì› ì ˆê°
```

**3. í™•ì¥ì„± í™•ë³´**
```
íš¨ìœ¨ì  ì¿¼ë¦¬ â†’ ë™ì¼ ë¦¬ì†ŒìŠ¤ë¡œ ë” ë§ì€ íŠ¸ë˜í”½ ì²˜ë¦¬

ìµœì í™” ì „: 1,000 RPS ì²˜ë¦¬
ìµœì í™” í›„: 5,000 RPS ì²˜ë¦¬ (ê°™ì€ í•˜ë“œì›¨ì–´)
```

### ì‹¤í–‰ ê³„íšì´ë€?

ì‹¤í–‰ ê³„íš(Execution Plan)ì€ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì„ íƒí•œ êµ¬ì²´ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. ì¿¼ë¦¬ ìµœì í™”ì˜ ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” ì‹¤í–‰ ê³„íšì„ ì´í•´í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

#### ì‹¤í–‰ ê³„íšì˜ êµ¬ì„± ìš”ì†Œ

**1. ì ‘ê·¼ ë°©ë²• (Access Method)**
```
ë°ì´í„°ë¥¼ ì½ëŠ” ë°©ì‹

ì¢…ë¥˜:
â”œâ”€ Table Scan (ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”)
â”‚   - ëª¨ë“  í–‰ì„ ìˆœì°¨ì ìœ¼ë¡œ ì½ìŒ
â”‚   - ëŠë¦¬ì§€ë§Œ ì¸ë±ìŠ¤ê°€ ì—†ì„ ë•Œ ìœ ì¼í•œ ë°©ë²•
â”‚
â”œâ”€ Index Scan (ì¸ë±ìŠ¤ ìŠ¤ìº”)
â”‚   - ì¸ë±ìŠ¤ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì½ìŒ
â”‚   - ë²”ìœ„ ê²€ìƒ‰ì— íš¨ìœ¨ì 
â”‚
â”œâ”€ Index Seek (ì¸ë±ìŠ¤ íƒìƒ‰)
â”‚   - ì¸ë±ìŠ¤ì—ì„œ íŠ¹ì • ê°’ë§Œ ì°¾ìŒ
â”‚   - ê°€ì¥ ë¹ ë¥¸ ë°©ë²•
â”‚
â””â”€ Index Full Scan (ì¸ë±ìŠ¤ ì „ì²´ ìŠ¤ìº”)
    - ì¸ë±ìŠ¤ ì „ì²´ë¥¼ ì½ì§€ë§Œ í…Œì´ë¸”ì€ ì•ˆ ì½ìŒ
    - ì»¤ë²„ë§ ì¸ë±ìŠ¤ì¼ ë•Œ íš¨ìœ¨ì 
```

**2. ì¡°ì¸ ë°©ë²• (Join Method)**
```
ì—¬ëŸ¬ í…Œì´ë¸”ì„ ê²°í•©í•˜ëŠ” ë°©ì‹

Nested Loop Join:
â”œâ”€ ì‘ë™: ì²« ë²ˆì§¸ í…Œì´ë¸”ì˜ ê° í–‰ì— ëŒ€í•´ ë‘ ë²ˆì§¸ í…Œì´ë¸” ê²€ìƒ‰
â”œâ”€ ì í•©: ì‘ì€ ê²°ê³¼ ì§‘í•©
â””â”€ ë¹„íš¨ìœ¨: í° í…Œì´ë¸” ì¡°ì¸

Hash Join:
â”œâ”€ ì‘ë™: í•´ì‹œ í…Œì´ë¸” ìƒì„± í›„ ì¡°ì¸
â”œâ”€ ì í•©: í° í…Œì´ë¸” ì¡°ì¸
â””â”€ ë‹¨ì : ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë†’ìŒ

Merge Join:
â”œâ”€ ì‘ë™: ì •ë ¬ëœ ë°ì´í„°ë¥¼ ë³‘í•©
â”œâ”€ ì í•©: ì´ë¯¸ ì •ë ¬ëœ ë°ì´í„°
â””â”€ ë‹¨ì : ì •ë ¬ ì˜¤ë²„í—¤ë“œ
```

**3. ë¹„ìš© (Cost)**
```
ì¿¼ë¦¬ ì‹¤í–‰ì— í•„ìš”í•œ ì˜ˆìƒ ë¦¬ì†ŒìŠ¤

êµ¬ì„±:
- CPU Cost: CPU ì—°ì‚° ë¹„ìš©
- I/O Cost: ë””ìŠ¤í¬ ì½ê¸°/ì“°ê¸° ë¹„ìš©
- Network Cost: ë°ì´í„° ì „ì†¡ ë¹„ìš©

ì˜ˆì‹œ:
ì¿¼ë¦¬ A: Cost = 100
ì¿¼ë¦¬ B: Cost = 10
â†’ ì¿¼ë¦¬ Bê°€ 10ë°° íš¨ìœ¨ì 
```

### 1. ì‹¤í–‰ ê³„íš ë¶„ì„ ê¸°ì´ˆ

#### MySQL ì‹¤í–‰ ê³„íš ë¶„ì„
```sql
-- ê¸°ë³¸ ì‹¤í–‰ ê³„íš í™•ì¸
EXPLAIN SELECT * FROM users WHERE email = 'user@example.com';

-- ìƒì„¸í•œ ì‹¤í–‰ ê³„íš í™•ì¸
EXPLAIN FORMAT=JSON SELECT * FROM users WHERE email = 'user@example.com';

-- ì‹¤í–‰ ê³„íšê³¼ í•¨ê»˜ ì‹¤ì œ ì‹¤í–‰
EXPLAIN ANALYZE SELECT * FROM users WHERE email = 'user@example.com';
```

#### PostgreSQL ì‹¤í–‰ ê³„íš ë¶„ì„
```sql
-- ê¸°ë³¸ ì‹¤í–‰ ê³„íš í™•ì¸
EXPLAIN SELECT * FROM users WHERE email = 'user@example.com';

-- ìƒì„¸í•œ ì‹¤í–‰ ê³„íš í™•ì¸
EXPLAIN (ANALYZE, BUFFERS, FORMAT JSON) 
SELECT * FROM users WHERE email = 'user@example.com';

-- ì‹¤í–‰ ê³„íš ìºì‹±
EXPLAIN (ANALYZE, BUFFERS, COSTS, VERBOSE, FORMAT JSON)
SELECT * FROM users WHERE email = 'user@example.com';
```

### 2. ì‹¤í–‰ ê³„íš í•´ì„

#### ì£¼ìš” ì‹¤í–‰ ê³„íš ìš”ì†Œ
```sql
-- ì‹¤í–‰ ê³„íš ê²°ê³¼ í•´ì„ ì˜ˆì‹œ
EXPLAIN SELECT u.*, p.name as profile_name 
FROM users u 
JOIN profiles p ON u.id = p.user_id 
WHERE u.created_at > '2024-01-01';

-- ê²°ê³¼ í•´ì„:
-- 1. type: ALL (ì „ì²´ í…Œì´ë¸” ìŠ¤ìº”) vs index (ì¸ë±ìŠ¤ ìŠ¤ìº”)
-- 2. key: ì‚¬ìš©ëœ ì¸ë±ìŠ¤
-- 3. rows: ì˜ˆìƒ í–‰ ìˆ˜
-- 4. Extra: ì¶”ê°€ ì •ë³´ (Using index, Using temporary, Using filesort)
```

#### ì„±ëŠ¥ ë¬¸ì œ ì§„ë‹¨
```javascript
class QueryAnalyzer {
  constructor() {
    this.slowQueries = [];
    this.queryStats = new Map();
  }

  // ëŠë¦° ì¿¼ë¦¬ ê°ì§€
  analyzeSlowQuery(query, executionTime) {
    if (executionTime > 1000) { // 1ì´ˆ ì´ìƒ
      this.slowQueries.push({
        query,
        executionTime,
        timestamp: new Date(),
        suggestions: this.generateSuggestions(query)
      });
    }
  }

  // ì¿¼ë¦¬ ìµœì í™” ì œì•ˆ
  generateSuggestions(query) {
    const suggestions = [];
    
    if (query.includes('SELECT *')) {
      suggestions.push('SELECT * ëŒ€ì‹  í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì„ íƒí•˜ì„¸ìš”');
    }
    
    if (query.includes('ORDER BY') && !query.includes('LIMIT')) {
      suggestions.push('ORDER BYì™€ í•¨ê»˜ LIMITì„ ì‚¬ìš©í•˜ì„¸ìš”');
    }
    
    if (query.includes('LIKE \'%')) {
      suggestions.push('LIKE \'%...\' íŒ¨í„´ì€ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }
    
    return suggestions;
  }

  // ì¿¼ë¦¬ í†µê³„ ìˆ˜ì§‘
  collectQueryStats(query, executionTime) {
    const normalizedQuery = this.normalizeQuery(query);
    
    if (!this.queryStats.has(normalizedQuery)) {
      this.queryStats.set(normalizedQuery, {
        count: 0,
        totalTime: 0,
        avgTime: 0,
        maxTime: 0
      });
    }
    
    const stats = this.queryStats.get(normalizedQuery);
    stats.count++;
    stats.totalTime += executionTime;
    stats.avgTime = stats.totalTime / stats.count;
    stats.maxTime = Math.max(stats.maxTime, executionTime);
  }

  // ì¿¼ë¦¬ ì •ê·œí™” (ë§¤ê°œë³€ìˆ˜ ì œê±°)
  normalizeQuery(query) {
    return query.replace(/\d+/g, '?')
                .replace(/'[^']*'/g, '?')
                .replace(/"[^"]*"/g, '?');
  }
}
```

### 3. ì¿¼ë¦¬ ìµœì í™” ê¸°ë²•

#### ì¸ë±ìŠ¤ íŒíŠ¸ ì‚¬ìš©
```sql
-- MySQL ì¸ë±ìŠ¤ íŒíŠ¸
SELECT * FROM users USE INDEX (idx_email) WHERE email = 'user@example.com';
SELECT * FROM users FORCE INDEX (idx_email) WHERE email = 'user@example.com';
SELECT * FROM users IGNORE INDEX (idx_old) WHERE email = 'user@example.com';

-- PostgreSQL ì¸ë±ìŠ¤ íŒíŠ¸
SELECT * FROM users WHERE email = 'user@example.com';
-- PostgreSQLì—ì„œëŠ” íŒíŠ¸ ëŒ€ì‹  í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸
ANALYZE users;
```

#### ì¿¼ë¦¬ ì¬ì‘ì„±
```sql
-- âŒ ë¹„íš¨ìœ¨ì ì¸ ì¿¼ë¦¬
SELECT * FROM users WHERE YEAR(created_at) = 2024;

-- âœ… ìµœì í™”ëœ ì¿¼ë¦¬
SELECT * FROM users WHERE created_at >= '2024-01-01' AND created_at < '2025-01-01';

-- âŒ ë¹„íš¨ìœ¨ì ì¸ ì¿¼ë¦¬
SELECT * FROM users WHERE email LIKE '%@gmail.com';

-- âœ… ìµœì í™”ëœ ì¿¼ë¦¬ (ê°€ëŠ¥í•œ ê²½ìš°)
SELECT * FROM users WHERE email LIKE 'user%@gmail.com';
```

#### ì„œë¸Œì¿¼ë¦¬ ìµœì í™”
```sql
-- âŒ ë¹„íš¨ìœ¨ì ì¸ ì„œë¸Œì¿¼ë¦¬
SELECT * FROM users WHERE id IN (
  SELECT user_id FROM orders WHERE total_amount > 1000
);

-- âœ… ìµœì í™”ëœ JOIN
SELECT DISTINCT u.* FROM users u
JOIN orders o ON u.id = o.user_id
WHERE o.total_amount > 1000;

-- âŒ ë¹„íš¨ìœ¨ì ì¸ EXISTS
SELECT * FROM users WHERE EXISTS (
  SELECT 1 FROM orders WHERE user_id = users.id AND total_amount > 1000
);

-- âœ… ìµœì í™”ëœ EXISTS (ì¸ë±ìŠ¤ í™œìš©)
SELECT * FROM users WHERE EXISTS (
  SELECT 1 FROM orders WHERE user_id = users.id AND total_amount > 1000
);
```

---

## ì¸ë±ìŠ¤ ì„¤ê³„ ë° ìµœì í™” ì „ëµ

### ì¸ë±ìŠ¤ë€?

ì¸ë±ìŠ¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ë¹ ë¥´ê²Œ ì°¾ê¸° ìœ„í•œ ìë£Œêµ¬ì¡°ì…ë‹ˆë‹¤. ì±…ì˜ ìƒ‰ì¸ì²˜ëŸ¼, ì „ì²´ ë‚´ìš©ì„ ì½ì§€ ì•Šê³ ë„ ì›í•˜ëŠ” ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

#### ì¸ë±ìŠ¤ì˜ í•„ìš”ì„±

**ì¸ë±ìŠ¤ê°€ ì—†ëŠ” ê²½ìš°:**
```
ì‚¬ìš©ì í…Œì´ë¸” (1,000ë§Œ ê±´)ì—ì„œ íŠ¹ì • ì´ë©”ì¼ ê²€ìƒ‰:

SELECT * FROM users WHERE email = 'john@example.com';

ì‘ë™ ë°©ì‹:
1. ì²« ë²ˆì§¸ í–‰ë¶€í„° ì‹œì‘
2. 1,000ë§Œ ê°œì˜ ëª¨ë“  í–‰ì„ ìˆœì°¨ì ìœ¼ë¡œ í™•ì¸
3. ì¼ì¹˜í•˜ëŠ” ì´ë©”ì¼ ë°œê²¬
4. ê³„ì† ê²€ìƒ‰ (ì¤‘ë³µ ê°€ëŠ¥ì„±)

ì†Œìš” ì‹œê°„: 10ì´ˆ
ì½ì€ í–‰ ìˆ˜: 1,000ë§Œ ê±´
ë””ìŠ¤í¬ I/O: ë§¤ìš° ë†’ìŒ
```

**ì¸ë±ìŠ¤ê°€ ìˆëŠ” ê²½ìš°:**
```
email ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ìƒì„±:

CREATE INDEX idx_email ON users(email);

ì‘ë™ ë°©ì‹:
1. ì¸ë±ìŠ¤ íŠ¸ë¦¬ì—ì„œ 'john@example.com' ê²€ìƒ‰
2. 3-4ë²ˆì˜ ë…¸ë“œ íƒìƒ‰ìœ¼ë¡œ ìœ„ì¹˜ íŒŒì•…
3. í•´ë‹¹ ë°ì´í„° ì§ì ‘ ì ‘ê·¼

ì†Œìš” ì‹œê°„: 0.001ì´ˆ (10,000ë°° ë¹ ë¦„)
ì½ì€ í–‰ ìˆ˜: 1ê±´
ë””ìŠ¤í¬ I/O: ìµœì†Œí™”
```

#### ì¸ë±ìŠ¤ì˜ ì‘ë™ ì›ë¦¬

**ì±…ì˜ ìƒ‰ì¸ê³¼ ìœ ì‚¬í•œ êµ¬ì¡°:**
```
ì±… (ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”):
- 1,000í˜ì´ì§€ì˜ ë‚´ìš©
- ìˆœì„œëŒ€ë¡œ ì½ìœ¼ë©´ ëª¨ë“  í˜ì´ì§€ë¥¼ í™•ì¸í•´ì•¼ í•¨

ìƒ‰ì¸ (ì¸ë±ìŠ¤):
- ì£¼ì œë³„ë¡œ ì •ë ¬ëœ ëª©ë¡
- ê° í•­ëª©ì€ í•´ë‹¹ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ê°€ë¦¬í‚´
- ì›í•˜ëŠ” ì£¼ì œë¥¼ ìƒ‰ì¸ì—ì„œ ì°¾ìœ¼ë©´ ì¦‰ì‹œ í˜ì´ì§€ë¡œ ì´ë™

ì˜ˆì‹œ:
"ë°ì´í„°ë² ì´ìŠ¤"ë¥¼ ì°¾ê³  ì‹¶ì„ ë•Œ
1. ìƒ‰ì¸ì—ì„œ "ë°ì´í„°ë² ì´ìŠ¤" ê²€ìƒ‰ â†’ "p.234"
2. 234í˜ì´ì§€ë¡œ ë°”ë¡œ ì´ë™

ì¸ë±ìŠ¤ ì—†ì´: 1,000í˜ì´ì§€ë¥¼ ìˆœì„œëŒ€ë¡œ í™•ì¸
ì¸ë±ìŠ¤ ì‚¬ìš©: ìƒ‰ì¸ì—ì„œ ì°¾ê³  í•´ë‹¹ í˜ì´ì§€ë¡œ ë°”ë¡œ ì´ë™
```

#### ì¸ë±ìŠ¤ì˜ íŠ¸ë ˆì´ë“œì˜¤í”„

**ì¥ì :**
```
1. ê²€ìƒ‰ ì†ë„ í–¥ìƒ
   - ì „ì²´ ìŠ¤ìº” ëŒ€ì‹  ì¸ë±ìŠ¤ íƒìƒ‰
   - O(n) â†’ O(log n) ë³µì¡ë„

2. ì •ë ¬ ì„±ëŠ¥ í–¥ìƒ
   - ORDER BY ì ˆì˜ ì„±ëŠ¥ ê°œì„ 
   - ì´ë¯¸ ì •ë ¬ëœ êµ¬ì¡° í™œìš©

3. ì¡°ì¸ ì„±ëŠ¥ í–¥ìƒ
   - ì¡°ì¸ í‚¤ì— ì¸ë±ìŠ¤ê°€ ìˆìœ¼ë©´ ë¹ ë¥¸ ë§¤ì¹­
   - Nested Loop Join ìµœì í™”
```

**ë‹¨ì :**
```
1. ì €ì¥ ê³µê°„ ì¦ê°€
   - ì¸ë±ìŠ¤ ìì²´ê°€ ë””ìŠ¤í¬ ê³µê°„ ì°¨ì§€
   - í…Œì´ë¸” í¬ê¸°ì˜ 10-20% ì¶”ê°€ ê³µê°„ í•„ìš”

2. ì“°ê¸° ì„±ëŠ¥ ì €í•˜
   - INSERT: ë°ì´í„° + ì¸ë±ìŠ¤ ëª¨ë‘ ì¶”ê°€
   - UPDATE: ì¸ë±ìŠ¤ í‚¤ ë³€ê²½ ì‹œ ì¬ì •ë ¬
   - DELETE: ì¸ë±ìŠ¤ì—ì„œë„ ì œê±°

3. ìœ ì§€ë³´ìˆ˜ ë¹„ìš©
   - ì¸ë±ìŠ¤ ì¡°ê°í™” ê´€ë¦¬
   - í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸
   - ë¶ˆí•„ìš”í•œ ì¸ë±ìŠ¤ ì‹ë³„ ë° ì œê±°
```

**ì½ê¸° vs ì“°ê¸° ë¹„ìœ¨ì— ë”°ë¥¸ ê²°ì •:**
```
ì½ê¸° ìœ„ì£¼ ì‹œìŠ¤í…œ (ì½ê¸° 90% : ì“°ê¸° 10%):
â†’ ì¸ë±ìŠ¤ë¥¼ ì ê·¹ì ìœ¼ë¡œ í™œìš©
â†’ ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ ì´ë“ > ì“°ê¸° ì„±ëŠ¥ ì €í•˜ ì†ì‹¤

ì“°ê¸° ìœ„ì£¼ ì‹œìŠ¤í…œ (ì½ê¸° 20% : ì“°ê¸° 80%):
â†’ ìµœì†Œí•œì˜ í•„ìˆ˜ ì¸ë±ìŠ¤ë§Œ ìœ ì§€
â†’ ì“°ê¸° ì„±ëŠ¥ ìš°ì„ 

ê· í˜• ì¡íŒ ì‹œìŠ¤í…œ (ì½ê¸° 50% : ì“°ê¸° 50%):
â†’ ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ì—ë§Œ ì¸ë±ìŠ¤ ìƒì„±
â†’ ì •ê¸°ì ì¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ í•„ìš”
```

### ì¸ë±ìŠ¤ë¥¼ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?

#### ì¸ë±ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš°

```
1. WHERE ì ˆì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ì»¬ëŸ¼
   SELECT * FROM orders WHERE user_id = 123;
   â†’ user_idì— ì¸ë±ìŠ¤ í•„ìˆ˜

2. JOINì˜ í‚¤ ì»¬ëŸ¼
   SELECT * FROM orders o JOIN users u ON o.user_id = u.id;
   â†’ ì–‘ìª½ ì¡°ì¸ í‚¤ì— ì¸ë±ìŠ¤ í•„ìš”

3. ORDER BY ì ˆì˜ ì»¬ëŸ¼
   SELECT * FROM products ORDER BY created_at DESC LIMIT 10;
   â†’ created_atì— ì¸ë±ìŠ¤ ìˆìœ¼ë©´ ì •ë ¬ ìƒëµ

4. GROUP BY ì ˆì˜ ì»¬ëŸ¼
   SELECT category, COUNT(*) FROM products GROUP BY category;
   â†’ categoryì— ì¸ë±ìŠ¤ ìˆìœ¼ë©´ íš¨ìœ¨ì 

5. ì„ íƒë„ê°€ ë†’ì€ ì»¬ëŸ¼ (ìœ ì¼í•œ ê°’ì´ ë§ìŒ)
   - ì´ë©”ì¼ (ê±°ì˜ ëª¨ë‘ ìœ ì¼)
   - ì£¼ë¬¸ ë²ˆí˜¸ (ìœ ì¼)
   - ì‚¬ìš©ì ID (ìœ ì¼)
```

#### ì¸ë±ìŠ¤ê°€ ë¶ˆí•„ìš”í•œ ê²½ìš°

```
1. ì„ íƒë„ê°€ ë‚®ì€ ì»¬ëŸ¼ (ë°˜ë³µë˜ëŠ” ê°’ì´ ë§ìŒ)
   - ì„±ë³„ (ë‚¨/ì—¬ 2ê°€ì§€)
   - ìƒíƒœ (í™œì„±/ë¹„í™œì„± 2ê°€ì§€)
   - ë¶ˆë¦° ê°’ (true/false)
   
   ì˜ˆì™¸: í•œ ìª½ ê°’ì˜ ë¹„ìœ¨ì´ ë§¤ìš° ë‚®ìœ¼ë©´ ë¶€ë¶„ ì¸ë±ìŠ¤ ê³ ë ¤
   
2. ì‘ì€ í…Œì´ë¸” (ìˆ˜ì²œ ê±´ ì´í•˜)
   - ì „ì²´ ìŠ¤ìº”ì´ ë” ë¹ ë¥¼ ìˆ˜ ìˆìŒ
   - ì¸ë±ìŠ¤ íƒìƒ‰ ì˜¤ë²„í—¤ë“œê°€ ë” í´ ìˆ˜ ìˆìŒ

3. ìì£¼ ë³€ê²½ë˜ëŠ” ì»¬ëŸ¼
   - ì“°ê¸° ì„±ëŠ¥ ì €í•˜ê°€ í¬ê²Œ ë‚˜íƒ€ë‚¨
   - ì¸ë±ìŠ¤ ì¬êµ¬ì„± ë¹„ìš© ì¦ê°€

4. í…Œì´ë¸”ì˜ ìƒë‹¹ ë¶€ë¶„ì„ ì¡°íšŒí•˜ëŠ” ê²½ìš°
   - ì „ì²´ì˜ 20% ì´ìƒ ì¡°íšŒ ì‹œ ì „ì²´ ìŠ¤ìº”ì´ ë” íš¨ìœ¨ì 
   - ì¸ë±ìŠ¤ + í…Œì´ë¸” ì ‘ê·¼ì´ 2ë°°ì˜ I/O ë°œìƒ
```

### ì¸ë±ìŠ¤ ì„¤ê³„ ì›ì¹™

#### 1. ì„ íƒë„ (Selectivity)

```
ì„ íƒë„ = ê³ ìœ í•œ ê°’ì˜ ìˆ˜ / ì „ì²´ í–‰ ìˆ˜

ë†’ì€ ì„ íƒë„ (ì¢‹ì€ ì¸ë±ìŠ¤):
- ì´ë©”ì¼: 100ë§Œ ê°œ / 100ë§Œ í–‰ = 1.0 (100%)
- ì£¼ë¬¸ ë²ˆí˜¸: 500ë§Œ ê°œ / 500ë§Œ í–‰ = 1.0 (100%)

ë‚®ì€ ì„ íƒë„ (ë‚˜ìœ ì¸ë±ìŠ¤):
- ì„±ë³„: 2ê°œ / 100ë§Œ í–‰ = 0.000002 (0.0002%)
- ìƒíƒœ: 5ê°œ / 100ë§Œ í–‰ = 0.000005 (0.0005%)

ê¶Œì¥ ì‚¬í•­:
- ì„ íƒë„ > 0.1 (10%): ì¸ë±ìŠ¤ íš¨ê³¼ì 
- ì„ íƒë„ < 0.01 (1%): ì¸ë±ìŠ¤ íš¨ê³¼ ë¯¸ë¯¸
```

#### 2. ì¹´ë””ë„ë¦¬í‹° (Cardinality)

```
ì¹´ë””ë„ë¦¬í‹° = ì»¬ëŸ¼ì˜ ê³ ìœ í•œ ê°’ ê°œìˆ˜

ë†’ì€ ì¹´ë””ë„ë¦¬í‹° (ì¸ë±ìŠ¤ ì í•©):
- ì‚¬ìš©ì ID: 1,000,000 (ê° ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ )
- ì´ë©”ì¼: 1,000,000 (ê° ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ )
- ì£¼ë¬¸ ë²ˆí˜¸: 5,000,000 (ê° ì£¼ë¬¸ë§ˆë‹¤ ê³ ìœ )

ë‚®ì€ ì¹´ë””ë„ë¦¬í‹° (ì¸ë±ìŠ¤ ë¶€ì í•©):
- ì„±ë³„: 2 (ë‚¨/ì—¬)
- êµ­ê°€: 200 (ì „ ì„¸ê³„ êµ­ê°€ ìˆ˜)
- ìƒíƒœ: 5 (ëŒ€ê¸°/ì§„í–‰/ì™„ë£Œ/ì·¨ì†Œ/ì‹¤íŒ¨)

ë³µí•© ì¸ë±ìŠ¤ ìˆœì„œ ê²°ì •:
ë†’ì€ ì¹´ë””ë„ë¦¬í‹° ì»¬ëŸ¼ì„ ì•ì— ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ìœ¼ë¡œ íš¨ê³¼ì 
```

#### 3. ë³µí•© ì¸ë±ìŠ¤ ì»¬ëŸ¼ ìˆœì„œ

```
ì¿¼ë¦¬: SELECT * FROM orders WHERE user_id = 123 AND status = 'completed';

ì˜µì…˜ 1: INDEX(user_id, status)
- user_idë¡œ ë¨¼ì € í•„í„°ë§ (ì‚¬ìš©ìì˜ ëª¨ë“  ì£¼ë¬¸)
- ê·¸ ì¤‘ì—ì„œ statusë¡œ í•„í„°ë§ (ì™„ë£Œëœ ì£¼ë¬¸ë§Œ)
- íš¨ìœ¨ì : user_idëŠ” ê³ ìœ ë„ê°€ ë†’ìŒ

ì˜µì…˜ 2: INDEX(status, user_id)
- statusë¡œ ë¨¼ì € í•„í„°ë§ (ëª¨ë“  ì™„ë£Œ ì£¼ë¬¸)
- ê·¸ ì¤‘ì—ì„œ user_idë¡œ í•„í„°ë§ (í•´ë‹¹ ì‚¬ìš©ìì˜ ê²ƒë§Œ)
- ë¹„íš¨ìœ¨ì : statusëŠ” ê³ ìœ ë„ê°€ ë‚®ìŒ

ì¼ë°˜ ê·œì¹™:
1. ë“±í˜¸(=) ì¡°ê±´ì´ ìˆëŠ” ì»¬ëŸ¼ì„ ì•ì—
2. ì„ íƒë„ê°€ ë†’ì€ ì»¬ëŸ¼ì„ ì•ì—
3. ë²”ìœ„ ì¡°ê±´(<, >, BETWEEN)ì€ ë’¤ì—
```

### 1. ì¸ë±ìŠ¤ ì¢…ë¥˜ ë° íŠ¹ì„±

#### B-Tree ì¸ë±ìŠ¤
```sql
-- ë‹¨ì¼ ì»¬ëŸ¼ ì¸ë±ìŠ¤
CREATE INDEX idx_email ON users(email);

-- ë³µí•© ì¸ë±ìŠ¤
CREATE INDEX idx_user_status ON users(status, created_at);

-- ë¶€ë¶„ ì¸ë±ìŠ¤ (PostgreSQL)
CREATE INDEX idx_active_users ON users(email) WHERE status = 'active';

-- í•¨ìˆ˜ ê¸°ë°˜ ì¸ë±ìŠ¤
CREATE INDEX idx_lower_email ON users(LOWER(email));
```

#### Hash ì¸ë±ìŠ¤
```sql
-- MySQL Memory ì—”ì§„ì—ì„œ ì‚¬ìš©
CREATE TABLE user_cache (
  id INT PRIMARY KEY,
  data VARCHAR(255)
) ENGINE=MEMORY;

CREATE INDEX idx_hash ON user_cache(id) USING HASH;
```

#### ì „ë¬¸ ê²€ìƒ‰ ì¸ë±ìŠ¤
```sql
-- MySQL Full-Text ì¸ë±ìŠ¤
CREATE FULLTEXT INDEX idx_content ON articles(title, content);

-- ì „ë¬¸ ê²€ìƒ‰ ì¿¼ë¦¬
SELECT * FROM articles 
WHERE MATCH(title, content) AGAINST('database performance' IN NATURAL LANGUAGE MODE);
```

### 2. ì¸ë±ìŠ¤ ì„¤ê³„ ì›ì¹™

#### ì„ íƒë„ ê¸°ë°˜ ì¸ë±ìŠ¤ ì„¤ê³„
```javascript
class IndexDesigner {
  constructor() {
    this.columnStats = new Map();
  }

  // ì»¬ëŸ¼ ì„ íƒë„ ê³„ì‚°
  calculateSelectivity(tableName, columnName) {
    // ì‹¤ì œë¡œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í†µê³„ ì •ë³´ë¥¼ ê°€ì ¸ì˜´
    const totalRows = 1000000;
    const distinctValues = 100000;
    
    return distinctValues / totalRows; // 0.1 (10%)
  }

  // ì¸ë±ìŠ¤ íš¨ìœ¨ì„± í‰ê°€
  evaluateIndexEfficiency(tableName, columns) {
    const selectivities = columns.map(col => 
      this.calculateSelectivity(tableName, col)
    );
    
    // ì„ íƒë„ê°€ ë†’ì„ìˆ˜ë¡ ì¢‹ì€ ì¸ë±ìŠ¤
    const avgSelectivity = selectivities.reduce((a, b) => a + b, 0) / selectivities.length;
    
    return {
      efficiency: avgSelectivity,
      recommendation: avgSelectivity > 0.1 ? 'Good' : 'Poor'
    };
  }

  // ë³µí•© ì¸ë±ìŠ¤ ì»¬ëŸ¼ ìˆœì„œ ê²°ì •
  determineColumnOrder(tableName, columns) {
    // 1. ë“±í˜¸ ì¡°ê±´ì´ ìˆëŠ” ì»¬ëŸ¼ì„ ì•ì— ë°°ì¹˜
    // 2. ì„ íƒë„ê°€ ë†’ì€ ì»¬ëŸ¼ì„ ì•ì— ë°°ì¹˜
    // 3. ë²”ìœ„ ê²€ìƒ‰ì´ ìˆëŠ” ì»¬ëŸ¼ì„ ë’¤ì— ë°°ì¹˜
    
    return columns.sort((a, b) => {
      const selectivityA = this.calculateSelectivity(tableName, a);
      const selectivityB = this.calculateSelectivity(tableName, b);
      return selectivityB - selectivityA; // ë‚´ë¦¼ì°¨ìˆœ
    });
  }
}
```

#### ì¸ë±ìŠ¤ ëª¨ë‹ˆí„°ë§
```sql
-- MySQL ì¸ë±ìŠ¤ ì‚¬ìš© í˜„í™©
SELECT 
  TABLE_NAME,
  INDEX_NAME,
  CARDINALITY,
  INDEX_TYPE,
  COMMENT
FROM information_schema.STATISTICS 
WHERE TABLE_SCHEMA = 'your_database'
ORDER BY TABLE_NAME, INDEX_NAME;

-- PostgreSQL ì¸ë±ìŠ¤ ì‚¬ìš© í˜„í™©
SELECT 
  schemaname,
  tablename,
  indexname,
  idx_scan,
  idx_tup_read,
  idx_tup_fetch
FROM pg_stat_user_indexes
WHERE schemaname = 'public'
ORDER BY idx_scan DESC;

-- ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì¸ë±ìŠ¤ ì°¾ê¸°
SELECT 
  schemaname,
  tablename,
  indexname,
  idx_scan
FROM pg_stat_user_indexes
WHERE idx_scan = 0
ORDER BY tablename;
```

### 3. ì¸ë±ìŠ¤ ìµœì í™” ì „ëµ

#### ì¸ë±ìŠ¤ ì¡°ê°í™” ê´€ë¦¬
```sql
-- MySQL ì¸ë±ìŠ¤ ì¡°ê°í™” í™•ì¸
SELECT 
  TABLE_NAME,
  INDEX_NAME,
  CARDINALITY,
  SUB_PART,
  PACKED,
  NULLABLE,
  INDEX_TYPE
FROM information_schema.STATISTICS 
WHERE TABLE_SCHEMA = 'your_database';

-- ì¸ë±ìŠ¤ ì¬êµ¬ì„±
OPTIMIZE TABLE users;

-- PostgreSQL ì¸ë±ìŠ¤ ì¬êµ¬ì„±
REINDEX INDEX idx_email;
REINDEX TABLE users;
```

#### ì¸ë±ìŠ¤ í†µê³„ ì—…ë°ì´íŠ¸
```sql
-- MySQL í†µê³„ ì—…ë°ì´íŠ¸
ANALYZE TABLE users;

-- PostgreSQL í†µê³„ ì—…ë°ì´íŠ¸
ANALYZE users;

-- íŠ¹ì • ì»¬ëŸ¼ í†µê³„ ì—…ë°ì´íŠ¸
ANALYZE users (email, created_at);
```

---

## ë°ì´í„°ë² ì´ìŠ¤ íŒŒí‹°ì…”ë‹ ë° ìƒ¤ë”©

### 1. íŒŒí‹°ì…”ë‹ ì „ëµ

#### ë²”ìœ„ ê¸°ë°˜ íŒŒí‹°ì…”ë‹
```sql
-- ë‚ ì§œ ê¸°ë°˜ íŒŒí‹°ì…”ë‹
CREATE TABLE user_activities (
    id BIGINT,
    user_id BIGINT,
    activity_type VARCHAR(50),
    created_at TIMESTAMP,
    data JSONB
) PARTITION BY RANGE (created_at);

-- ì›”ë³„ íŒŒí‹°ì…˜ ìƒì„±
CREATE TABLE user_activities_2024_01 PARTITION OF user_activities
    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');

CREATE TABLE user_activities_2024_02 PARTITION OF user_activities
    FOR VALUES FROM ('2024-02-01') TO ('2024-03-01');

-- íŒŒí‹°ì…˜ ìë™ ìƒì„± í•¨ìˆ˜
CREATE OR REPLACE FUNCTION create_monthly_partition(table_name text, start_date date)
RETURNS void AS $$
DECLARE
    partition_name text;
    end_date date;
BEGIN
    partition_name := table_name || '_' || to_char(start_date, 'YYYY_MM');
    end_date := start_date + interval '1 month';
    
    EXECUTE format('CREATE TABLE %I PARTITION OF %I FOR VALUES FROM (%L) TO (%L)',
                   partition_name, table_name, start_date, end_date);
END;
$$ LANGUAGE plpgsql;
```

#### í•´ì‹œ ê¸°ë°˜ íŒŒí‹°ì…”ë‹
```sql
-- ì‚¬ìš©ì ID ê¸°ë°˜ í•´ì‹œ íŒŒí‹°ì…”ë‹
CREATE TABLE users (
    id BIGINT,
    username VARCHAR(50),
    email VARCHAR(100),
    created_at TIMESTAMP
) PARTITION BY HASH (id);

-- 4ê°œ íŒŒí‹°ì…˜ ìƒì„±
CREATE TABLE users_0 PARTITION OF users
    FOR VALUES WITH (modulus 4, remainder 0);

CREATE TABLE users_1 PARTITION OF users
    FOR VALUES WITH (modulus 4, remainder 1);

CREATE TABLE users_2 PARTITION OF users
    FOR VALUES WITH (modulus 4, remainder 2);

CREATE TABLE users_3 PARTITION OF users
    FOR VALUES WITH (modulus 4, remainder 3);
```

### 2. ìƒ¤ë”© êµ¬í˜„

#### ìˆ˜í‰ ìƒ¤ë”©
```javascript
class HorizontalSharding {
  constructor(shardCount) {
    this.shardCount = shardCount;
    this.shards = new Array(shardCount).fill(null).map(() => ({
      connection: null,
      data: new Map()
    }));
  }

  // í•´ì‹œ ê¸°ë°˜ ìƒ¤ë”©
  getShardId(key) {
    const hash = this.hashFunction(key);
    return hash % this.shardCount;
  }

  hashFunction(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      const char = str.charCodeAt(i);
      hash = ((hash << 5) - hash) + char;
      hash = hash & hash;
    }
    return Math.abs(hash);
  }

  async insert(key, value) {
    const shardId = this.getShardId(key);
    const shard = this.shards[shardId];
    
    shard.data.set(key, value);
    console.log(`Inserted ${key} into shard ${shardId}`);
  }

  async get(key) {
    const shardId = this.getShardId(key);
    const shard = this.shards[shardId];
    
    return shard.data.get(key);
  }

  // í¬ë¡œìŠ¤ ìƒ¤ë“œ ì¿¼ë¦¬
  async crossShardQuery(predicate) {
    const results = [];
    
    for (let i = 0; i < this.shardCount; i++) {
      const shard = this.shards[i];
      const shardResults = Array.from(shard.data.values())
        .filter(predicate);
      results.push(...shardResults);
    }
    
    return results;
  }
}
```

#### ìˆ˜ì§ ìƒ¤ë”©
```javascript
class VerticalSharding {
  constructor() {
    this.shards = {
      userProfile: new Map(),    // ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´
      userActivity: new Map(),   // ì‚¬ìš©ì í™œë™ ë¡œê·¸
      userSettings: new Map()    // ì‚¬ìš©ì ì„¤ì •
    };
  }

  async insertUserProfile(userId, profile) {
    this.shards.userProfile.set(userId, profile);
  }

  async insertUserActivity(userId, activity) {
    if (!this.shards.userActivity.has(userId)) {
      this.shards.userActivity.set(userId, []);
    }
    this.shards.userActivity.get(userId).push(activity);
  }

  async insertUserSettings(userId, settings) {
    this.shards.userSettings.set(userId, settings);
  }

  async getUserData(userId) {
    const profile = this.shards.userProfile.get(userId);
    const activities = this.shards.userActivity.get(userId) || [];
    const settings = this.shards.userSettings.get(userId);

    return {
      profile,
      activities,
      settings
    };
  }
}
```

---

## ì—°ê²° í’€ ê´€ë¦¬ ë° ìµœì í™”

### 1. ì—°ê²° í’€ ì„¤ì •

#### Node.js ì—°ê²° í’€ ì„¤ì •
```javascript
const mysql = require('mysql2/promise');

class DatabaseConnectionPool {
  constructor() {
    this.pool = mysql.createPool({
      host: process.env.DB_HOST,
      user: process.env.DB_USER,
      password: process.env.DB_PASSWORD,
      database: process.env.DB_NAME,
      
      // ì—°ê²° í’€ ì„¤ì •
      connectionLimit: 20,           // ìµœëŒ€ ì—°ê²° ìˆ˜
      acquireTimeoutMillis: 5000,    // ì—°ê²° íšë“ íƒ€ì„ì•„ì›ƒ
      timeout: 30000,                // ì¿¼ë¦¬ íƒ€ì„ì•„ì›ƒ
      idleTimeoutMillis: 300000,     // ìœ íœ´ ì—°ê²° íƒ€ì„ì•„ì›ƒ (5ë¶„)
      
      // ì¬ì—°ê²° ì„¤ì •
      reconnect: true,
      maxReconnects: 3,
      reconnectDelay: 1000,
      
      // ì„±ëŠ¥ ì„¤ì •
      multipleStatements: false,
      dateStrings: true,
      supportBigNumbers: true,
      bigNumberStrings: true
    });
    
    this.setupEventHandlers();
  }

  setupEventHandlers() {
    this.pool.on('connection', (connection) => {
      console.log('New connection established:', connection.threadId);
    });

    this.pool.on('acquire', (connection) => {
      console.log('Connection acquired:', connection.threadId);
    });

    this.pool.on('release', (connection) => {
      console.log('Connection released:', connection.threadId);
    });

    this.pool.on('error', (err) => {
      console.error('Pool error:', err);
    });
  }

  async query(sql, params = []) {
    let connection;
    try {
      connection = await this.pool.getConnection();
      const [rows] = await connection.execute(sql, params);
      return rows;
    } catch (error) {
      console.error('Query error:', error);
      throw error;
    } finally {
      if (connection) {
        connection.release();
      }
    }
  }

  async withTransaction(operation) {
    let connection;
    try {
      connection = await this.pool.getConnection();
      await connection.beginTransaction();
      
      const result = await operation(connection);
      
      await connection.commit();
      return result;
    } catch (error) {
      if (connection) {
        await connection.rollback();
      }
      throw error;
    } finally {
      if (connection) {
        connection.release();
      }
    }
  }

  // ì—°ê²° í’€ ìƒíƒœ ëª¨ë‹ˆí„°ë§
  getPoolStatus() {
    return {
      totalConnections: this.pool._allConnections.length,
      freeConnections: this.pool._freeConnections.length,
      queuedRequests: this.pool._connectionQueue.length
    };
  }
}
```

#### PostgreSQL ì—°ê²° í’€ ì„¤ì •
```javascript
const { Pool } = require('pg');

class PostgreSQLConnectionPool {
  constructor() {
    this.pool = new Pool({
      host: process.env.DB_HOST,
      port: process.env.DB_PORT,
      database: process.env.DB_NAME,
      user: process.env.DB_USER,
      password: process.env.DB_PASSWORD,
      
      // ì—°ê²° í’€ ì„¤ì •
      max: 20,                    // ìµœëŒ€ ì—°ê²° ìˆ˜
      min: 5,                     // ìµœì†Œ ì—°ê²° ìˆ˜
      idleTimeoutMillis: 30000,   // ìœ íœ´ ì—°ê²° íƒ€ì„ì•„ì›ƒ
      connectionTimeoutMillis: 5000, // ì—°ê²° íƒ€ì„ì•„ì›ƒ
      
      // ì„±ëŠ¥ ì„¤ì •
      statement_timeout: 30000,   // ì¿¼ë¦¬ íƒ€ì„ì•„ì›ƒ
      query_timeout: 30000,       // ì¿¼ë¦¬ íƒ€ì„ì•„ì›ƒ
      application_name: 'myapp',  // ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„
      
      // SSL ì„¤ì •
      ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
    });
    
    this.setupEventHandlers();
  }

  setupEventHandlers() {
    this.pool.on('connect', (client) => {
      console.log('New client connected');
    });

    this.pool.on('error', (err, client) => {
      console.error('Unexpected error on idle client', err);
    });
  }

  async query(text, params = []) {
    const start = Date.now();
    try {
      const result = await this.pool.query(text, params);
      const duration = Date.now() - start;
      console.log('Query executed', { text, duration, rows: result.rowCount });
      return result;
    } catch (error) {
      console.error('Query error:', error);
      throw error;
    }
  }
}
```

### 2. ì—°ê²° í’€ ìµœì í™”

#### ë™ì  ì—°ê²° í’€ í¬ê¸° ì¡°ì •
```javascript
class AdaptiveConnectionPool {
  constructor() {
    this.pool = null;
    this.metrics = {
      activeConnections: 0,
      queuedRequests: 0,
      avgResponseTime: 0,
      errorRate: 0
    };
    
    this.startMonitoring();
  }

  startMonitoring() {
    setInterval(() => {
      this.adjustPoolSize();
    }, 60000); // 1ë¶„ë§ˆë‹¤
  }

  adjustPoolSize() {
    const { activeConnections, queuedRequests, avgResponseTime, errorRate } = this.metrics;
    
    // íì— ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ì´ ë§ìœ¼ë©´ ì—°ê²° ìˆ˜ ì¦ê°€
    if (queuedRequests > 10) {
      this.increasePoolSize();
    }
    
    // í‰ê·  ì‘ë‹µ ì‹œê°„ì´ ê¸¸ë©´ ì—°ê²° ìˆ˜ ì¦ê°€
    if (avgResponseTime > 1000) {
      this.increasePoolSize();
    }
    
    // ì—ëŸ¬ìœ¨ì´ ë†’ìœ¼ë©´ ì—°ê²° ìˆ˜ ê°ì†Œ
    if (errorRate > 0.05) {
      this.decreasePoolSize();
    }
    
    // ìœ íœ´ ì—°ê²°ì´ ë§ìœ¼ë©´ ì—°ê²° ìˆ˜ ê°ì†Œ
    if (activeConnections < this.pool.options.connectionLimit * 0.3) {
      this.decreasePoolSize();
    }
  }

  increasePoolSize() {
    const currentLimit = this.pool.options.connectionLimit;
    const newLimit = Math.min(currentLimit + 5, 50); // ìµœëŒ€ 50ê°œ
    
    if (newLimit > currentLimit) {
      this.pool.options.connectionLimit = newLimit;
      console.log(`Pool size increased to ${newLimit}`);
    }
  }

  decreasePoolSize() {
    const currentLimit = this.pool.options.connectionLimit;
    const newLimit = Math.max(currentLimit - 2, 5); // ìµœì†Œ 5ê°œ
    
    if (newLimit < currentLimit) {
      this.pool.options.connectionLimit = newLimit;
      console.log(`Pool size decreased to ${newLimit}`);
    }
  }
}
```

#### ì—°ê²° í’€ ëª¨ë‹ˆí„°ë§
```javascript
class ConnectionPoolMonitor {
  constructor(pool) {
    this.pool = pool;
    this.metrics = {
      totalConnections: 0,
      activeConnections: 0,
      idleConnections: 0,
      queuedRequests: 0,
      totalQueries: 0,
      failedQueries: 0,
      avgQueryTime: 0
    };
    
    this.startMonitoring();
  }

  startMonitoring() {
    setInterval(() => {
      this.collectMetrics();
      this.logMetrics();
    }, 10000); // 10ì´ˆë§ˆë‹¤
  }

  collectMetrics() {
    this.metrics.totalConnections = this.pool._allConnections.length;
    this.metrics.activeConnections = this.pool._allConnections.filter(c => c._inUse).length;
    this.metrics.idleConnections = this.pool._freeConnections.length;
    this.metrics.queuedRequests = this.pool._connectionQueue.length;
  }

  logMetrics() {
    console.log('Connection Pool Metrics:', {
      total: this.metrics.totalConnections,
      active: this.metrics.activeConnections,
      idle: this.metrics.idleConnections,
      queued: this.metrics.queuedRequests,
      utilization: (this.metrics.activeConnections / this.metrics.totalConnections * 100).toFixed(2) + '%'
    });
  }

  // ì•Œë¦¼ ì„¤ì •
  checkThresholds() {
    const utilization = this.metrics.activeConnections / this.metrics.totalConnections;
    
    if (utilization > 0.8) {
      console.warn('High connection pool utilization:', utilization);
    }
    
    if (this.metrics.queuedRequests > 20) {
      console.warn('High queued requests:', this.metrics.queuedRequests);
    }
  }
}
```

---

## ì‹¤ì œ ì„±ëŠ¥ íŠœë‹ ì‚¬ë¡€ ë° ë²¤ì¹˜ë§ˆí‚¹

### 1. ì„±ëŠ¥ íŠœë‹ ì‚¬ë¡€

#### ì‚¬ë¡€ 1: ëŠë¦° ì‚¬ìš©ì ê²€ìƒ‰ ì¿¼ë¦¬ ìµœì í™”
```sql
-- âŒ ìµœì í™” ì „ (2.5ì´ˆ)
SELECT u.*, p.name as profile_name 
FROM users u 
LEFT JOIN profiles p ON u.id = p.user_id 
WHERE u.email LIKE '%@gmail.com' 
ORDER BY u.created_at DESC 
LIMIT 20;

-- âœ… ìµœì í™” í›„ (0.1ì´ˆ)
-- 1. ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_created_at ON users(created_at);

-- 2. ì¿¼ë¦¬ ìµœì í™”
SELECT u.id, u.email, u.created_at, p.name as profile_name
FROM users u 
LEFT JOIN profiles p ON u.id = p.user_id 
WHERE u.email LIKE 'user%@gmail.com'  -- ì•ìª½ ì™€ì¼ë“œì¹´ë“œ ì œê±°
ORDER BY u.created_at DESC 
LIMIT 20;
```

#### ì‚¬ë¡€ 2: ëŒ€ëŸ‰ ë°ì´í„° ì‚½ì… ìµœì í™”
```javascript
// âŒ ìµœì í™” ì „ (1000ê°œ ì‚½ì…ì— 10ì´ˆ)
async function insertUsersSlow(users) {
  for (const user of users) {
    await db.query('INSERT INTO users (name, email) VALUES (?, ?)', [user.name, user.email]);
  }
}

// âœ… ìµœì í™” í›„ (1000ê°œ ì‚½ì…ì— 0.5ì´ˆ)
async function insertUsersFast(users) {
  const values = users.map(user => [user.name, user.email]);
  const placeholders = users.map(() => '(?, ?)').join(', ');
  
  await db.query(`INSERT INTO users (name, email) VALUES ${placeholders}`, values.flat());
}

// âœ… ë°°ì¹˜ ì‚½ì… ìµœì í™”
async function insertUsersBatch(users, batchSize = 1000) {
  for (let i = 0; i < users.length; i += batchSize) {
    const batch = users.slice(i, i + batchSize);
    await insertUsersFast(batch);
  }
}
```

#### ì‚¬ë¡€ 3: ë³µì¡í•œ ì¡°ì¸ ì¿¼ë¦¬ ìµœì í™”
```sql
-- âŒ ìµœì í™” ì „ (5ì´ˆ)
SELECT u.name, u.email, COUNT(o.id) as order_count, SUM(o.total) as total_spent
FROM users u
LEFT JOIN orders o ON u.id = o.user_id
LEFT JOIN order_items oi ON o.id = oi.order_id
WHERE u.created_at > '2024-01-01'
GROUP BY u.id, u.name, u.email
HAVING COUNT(o.id) > 5
ORDER BY total_spent DESC
LIMIT 100;

-- âœ… ìµœì í™” í›„ (0.3ì´ˆ)
-- 1. ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_users_created_at ON users(created_at);
CREATE INDEX idx_orders_user_id ON orders(user_id);
CREATE INDEX idx_orders_total ON orders(total);

-- 2. ì¿¼ë¦¬ ìµœì í™” (ì„œë¸Œì¿¼ë¦¬ í™œìš©)
SELECT u.name, u.email, o.order_count, o.total_spent
FROM users u
JOIN (
  SELECT user_id, COUNT(*) as order_count, SUM(total) as total_spent
  FROM orders
  WHERE created_at > '2024-01-01'
  GROUP BY user_id
  HAVING COUNT(*) > 5
) o ON u.id = o.user_id
WHERE u.created_at > '2024-01-01'
ORDER BY o.total_spent DESC
LIMIT 100;
```

### 2. ë²¤ì¹˜ë§ˆí‚¹ ë„êµ¬

#### ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí‚¹ í´ë˜ìŠ¤
```javascript
class DatabaseBenchmark {
  constructor() {
    this.results = [];
    this.metrics = {
      totalQueries: 0,
      totalTime: 0,
      avgTime: 0,
      minTime: Infinity,
      maxTime: 0,
      errorCount: 0
    };
  }

  // ë‹¨ì¼ ì¿¼ë¦¬ ë²¤ì¹˜ë§ˆí¬
  async benchmarkQuery(name, query, params = [], iterations = 100) {
    console.log(`Benchmarking: ${name}`);
    
    const times = [];
    let errors = 0;
    
    for (let i = 0; i < iterations; i++) {
      const start = process.hrtime.bigint();
      
      try {
        await this.executeQuery(query, params);
        const end = process.hrtime.bigint();
        const duration = Number(end - start) / 1000000; // ms
        times.push(duration);
      } catch (error) {
        errors++;
        console.error(`Query error: ${error.message}`);
      }
    }
    
    const result = this.calculateStats(times, errors, iterations);
    this.results.push({ name, ...result });
    
    console.log(`Results for ${name}:`, result);
    return result;
  }

  // ë™ì‹œì„± ë²¤ì¹˜ë§ˆí¬
  async benchmarkConcurrency(name, query, params = [], concurrency = 10, duration = 10000) {
    console.log(`Concurrency benchmark: ${name}`);
    
    const startTime = Date.now();
    const results = [];
    const promises = [];
    
    for (let i = 0; i < concurrency; i++) {
      promises.push(this.runConcurrentQueries(query, params, startTime, duration));
    }
    
    const allResults = await Promise.all(promises);
    const combinedResults = allResults.flat();
    
    const result = this.calculateStats(combinedResults, 0, combinedResults.length);
    this.results.push({ name: `${name}_concurrent`, ...result });
    
    console.log(`Concurrency results for ${name}:`, result);
    return result;
  }

  async runConcurrentQueries(query, params, startTime, duration) {
    const results = [];
    
    while (Date.now() - startTime < duration) {
      const start = process.hrtime.bigint();
      
      try {
        await this.executeQuery(query, params);
        const end = process.hrtime.bigint();
        const queryTime = Number(end - start) / 1000000;
        results.push(queryTime);
      } catch (error) {
        // ì—ëŸ¬ëŠ” ë¬´ì‹œí•˜ê³  ê³„ì†
      }
    }
    
    return results;
  }

  calculateStats(times, errors, total) {
    if (times.length === 0) {
      return {
        avgTime: 0,
        minTime: 0,
        maxTime: 0,
        p95Time: 0,
        p99Time: 0,
        errorRate: errors / total,
        throughput: 0
      };
    }
    
    const sortedTimes = times.sort((a, b) => a - b);
    const avgTime = times.reduce((a, b) => a + b, 0) / times.length;
    const minTime = Math.min(...times);
    const maxTime = Math.max(...times);
    const p95Time = sortedTimes[Math.floor(sortedTimes.length * 0.95)];
    const p99Time = sortedTimes[Math.floor(sortedTimes.length * 0.99)];
    const errorRate = errors / total;
    const throughput = times.length / (times.reduce((a, b) => a + b, 0) / 1000); // queries per second
    
    return {
      avgTime: Math.round(avgTime * 100) / 100,
      minTime: Math.round(minTime * 100) / 100,
      maxTime: Math.round(maxTime * 100) / 100,
      p95Time: Math.round(p95Time * 100) / 100,
      p99Time: Math.round(p99Time * 100) / 100,
      errorRate: Math.round(errorRate * 10000) / 100, // percentage
      throughput: Math.round(throughput * 100) / 100
    };
  }

  // ê²°ê³¼ ë¹„êµ
  compareResults() {
    console.log('\n=== Benchmark Results Comparison ===');
    
    this.results.forEach(result => {
      console.log(`\n${result.name}:`);
      console.log(`  Average Time: ${result.avgTime}ms`);
      console.log(`  Min Time: ${result.minTime}ms`);
      console.log(`  Max Time: ${result.maxTime}ms`);
      console.log(`  95th Percentile: ${result.p95Time}ms`);
      console.log(`  99th Percentile: ${result.p99Time}ms`);
      console.log(`  Error Rate: ${result.errorRate}%`);
      console.log(`  Throughput: ${result.throughput} queries/sec`);
    });
  }

  async executeQuery(query, params) {
    // ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹¤í–‰
    // ì´ ë¶€ë¶„ì€ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ë§ê²Œ êµ¬í˜„
    throw new Error('executeQuery method must be implemented');
  }
}
```

#### ì‹¤ì œ ë²¤ì¹˜ë§ˆí‚¹ ì˜ˆì‹œ
```javascript
// ë²¤ì¹˜ë§ˆí‚¹ ì‹¤í–‰ ì˜ˆì‹œ
async function runBenchmarks() {
  const benchmark = new DatabaseBenchmark();
  
  // ë‹¨ì¼ ì¿¼ë¦¬ ë²¤ì¹˜ë§ˆí¬
  await benchmark.benchmarkQuery(
    'Simple SELECT',
    'SELECT * FROM users WHERE id = ?',
    [1],
    1000
  );
  
  await benchmark.benchmarkQuery(
    'Complex JOIN',
    `SELECT u.name, COUNT(o.id) as order_count 
     FROM users u 
     LEFT JOIN orders o ON u.id = o.user_id 
     GROUP BY u.id, u.name 
     LIMIT 100`,
    [],
    100
  );
  
  // ë™ì‹œì„± ë²¤ì¹˜ë§ˆí¬
  await benchmark.benchmarkConcurrency(
    'Concurrent SELECT',
    'SELECT * FROM users WHERE email = ?',
    ['test@example.com'],
    20,
    10000
  );
  
  // ê²°ê³¼ ë¹„êµ
  benchmark.compareResults();
}

runBenchmarks().catch(console.error);
```

### 3. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

```javascript
class PerformanceDashboard {
  constructor() {
    this.metrics = {
      queries: [],
      connections: [],
      errors: []
    };
    
    this.startMonitoring();
  }

  startMonitoring() {
    setInterval(() => {
      this.collectMetrics();
      this.updateDashboard();
    }, 5000); // 5ì´ˆë§ˆë‹¤
  }

  collectMetrics() {
    // ì¿¼ë¦¬ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
    const queryMetrics = {
      timestamp: new Date(),
      avgResponseTime: this.getAverageResponseTime(),
      totalQueries: this.getTotalQueries(),
      slowQueries: this.getSlowQueries(),
      errorRate: this.getErrorRate()
    };
    
    this.metrics.queries.push(queryMetrics);
    
    // ì—°ê²° í’€ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
    const connectionMetrics = {
      timestamp: new Date(),
      activeConnections: this.getActiveConnections(),
      idleConnections: this.getIdleConnections(),
      queuedRequests: this.getQueuedRequests()
    };
    
    this.metrics.connections.push(connectionMetrics);
  }

  updateDashboard() {
    console.log('\n=== Performance Dashboard ===');
    console.log(`Time: ${new Date().toLocaleTimeString()}`);
    
    const latestQuery = this.metrics.queries[this.metrics.queries.length - 1];
    const latestConnection = this.metrics.connections[this.metrics.connections.length - 1];
    
    console.log('\nQuery Performance:');
    console.log(`  Average Response Time: ${latestQuery.avgResponseTime}ms`);
    console.log(`  Total Queries: ${latestQuery.totalQueries}`);
    console.log(`  Slow Queries: ${latestQuery.slowQueries}`);
    console.log(`  Error Rate: ${latestQuery.errorRate}%`);
    
    console.log('\nConnection Pool:');
    console.log(`  Active Connections: ${latestConnection.activeConnections}`);
    console.log(`  Idle Connections: ${latestConnection.idleConnections}`);
    console.log(`  Queued Requests: ${latestConnection.queuedRequests}`);
    
    // ì•Œë¦¼ ì²´í¬
    this.checkAlerts(latestQuery, latestConnection);
  }

  checkAlerts(queryMetrics, connectionMetrics) {
    if (queryMetrics.avgResponseTime > 1000) {
      console.warn('âš ï¸  High average response time detected!');
    }
    
    if (queryMetrics.errorRate > 5) {
      console.warn('âš ï¸  High error rate detected!');
    }
    
    if (connectionMetrics.queuedRequests > 20) {
      console.warn('âš ï¸  High queued requests detected!');
    }
  }

  // ì‹¤ì œ êµ¬í˜„ì€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— ë§ê²Œ ìˆ˜ì •
  getAverageResponseTime() { return Math.random() * 100; }
  getTotalQueries() { return Math.floor(Math.random() * 1000); }
  getSlowQueries() { return Math.floor(Math.random() * 10); }
  getErrorRate() { return Math.random() * 2; }
  getActiveConnections() { return Math.floor(Math.random() * 20); }
  getIdleConnections() { return Math.floor(Math.random() * 10); }
  getQueuedRequests() { return Math.floor(Math.random() * 5); }
}
```

---

## ê²°ë¡ 

ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ íŠœë‹ì€ ì‹œìŠ¤í…œì˜ ì „ë°˜ì ì¸ ì„±ëŠ¥ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì¤‘ìš”í•œ ì‘ì—…ì…ë‹ˆë‹¤.

### í•µì‹¬ ì›ì¹™ ìš”ì•½

1. **ì¿¼ë¦¬ ìµœì í™”**: ì‹¤í–‰ ê³„íš ë¶„ì„ì„ í†µí•œ íš¨ìœ¨ì ì¸ ì¿¼ë¦¬ ì‘ì„±
2. **ì¸ë±ìŠ¤ ì„¤ê³„**: ì„ íƒë„ ê¸°ë°˜ì˜ ì ì ˆí•œ ì¸ë±ìŠ¤ ì„¤ê³„ ë° ê´€ë¦¬
3. **íŒŒí‹°ì…”ë‹/ìƒ¤ë”©**: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë¶„ì‚° ì „ëµ
4. **ì—°ê²° í’€ ìµœì í™”**: íš¨ìœ¨ì ì¸ ì—°ê²° ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§
5. **ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§**: ì„±ëŠ¥ ì§€í‘œ ì¶”ì  ë° ìµœì í™”

### ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ

- **ê°œë°œ ë‹¨ê³„**: ì¿¼ë¦¬ ìµœì í™” ë° ì¸ë±ìŠ¤ ì„¤ê³„ì— ì§‘ì¤‘
- **í…ŒìŠ¤íŠ¸ ë‹¨ê³„**: ë²¤ì¹˜ë§ˆí‚¹ì„ í†µí•œ ì„±ëŠ¥ ê²€ì¦
- **ìš´ì˜ ë‹¨ê³„**: ëª¨ë‹ˆí„°ë§ ë° ì§€ì†ì ì¸ íŠœë‹

ì´ëŸ¬í•œ ì›ì¹™ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ì„ ìµœì í™”í•˜ì—¬ ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì„¸ìš”.

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ

**MySQL**
- [MySQL 8.0 Reference Manual](https://dev.mysql.com/doc/refman/8.0/en/) - MySQL ê³µì‹ ë¬¸ì„œ
- [MySQL Performance Schema](https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html) - ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [MySQL Optimization Guide](https://dev.mysql.com/doc/refman/8.0/en/optimization.html) - ìµœì í™” ê°€ì´ë“œ

**PostgreSQL**
- [PostgreSQL Documentation](https://www.postgresql.org/docs/) - PostgreSQL ê³µì‹ ë¬¸ì„œ
- [Query Planning](https://www.postgresql.org/docs/current/planner-optimizer.html) - ì¿¼ë¦¬ ê³„íš ë° ì˜µí‹°ë§ˆì´ì €
- [Performance Tips](https://www.postgresql.org/docs/current/performance-tips.html) - ì„±ëŠ¥ ìµœì í™” íŒ

**MariaDB**
- [MariaDB Knowledge Base](https://mariadb.com/kb/en/) - MariaDB ë¬¸ì„œ
- [Optimization and Tuning](https://mariadb.com/kb/en/optimization-and-tuning/) - ìµœì í™” ê°€ì´ë“œ

### ì„œì 

**ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ìµœì í™”**
- **"High Performance MySQL"** (Baron Schwartz ì™¸)
  - MySQL ì„±ëŠ¥ ìµœì í™”ì˜ ë°”ì´ë¸”
  - ì‹¤ì „ íŠœë‹ ì‚¬ë¡€ ë° ë²¤ì¹˜ë§ˆí‚¹
  - [O'Reilly](https://www.oreilly.com/library/view/high-performance-mysql/9781492080503/)

- **"Database Internals"** (Alex Petrov)
  - ë°ì´í„°ë² ì´ìŠ¤ ë‚´ë¶€ ë™ì‘ ì›ë¦¬
  - ìŠ¤í† ë¦¬ì§€ ì—”ì§„, ì¸ë±ì‹±, íŠ¸ëœì­ì…˜
  - [O'Reilly](https://www.databass.dev/)

- **"SQL Performance Explained"** (Markus Winand)
  - ì‹¤í–‰ ê³„íš ë¶„ì„ ë° ì¸ë±ìŠ¤ ìµœì í™”
  - ë°ì´í„°ë² ì´ìŠ¤ ë…ë¦½ì ì¸ SQL íŠœë‹
  - [SQL Performance Explained](https://sql-performance-explained.com/)

**ì‹œìŠ¤í…œ ì„¤ê³„ ë° ì•„í‚¤í…ì²˜**
- **"Designing Data-Intensive Applications"** (Martin Kleppmann)
  - ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œìŠ¤í…œ ì„¤ê³„
  - ë³µì œ, íŒŒí‹°ì…”ë‹, íŠ¸ëœì­ì…˜
  - [O'Reilly](https://dataintensive.net/)

- **"Database Reliability Engineering"** (Laine Campbell, Charity Majors)
  - ë°ì´í„°ë² ì´ìŠ¤ ìš´ì˜ ë° ëª¨ë‹ˆí„°ë§
  - SRE ê´€ì ì˜ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
  - [O'Reilly](https://www.oreilly.com/library/view/database-reliability-engineering/9781491925935/)

### ì˜¨ë¼ì¸ ë¦¬ì†ŒìŠ¤

**í•™ìŠµ ìë£Œ**
- [Use The Index, Luke!](https://use-the-index-luke.com/) - ì¸ë±ìŠ¤ í™œìš©ë²• ìƒì„¸ ê°€ì´ë“œ
- [PostgreSQL Performance Tuning](https://www.percona.com/blog/) - Percona ë¸”ë¡œê·¸
- [MySQL Performance Blog](https://www.percona.com/blog/category/mysql/) - MySQL ì„±ëŠ¥ ìµœì í™”
- [DB Weekly](https://dbweekly.com/) - ë°ì´í„°ë² ì´ìŠ¤ ë‰´ìŠ¤ë ˆí„°

**ì‹¤í–‰ ê³„íš ì‹œê°í™”**
- [PostgreSQL EXPLAIN Visualizer](https://explain.dalibo.com/) - ì‹¤í–‰ ê³„íš ì‹œê°í™” ë„êµ¬
- [MySQL Visual Explain](https://dev.mysql.com/doc/workbench/en/wb-performance-explain.html) - MySQL Workbench ì‹œê°í™”
- [pgAdmin](https://www.pgadmin.org/) - PostgreSQL ê´€ë¦¬ ë„êµ¬

### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë„êµ¬

**ì˜¤í”ˆì†ŒìŠ¤ ë„êµ¬**
- [Prometheus](https://prometheus.io/) - ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ë° ì•Œë¦¼
- [Grafana](https://grafana.com/) - ë°ì´í„° ì‹œê°í™” ëŒ€ì‹œë³´ë“œ
- [pg_stat_statements](https://www.postgresql.org/docs/current/pgstatstatements.html) - PostgreSQL ì¿¼ë¦¬ í†µê³„
- [MySQL Performance Schema](https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html) - MySQL ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

**ìƒìš© ë„êµ¬**
- [Datadog](https://www.datadoghq.com/) - í†µí•© ëª¨ë‹ˆí„°ë§ í”Œë«í¼
- [New Relic](https://newrelic.com/) - APM ë° ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë‹ˆí„°ë§
- [Percona Monitoring and Management](https://www.percona.com/software/database-tools/percona-monitoring-and-management) - ì˜¤í”ˆì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§

### ë²¤ì¹˜ë§ˆí‚¹ ë„êµ¬

- **sysbench** - ë²”ìš© ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
  - [GitHub](https://github.com/akopytov/sysbench)
  - OLTP ì›Œí¬ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜

- **pgbench** - PostgreSQL ë²¤ì¹˜ë§ˆí¬
  - [Documentation](https://www.postgresql.org/docs/current/pgbench.html)
  - TPC-B ìœ ì‚¬ ì›Œí¬ë¡œë“œ

- **mysqlslap** - MySQL ë¶€í•˜ í…ŒìŠ¤íŠ¸
  - [Documentation](https://dev.mysql.com/doc/refman/8.0/en/mysqlslap.html)
  - ë™ì‹œì„± ì‹œë®¬ë ˆì´ì…˜

### ì»¤ë®¤ë‹ˆí‹° ë° í¬ëŸ¼

**Stack Overflow**
- [Database Administrators](https://dba.stackexchange.com/) - DB ì „ë¬¸ê°€ Q&A
- [Stack Overflow - MySQL](https://stackoverflow.com/questions/tagged/mysql)
- [Stack Overflow - PostgreSQL](https://stackoverflow.com/questions/tagged/postgresql)

**Reddit**
- [r/PostgreSQL](https://www.reddit.com/r/PostgreSQL/)
- [r/MySQL](https://www.reddit.com/r/mysql/)
- [r/Database](https://www.reddit.com/r/Database/)

### ê¸°ìˆ  ë¸”ë¡œê·¸

**ê¸°ì—… ì—”ì§€ë‹ˆì–´ë§ ë¸”ë¡œê·¸**
- [Uber Engineering](https://eng.uber.com/) - ëŒ€ê·œëª¨ ë°ì´í„°ë² ì´ìŠ¤ ìš´ì˜ ì‚¬ë¡€
- [Netflix Tech Blog](https://netflixtechblog.com/) - ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜
- [Pinterest Engineering](https://medium.com/@Pinterest_Engineering) - ìƒ¤ë”© ë° ìŠ¤ì¼€ì¼ë§
- [Airbnb Engineering](https://medium.com/airbnb-engineering) - ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

**ë°ì´í„°ë² ì´ìŠ¤ ë²¤ë” ë¸”ë¡œê·¸**
- [Percona Blog](https://www.percona.com/blog/) - MySQL/PostgreSQL ì „ë¬¸ ê¸°ìˆ 
- [MariaDB Blog](https://mariadb.com/resources/blog/) - MariaDB ìµœì‹  ê¸°ëŠ¥
- [AWS Database Blog](https://aws.amazon.com/blogs/database/) - í´ë¼ìš°ë“œ ë°ì´í„°ë² ì´ìŠ¤

### ì»¨í¼ëŸ°ìŠ¤ ë° ë°‹ì—…

**ì£¼ìš” ì»¨í¼ëŸ°ìŠ¤**
- **Percona Live** - MySQL/PostgreSQL ì „ë¬¸ ì»¨í¼ëŸ°ìŠ¤
- **PostgreSQL Conference** - PostgreSQL ì»¤ë®¤ë‹ˆí‹° ì´ë²¤íŠ¸
- **Oracle OpenWorld** - Oracle ë° MySQL ë°œí‘œ
- **AWS re:Invent** - AWS ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤

**ì˜¨ë¼ì¸ ê°•ì˜**
- [Udemy - Database Design and Optimization](https://www.udemy.com/topic/database-design/) - ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„
- [Coursera - Database Management](https://www.coursera.org/courses?query=database) - ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
- [LinkedIn Learning - Database Administration](https://www.linkedin.com/learning/topics/database-administration) - DB ê´€ë¦¬

### ì‹¤ë¬´ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì¿¼ë¦¬ ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸**
```
â˜ SELECT * ì‚¬ìš©í•˜ì§€ ì•Šê¸°
â˜ WHERE ì ˆì— í•¨ìˆ˜ ì ìš© í”¼í•˜ê¸°
â˜ ì ì ˆí•œ ì¸ë±ìŠ¤ ìƒì„± í™•ì¸
â˜ ë³µí•© ì¸ë±ìŠ¤ ì»¬ëŸ¼ ìˆœì„œ ê²€í† 
â˜ ì‹¤í–‰ ê³„íš ë¶„ì„ ìˆ˜í–‰
â˜ N+1 ì¿¼ë¦¬ ë¬¸ì œ í™•ì¸
â˜ ì ì ˆí•œ JOIN ë°©ì‹ ì„ íƒ
â˜ ì„œë¸Œì¿¼ë¦¬ vs JOIN ì„±ëŠ¥ ë¹„êµ
```

**ì¸ë±ìŠ¤ ì„¤ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸**
```
â˜ WHERE ì ˆ ì»¬ëŸ¼ ì¸ë±ì‹±
â˜ JOIN í‚¤ ì»¬ëŸ¼ ì¸ë±ì‹±
â˜ ORDER BY ì»¬ëŸ¼ ì¸ë±ì‹±
â˜ ì„ íƒë„ ë†’ì€ ì»¬ëŸ¼ ìš°ì„ 
â˜ ë³µí•© ì¸ë±ìŠ¤ ìˆœì„œ ìµœì í™”
â˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì¸ë±ìŠ¤ ì œê±°
â˜ ì¸ë±ìŠ¤ ì¡°ê°í™” ëª¨ë‹ˆí„°ë§
â˜ í†µê³„ ì •ë³´ ì •ê¸° ì—…ë°ì´íŠ¸
```

**ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì²´í¬ë¦¬ìŠ¤íŠ¸**
```
â˜ ëŠë¦° ì¿¼ë¦¬ ë¡œê·¸ í™œì„±í™”
â˜ ì¿¼ë¦¬ ì‘ë‹µ ì‹œê°„ ì¸¡ì • (P95, P99)
â˜ ë°ì´í„°ë² ì´ìŠ¤ CPU ì‚¬ìš©ë¥ 
â˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  ë° ìºì‹œ íˆíŠ¸ìœ¨
â˜ ë””ìŠ¤í¬ I/O ëŒ€ê¸° ì‹œê°„
â˜ ì—°ê²° ìˆ˜ ë° ì—°ê²° í’€ ìƒíƒœ
â˜ ë½ ëŒ€ê¸° ì‹œê°„ ë° ë°ë“œë½
â˜ í…Œì´ë¸” ë° ì¸ë±ìŠ¤ í¬ê¸°
```

---

