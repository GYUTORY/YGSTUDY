---
title: í…ŒìŠ¤íŠ¸ ìë™í™” ë° í’ˆì§ˆ ë³´ì¦
tags: [testing, automation, quality-assurance, test-pyramid, performance-testing, ci-cd, container-testing]
updated: 2025-12-13
---

# í…ŒìŠ¤íŠ¸ ìë™í™” ë° í’ˆì§ˆ ë³´ì¦ (Test Automation and Quality Assurance)

## ëª©ì°¨
1. [TDD (Test-Driven Development) ë°©ë²•ë¡ ](#tdd-test-driven-development-ë°©ë²•ë¡ )
2. [í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ ì‹¤ì œ êµ¬í˜„](#í…ŒìŠ¤íŠ¸-í”¼ë¼ë¯¸ë“œ-ì‹¤ì œ-êµ¬í˜„)
3. [í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ë° í™˜ê²½ ê´€ë¦¬](#í…ŒìŠ¤íŠ¸-ê²©ë¦¬-ë°-í™˜ê²½-ê´€ë¦¬)
4. [ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìë™í™”](#ì„±ëŠ¥-í…ŒìŠ¤íŠ¸-ìë™í™”)
5. [í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê´€ë¦¬](#í…ŒìŠ¤íŠ¸-ì»¤ë²„ë¦¬ì§€-ê´€ë¦¬)
6. [E2E í…ŒìŠ¤íŠ¸ í†µí•©](#e2e-í…ŒìŠ¤íŠ¸-í†µí•©)
7. [ì»¨í…Œì´ë„ˆ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•](#ì»¨í…Œì´ë„ˆ-ê¸°ë°˜-í…ŒìŠ¤íŠ¸-í™˜ê²½-êµ¬ì¶•)
8. [í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬ ë° ì‹œë“œ](#í…ŒìŠ¤íŠ¸-ë°ì´í„°-ê´€ë¦¬-ë°-ì‹œë“œ)
9. [CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œì˜ í’ˆì§ˆ ê²Œì´íŠ¸](#cicd-íŒŒì´í”„ë¼ì¸ì—ì„œì˜-í’ˆì§ˆ-ê²Œì´íŠ¸)

### í†µí•©ëœ ê¸°ì¡´ íŒŒì¼ë“¤
ì´ ë¬¸ì„œëŠ” ë‹¤ìŒ ê¸°ì¡´ íŒŒì¼ë“¤ì˜ ë‚´ìš©ì„ í†µí•©í•œ ê²ƒì…ë‹ˆë‹¤:
- **TDD**: í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ â†’ í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œë¡œ í™•ì¥
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê´€ë¦¬**: ì»¤ë²„ë¦¬ì§€ ì¸¡ì • â†’ í’ˆì§ˆ ê²Œì´íŠ¸ë¡œ í™•ì¥
- **Bitbucket Pipeline**: ê¸°ë³¸ CI/CD â†’ í’ˆì§ˆ ë³´ì¦ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ í™•ì¥
- **E2E í…ŒìŠ¤íŠ¸ ë„êµ¬ ë¹„êµ**: ë„êµ¬ ë¹„êµ â†’ ìë™í™”ë¡œ í™•ì¥
- **API E2E í…ŒìŠ¤íŠ¸ íŒ¨í„´**: API í…ŒìŠ¤íŠ¸ â†’ í†µí•© í…ŒìŠ¤íŠ¸ ìë™í™”ë¡œ í™•ì¥
- **Database Integration Testing**: DB í…ŒìŠ¤íŠ¸ â†’ í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬ë¡œ í™•ì¥

---

## TDD (Test-Driven Development) ë°©ë²•ë¡ 

### 1. TDD í•µì‹¬ ê°œë…

#### TDDë€?
TDD(Test-Driven Development, í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ)ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•˜ê³ , ì´í›„ì— ì‹¤ì œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì¦‰, ê¸°ëŠ¥ì„ ê°œë°œí•˜ê¸° ì „ì— ë¨¼ì € í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•œ í›„, í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•  ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê°œë°œ ë°©ë²•ë¡ ì…ë‹ˆë‹¤.

#### TDDì˜ í•µì‹¬ ì›ì¹™
- **í…ŒìŠ¤íŠ¸ ìš°ì„ **: ê¸°ëŠ¥ êµ¬í˜„ ì „ì— í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±
- **ì‘ì€ ë‹¨ìœ„**: ì‘ì€ ê¸°ëŠ¥ ë‹¨ìœ„ë¡œ í…ŒìŠ¤íŠ¸ì™€ êµ¬í˜„ì„ ë°˜ë³µ
- **ì§€ì†ì  ë¦¬íŒ©í† ë§**: ì½”ë“œ ê°œì„ ì„ í†µí•œ í’ˆì§ˆ í–¥ìƒ

#### TDDì˜ ì¥ì 
- ì½”ë“œì˜ í’ˆì§ˆê³¼ ì‹ ë¢°ì„± í–¥ìƒ
- ì„¤ê³„ ê°œì„  ë° ë¦¬íŒ©í† ë§ ìš©ì´
- ë¬¸ì„œí™” íš¨ê³¼
- ë²„ê·¸ ì¡°ê¸° ë°œê²¬

### 2. TDD ê°œë°œ í”„ë¡œì„¸ìŠ¤

TDDëŠ” **Red â†’ Green â†’ Refactor** 3ë‹¨ê³„ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤.

#### Red (ì‹¤íŒ¨) ë‹¨ê³„
```javascript
// 1. ë¨¼ì € í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰ â†’ ë‹¹ì—°íˆ ì²˜ìŒì—ëŠ” ì‹¤íŒ¨
describe('UserService', () => {
  describe('createUser', () => {
    it('should create a new user with valid data', () => {
      // Given
      const userData = {
        email: 'test@example.com',
        password: 'password123',
        name: 'Test User'
      };

      // When
      const result = UserService.createUser(userData);

      // Then
      expect(result).toBeDefined();
      expect(result.email).toBe(userData.email);
      expect(result.name).toBe(userData.name);
      expect(result.id).toBeDefined();
    });
  });
});
```

#### Green (ì„±ê³µ) ë‹¨ê³„
```javascript
// 2. í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•  ìˆ˜ ìˆëŠ” ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±
class UserService {
  static createUser(userData) {
    // ìµœì†Œí•œì˜ êµ¬í˜„ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í†µê³¼
    return {
      id: Date.now().toString(),
      email: userData.email,
      name: userData.name,
      createdAt: new Date()
    };
  }
}
```

#### Refactor (ë¦¬íŒ©í† ë§) ë‹¨ê³„
```javascript
// 3. ì½”ë“œë¥¼ ê°œì„ í•˜ê³  ìµœì í™”
class UserService {
  static createUser(userData) {
    // ì…ë ¥ ê²€ì¦ ì¶”ê°€
    this.validateUserData(userData);
    
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°œì„ 
    const hashedPassword = this.hashPassword(userData.password);
    
    // ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
    const user = {
      id: this.generateUserId(),
      email: userData.email,
      name: userData.name,
      password: hashedPassword,
      createdAt: new Date()
    };
    
    return this.saveUser(user);
  }

  static validateUserData(userData) {
    if (!userData.email || !userData.password || !userData.name) {
      throw new Error('í•„ìˆ˜ í•„ë“œê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
    
    if (!this.isValidEmail(userData.email)) {
      throw new Error('ìœ íš¨í•˜ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤.');
    }
  }

  static hashPassword(password) {
    const crypto = require('crypto');
    return crypto.createHash('sha256').update(password).digest('hex');
  }

  static generateUserId() {
    return `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }

  static saveUser(user) {
    // ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ë¡œì§
    return user;
  }
}
```

### 3. TDD ì‹¤ì „ ì˜ˆì œ: ì£¼ë¬¸ ì‹œìŠ¤í…œ

#### ë‹¨ê³„ 1: ì£¼ë¬¸ ìƒì„± í…ŒìŠ¤íŠ¸ ì‘ì„±
```javascript
// tests/order.test.js
describe('OrderService', () => {
  describe('createOrder', () => {
    it('should create order with valid items', () => {
      // Given
      const orderData = {
        userId: 'user123',
        items: [
          { productId: 'prod1', quantity: 2, price: 1000 },
          { productId: 'prod2', quantity: 1, price: 2000 }
        ]
      };

      // When
      const order = OrderService.createOrder(orderData);

      // Then
      expect(order).toBeDefined();
      expect(order.id).toBeDefined();
      expect(order.userId).toBe(orderData.userId);
      expect(order.items).toHaveLength(2);
      expect(order.totalAmount).toBe(4000); // (2 * 1000) + (1 * 2000)
      expect(order.status).toBe('PENDING');
    });

    it('should throw error for empty items', () => {
      // Given
      const orderData = {
        userId: 'user123',
        items: []
      };

      // When & Then
      expect(() => OrderService.createOrder(orderData))
        .toThrow('ì£¼ë¬¸ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.');
    });

    it('should calculate total amount correctly', () => {
      // Given
      const orderData = {
        userId: 'user123',
        items: [
          { productId: 'prod1', quantity: 3, price: 500 },
          { productId: 'prod2', quantity: 2, price: 1500 }
        ]
      };

      // When
      const order = OrderService.createOrder(orderData);

      // Then
      expect(order.totalAmount).toBe(4500); // (3 * 500) + (2 * 1500)
    });
  });
});
```

#### ë‹¨ê³„ 2: ìµœì†Œ êµ¬í˜„ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í†µê³¼
```javascript
// src/services/OrderService.js
class OrderService {
  static createOrder(orderData) {
    if (!orderData.items || orderData.items.length === 0) {
      throw new Error('ì£¼ë¬¸ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.');
    }

    const totalAmount = orderData.items.reduce((sum, item) => {
      return sum + (item.quantity * item.price);
    }, 0);

    return {
      id: `order_${Date.now()}`,
      userId: orderData.userId,
      items: orderData.items,
      totalAmount: totalAmount,
      status: 'PENDING',
      createdAt: new Date()
    };
  }
}

module.exports = OrderService;
```

#### ë‹¨ê³„ 3: ë¦¬íŒ©í† ë§ ë° ê°œì„ 
```javascript
// src/services/OrderService.js
const { v4: uuidv4 } = require('uuid');
const OrderRepository = require('../repositories/OrderRepository');
const ProductService = require('./ProductService');

class OrderService {
  static async createOrder(orderData) {
    // ì…ë ¥ ê²€ì¦
    this.validateOrderData(orderData);
    
    // ìƒí’ˆ ì¬ê³  í™•ì¸
    await this.validateProductAvailability(orderData.items);
    
    // ì£¼ë¬¸ ìƒì„±
    const order = this.buildOrder(orderData);
    
    // ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
    const savedOrder = await OrderRepository.save(order);
    
    // ì´ë²¤íŠ¸ ë°œí–‰
    await this.publishOrderCreatedEvent(savedOrder);
    
    return savedOrder;
  }

  static validateOrderData(orderData) {
    if (!orderData.userId) {
      throw new Error('ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤.');
    }
    
    if (!orderData.items || orderData.items.length === 0) {
      throw new Error('ì£¼ë¬¸ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.');
    }
    
    orderData.items.forEach((item, index) => {
      if (!item.productId || !item.quantity || !item.price) {
        throw new Error(`ì£¼ë¬¸ í•­ëª© ${index + 1}ì˜ í•„ìˆ˜ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
      }
      
      if (item.quantity <= 0) {
        throw new Error(`ì£¼ë¬¸ í•­ëª© ${index + 1}ì˜ ìˆ˜ëŸ‰ì€ 0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.`);
      }
      
      if (item.price <= 0) {
        throw new Error(`ì£¼ë¬¸ í•­ëª© ${index + 1}ì˜ ê°€ê²©ì€ 0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.`);
      }
    });
  }

  static async validateProductAvailability(items) {
    for (const item of items) {
      const product = await ProductService.getProduct(item.productId);
      
      if (!product) {
        throw new Error(`ìƒí’ˆ ${item.productId}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
      }
      
      if (product.stock < item.quantity) {
        throw new Error(`ìƒí’ˆ ${product.name}ì˜ ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (ìš”ì²­: ${item.quantity}, ì¬ê³ : ${product.stock})`);
      }
    }
  }

  static buildOrder(orderData) {
    const totalAmount = orderData.items.reduce((sum, item) => {
      return sum + (item.quantity * item.price);
    }, 0);

    return {
      id: uuidv4(),
      userId: orderData.userId,
      items: orderData.items.map(item => ({
        productId: item.productId,
        quantity: item.quantity,
        price: item.price,
        subtotal: item.quantity * item.price
      })),
      totalAmount: totalAmount,
      status: 'PENDING',
      createdAt: new Date(),
      updatedAt: new Date()
    };
  }

  static async publishOrderCreatedEvent(order) {
    const EventBus = require('../events/EventBus');
    await EventBus.publish('order.created', {
      orderId: order.id,
      userId: order.userId,
      totalAmount: order.totalAmount,
      timestamp: order.createdAt
    });
  }
}

module.exports = OrderService;
```

### 4. TDD ëª¨ë²” ì‚¬ë¡€

#### í…ŒìŠ¤íŠ¸ ì‘ì„± ì›ì¹™
```javascript
// ì¢‹ì€ ì˜ˆì‹œ
describe('UserService', () => {
  describe('authenticateUser', () => {
    it('should return user when valid credentials provided', async () => {
      // Given - ëª…í™•í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì„¤ì •
      const credentials = {
        email: 'test@example.com',
        password: 'validPassword123'
      };
      const expectedUser = {
        id: 'user123',
        email: 'test@example.com',
        name: 'Test User'
      };
      
      // Mock ì„¤ì •
      UserRepository.findByEmail.mockResolvedValue(expectedUser);
      PasswordService.verify.mockResolvedValue(true);

      // When - ë‹¨ì¼ ë™ì‘ ì‹¤í–‰
      const result = await UserService.authenticateUser(credentials);

      // Then - ëª…í™•í•œ ê²€ì¦
      expect(result).toEqual(expectedUser);
      expect(UserRepository.findByEmail).toHaveBeenCalledWith(credentials.email);
      expect(PasswordService.verify).toHaveBeenCalledWith(
        credentials.password, 
        expectedUser.passwordHash
      );
    });

    it('should throw error when invalid credentials provided', async () => {
      // Given
      const credentials = {
        email: 'test@example.com',
        password: 'wrongPassword'
      };
      
      UserRepository.findByEmail.mockResolvedValue(null);

      // When & Then
      await expect(UserService.authenticateUser(credentials))
        .rejects
        .toThrow('ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    });
  });
});
```

#### í…ŒìŠ¤íŠ¸ êµ¬ì¡°í™”
```javascript
// tests/unit/services/UserService.test.js
describe('UserService', () => {
  let userService;
  let mockUserRepository;
  let mockPasswordService;

  beforeEach(() => {
    // ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ê¹¨ë—í•œ ìƒíƒœë¡œ ì´ˆê¸°í™”
    mockUserRepository = {
      findByEmail: jest.fn(),
      save: jest.fn(),
      update: jest.fn()
    };
    
    mockPasswordService = {
      hash: jest.fn(),
      verify: jest.fn()
    };

    userService = new UserService(mockUserRepository, mockPasswordService);
  });

  afterEach(() => {
    // Mock ì´ˆê¸°í™”
    jest.clearAllMocks();
  });

  describe('createUser', () => {
    it('should create user successfully', async () => {
      // í…ŒìŠ¤íŠ¸ êµ¬í˜„
    });
  });

  describe('updateUser', () => {
    it('should update user successfully', async () => {
      // í…ŒìŠ¤íŠ¸ êµ¬í˜„
    });
  });
});
```

---

## í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ ì‹¤ì œ êµ¬í˜„

### 1. í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ ê°œë… ë° êµ¬ì¡°

#### í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ êµ¬ì¡°
```
        E2E Tests (10%)
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Playwright     â”‚
      â”‚   ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Integration Tests  â”‚
    â”‚   Supertest API      â”‚
    â”‚   (20%)              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     Unit Tests (70%)     â”‚
  â”‚     Jest ìˆœìˆ˜ í•¨ìˆ˜       â”‚
  â”‚     ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Unit Tests (70%) - Jest ê¸°ë°˜

#### ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
```javascript
// tests/unit/utils/calculator.test.js
describe('Calculator', () => {
  describe('calculateTotal', () => {
    it('should calculate total with tax correctly', () => {
      // Given
      const items = [
        { price: 1000, quantity: 2 },
        { price: 2000, quantity: 1 }
      ];
      const taxRate = 0.1;

      // When
      const result = Calculator.calculateTotal(items, taxRate);

      // Then
      expect(result.subtotal).toBe(4000); // (1000 * 2) + (2000 * 1)
      expect(result.tax).toBe(400); // 4000 * 0.1
      expect(result.total).toBe(4400); // 4000 + 400
    });

    it('should handle empty items array', () => {
      // Given
      const items = [];
      const taxRate = 0.1;

      // When
      const result = Calculator.calculateTotal(items, taxRate);

      // Then
      expect(result.subtotal).toBe(0);
      expect(result.tax).toBe(0);
      expect(result.total).toBe(0);
    });

    it('should handle zero tax rate', () => {
      // Given
      const items = [{ price: 1000, quantity: 1 }];
      const taxRate = 0;

      // When
      const result = Calculator.calculateTotal(items, taxRate);

      // Then
      expect(result.subtotal).toBe(1000);
      expect(result.tax).toBe(0);
      expect(result.total).toBe(1000);
    });
  });

  describe('formatCurrency', () => {
    it('should format currency with Korean won', () => {
      // Given
      const amount = 1234567;

      // When
      const result = Calculator.formatCurrency(amount, 'KRW');

      // Then
      expect(result).toBe('â‚©1,234,567');
    });

    it('should format currency with US dollar', () => {
      // Given
      const amount = 1234.56;

      // When
      const result = Calculator.formatCurrency(amount, 'USD');

      // Then
      expect(result).toBe('$1,234.56');
    });
  });
});
```

#### ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸
```javascript
// tests/unit/services/OrderService.test.js
describe('OrderService', () => {
  let orderService;
  let mockOrderRepository;
  let mockProductService;
  let mockEventBus;

  beforeEach(() => {
    mockOrderRepository = {
      save: jest.fn(),
      findById: jest.fn(),
      update: jest.fn()
    };
    
    mockProductService = {
      getProduct: jest.fn(),
      updateStock: jest.fn()
    };
    
    mockEventBus = {
      publish: jest.fn()
    };

    orderService = new OrderService(
      mockOrderRepository,
      mockProductService,
      mockEventBus
    );
  });

  afterEach(() => {
    jest.clearAllMocks();
  });

  describe('createOrder', () => {
    it('should create order successfully', async () => {
      // Given
      const orderData = {
        userId: 'user123',
        items: [
          { productId: 'prod1', quantity: 2, price: 1000 }
        ]
      };
      
      const mockProduct = { id: 'prod1', name: 'Product 1', stock: 10 };
      const mockOrder = { id: 'order123', ...orderData, totalAmount: 2000 };

      mockProductService.getProduct.mockResolvedValue(mockProduct);
      mockOrderRepository.save.mockResolvedValue(mockOrder);
      mockEventBus.publish.mockResolvedValue();

      // When
      const result = await orderService.createOrder(orderData);

      // Then
      expect(result).toEqual(mockOrder);
      expect(mockProductService.getProduct).toHaveBeenCalledWith('prod1');
      expect(mockOrderRepository.save).toHaveBeenCalled();
      expect(mockEventBus.publish).toHaveBeenCalledWith('order.created', expect.any(Object));
    });

    it('should throw error when product not found', async () => {
      // Given
      const orderData = {
        userId: 'user123',
        items: [{ productId: 'nonexistent', quantity: 1, price: 1000 }]
      };

      mockProductService.getProduct.mockResolvedValue(null);

      // When & Then
      await expect(orderService.createOrder(orderData))
        .rejects
        .toThrow('ìƒí’ˆ nonexistentë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    });

    it('should throw error when insufficient stock', async () => {
      // Given
      const orderData = {
        userId: 'user123',
        items: [{ productId: 'prod1', quantity: 5, price: 1000 }]
      };
      
      const mockProduct = { id: 'prod1', name: 'Product 1', stock: 3 };

      mockProductService.getProduct.mockResolvedValue(mockProduct);

      // When & Then
      await expect(orderService.createOrder(orderData))
        .rejects
        .toThrow('ìƒí’ˆ Product 1ì˜ ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (ìš”ì²­: 5, ì¬ê³ : 3)');
    });
  });

  describe('cancelOrder', () => {
    it('should cancel order successfully', async () => {
      // Given
      const orderId = 'order123';
      const mockOrder = {
        id: orderId,
        status: 'PENDING',
        items: [{ productId: 'prod1', quantity: 2 }]
      };

      mockOrderRepository.findById.mockResolvedValue(mockOrder);
      mockOrderRepository.update.mockResolvedValue({ ...mockOrder, status: 'CANCELLED' });
      mockEventBus.publish.mockResolvedValue();

      // When
      const result = await orderService.cancelOrder(orderId);

      // Then
      expect(result.status).toBe('CANCELLED');
      expect(mockOrderRepository.update).toHaveBeenCalledWith(orderId, { status: 'CANCELLED' });
      expect(mockEventBus.publish).toHaveBeenCalledWith('order.cancelled', expect.any(Object));
    });

    it('should throw error when order not found', async () => {
      // Given
      const orderId = 'nonexistent';

      mockOrderRepository.findById.mockResolvedValue(null);

      // When & Then
      await expect(orderService.cancelOrder(orderId))
        .rejects
        .toThrow('ì£¼ë¬¸ nonexistentë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    });

    it('should throw error when order already cancelled', async () => {
      // Given
      const orderId = 'order123';
      const mockOrder = { id: orderId, status: 'CANCELLED' };

      mockOrderRepository.findById.mockResolvedValue(mockOrder);

      // When & Then
      await expect(orderService.cancelOrder(orderId))
        .rejects
        .toThrow('ì´ë¯¸ ì·¨ì†Œëœ ì£¼ë¬¸ì…ë‹ˆë‹¤.');
    });
  });
});
```

### 3. Integration Tests (20%) - Supertest ê¸°ë°˜

#### API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
```javascript
// tests/integration/api/orders.test.js
const request = require('supertest');
const app = require('../../src/app');
const { setupTestDatabase, cleanupTestDatabase } = require('../helpers/database');
const { createTestUser, createTestProduct } = require('../helpers/factory');

describe('Orders API', () => {
  let testUser;
  let testProduct;
  let authToken;

  beforeAll(async () => {
    await setupTestDatabase();
    testUser = await createTestUser();
    testProduct = await createTestProduct();
    authToken = await getAuthToken(testUser);
  });

  afterAll(async () => {
    await cleanupTestDatabase();
  });

  beforeEach(async () => {
    // ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ê¹¨ë—í•œ ìƒíƒœë¡œ ì´ˆê¸°í™”
    await cleanupTestData();
  });

  describe('POST /api/orders', () => {
    it('should create order successfully', async () => {
      // Given
      const orderData = {
        items: [
          { productId: testProduct.id, quantity: 2, price: testProduct.price }
        ]
      };

      // When
      const response = await request(app)
        .post('/api/orders')
        .set('Authorization', `Bearer ${authToken}`)
        .send(orderData)
        .expect(201);

      // Then
      expect(response.body).toMatchObject({
        id: expect.any(String),
        userId: testUser.id,
        items: expect.arrayContaining([
          expect.objectContaining({
            productId: testProduct.id,
            quantity: 2,
            price: testProduct.price
          })
        ]),
        totalAmount: testProduct.price * 2,
        status: 'PENDING'
      });
    });

    it('should return 400 for invalid order data', async () => {
      // Given
      const invalidOrderData = {
        items: [] // ë¹ˆ ë°°ì—´
      };

      // When & Then
      await request(app)
        .post('/api/orders')
        .set('Authorization', `Bearer ${authToken}`)
        .send(invalidOrderData)
        .expect(400)
        .expect((res) => {
          expect(res.body.error).toContain('ì£¼ë¬¸ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤');
        });
    });

    it('should return 401 for unauthenticated request', async () => {
      // Given
      const orderData = {
        items: [{ productId: testProduct.id, quantity: 1, price: testProduct.price }]
      };

      // When & Then
      await request(app)
        .post('/api/orders')
        .send(orderData)
        .expect(401);
    });
  });

  describe('GET /api/orders/:id', () => {
    it('should return order details', async () => {
      // Given
      const order = await createTestOrder(testUser.id, [testProduct]);

      // When
      const response = await request(app)
        .get(`/api/orders/${order.id}`)
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);

      // Then
      expect(response.body).toMatchObject({
        id: order.id,
        userId: testUser.id,
        status: 'PENDING'
      });
    });

    it('should return 404 for non-existent order', async () => {
      // When & Then
      await request(app)
        .get('/api/orders/nonexistent')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(404);
    });
  });

  describe('PUT /api/orders/:id/cancel', () => {
    it('should cancel order successfully', async () => {
      // Given
      const order = await createTestOrder(testUser.id, [testProduct]);

      // When
      const response = await request(app)
        .put(`/api/orders/${order.id}/cancel`)
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);

      // Then
      expect(response.body.status).toBe('CANCELLED');
    });

    it('should return 400 for already cancelled order', async () => {
      // Given
      const order = await createTestOrder(testUser.id, [testProduct], 'CANCELLED');

      // When & Then
      await request(app)
        .put(`/api/orders/${order.id}/cancel`)
        .set('Authorization', `Bearer ${authToken}`)
        .expect(400)
        .expect((res) => {
          expect(res.body.error).toContain('ì´ë¯¸ ì·¨ì†Œëœ ì£¼ë¬¸ì…ë‹ˆë‹¤');
        });
    });
  });
});
```

#### ë¯¸ë“¤ì›¨ì–´ í…ŒìŠ¤íŠ¸
```javascript
// tests/integration/middleware/auth.test.js
const request = require('supertest');
const express = require('express');
const authMiddleware = require('../../src/middleware/auth');
const jwt = require('jsonwebtoken');

describe('Auth Middleware', () => {
  let app;
  const secretKey = 'test-secret-key';

  beforeEach(() => {
    app = express();
    app.use(express.json());
    app.use(authMiddleware(secretKey));
    
    app.get('/protected', (req, res) => {
      res.json({ user: req.user });
    });
  });

  it('should allow access with valid token', async () => {
    // Given
    const user = { id: 'user123', email: 'test@example.com' };
    const token = jwt.sign(user, secretKey, { expiresIn: '1h' });

    // When
    const response = await request(app)
      .get('/protected')
      .set('Authorization', `Bearer ${token}`)
      .expect(200);

    // Then
    expect(response.body.user).toMatchObject(user);
  });

  it('should reject request without token', async () => {
    // When & Then
    await request(app)
      .get('/protected')
      .expect(401)
      .expect((res) => {
        expect(res.body.error).toContain('ì¸ì¦ í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤');
      });
  });

  it('should reject request with invalid token', async () => {
    // When & Then
    await request(app)
      .get('/protected')
      .set('Authorization', 'Bearer invalid-token')
      .expect(401)
      .expect((res) => {
        expect(res.body.error).toContain('ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤');
      });
  });

  it('should reject request with expired token', async () => {
    // Given
    const user = { id: 'user123', email: 'test@example.com' };
    const token = jwt.sign(user, secretKey, { expiresIn: '-1h' }); // ë§Œë£Œëœ í† í°

    // When & Then
    await request(app)
      .get('/protected')
      .set('Authorization', `Bearer ${token}`)
      .expect(401)
      .expect((res) => {
        expect(res.body.error).toContain('í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤');
      });
  });
});
```

### 4. E2E Tests (10%) - Playwright ê¸°ë°˜

#### ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
```javascript
// tests/e2e/order-flow.spec.js
const { test, expect } = require('@playwright/test');

test.describe('Order Flow', () => {
  test.beforeEach(async ({ page }) => {
    // ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ë¡œê·¸ì¸
    await page.goto('/login');
    await page.fill('[data-testid="email"]', 'test@example.com');
    await page.fill('[data-testid="password"]', 'password123');
    await page.click('[data-testid="login-button"]');
    await expect(page).toHaveURL('/dashboard');
  });

  test('should complete order flow successfully', async ({ page }) => {
    // 1. ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™
    await page.goto('/products');
    await expect(page.locator('[data-testid="product-list"]')).toBeVisible();

    // 2. ì²« ë²ˆì§¸ ìƒí’ˆì„ ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€
    await page.click('[data-testid="product-item"]:first-child [data-testid="add-to-cart"]');
    await expect(page.locator('[data-testid="cart-count"]')).toHaveText('1');

    // 3. ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ë¡œ ì´ë™
    await page.click('[data-testid="cart-icon"]');
    await expect(page).toHaveURL('/cart');
    await expect(page.locator('[data-testid="cart-item"]')).toHaveCount(1);

    // 4. ì£¼ë¬¸í•˜ê¸° ë²„íŠ¼ í´ë¦­
    await page.click('[data-testid="checkout-button"]');
    await expect(page).toHaveURL('/checkout');

    // 5. ë°°ì†¡ ì •ë³´ ì…ë ¥
    await page.fill('[data-testid="shipping-name"]', 'í™ê¸¸ë™');
    await page.fill('[data-testid="shipping-address"]', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123');
    await page.fill('[data-testid="shipping-phone"]', '010-1234-5678');

    // 6. ê²°ì œ ì •ë³´ ì…ë ¥
    await page.fill('[data-testid="card-number"]', '1234-5678-9012-3456');
    await page.fill('[data-testid="card-expiry"]', '12/25');
    await page.fill('[data-testid="card-cvv"]', '123');

    // 7. ì£¼ë¬¸ ì™„ë£Œ
    await page.click('[data-testid="place-order-button"]');
    
    // 8. ì£¼ë¬¸ ì™„ë£Œ í˜ì´ì§€ í™•ì¸
    await expect(page).toHaveURL(/\/orders\/\d+/);
    await expect(page.locator('[data-testid="order-success"]')).toBeVisible();
    await expect(page.locator('[data-testid="order-number"]')).toBeVisible();
  });

  test('should show error for invalid payment information', async ({ page }) => {
    // Given - ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì´ ìˆëŠ” ìƒíƒœ
    await page.goto('/products');
    await page.click('[data-testid="product-item"]:first-child [data-testid="add-to-cart"]');
    await page.click('[data-testid="cart-icon"]');
    await page.click('[data-testid="checkout-button"]');

    // When - ì˜ëª»ëœ ê²°ì œ ì •ë³´ ì…ë ¥
    await page.fill('[data-testid="shipping-name"]', 'í™ê¸¸ë™');
    await page.fill('[data-testid="shipping-address"]', 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123');
    await page.fill('[data-testid="shipping-phone"]', '010-1234-5678');
    await page.fill('[data-testid="card-number"]', 'invalid-card');
    await page.fill('[data-testid="card-expiry"]', '12/25');
    await page.fill('[data-testid="card-cvv"]', '123');

    await page.click('[data-testid="place-order-button"]');

    // Then - ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
    await expect(page.locator('[data-testid="payment-error"]')).toBeVisible();
    await expect(page.locator('[data-testid="payment-error"]')).toContainText('ìœ íš¨í•˜ì§€ ì•Šì€ ì¹´ë“œ ë²ˆí˜¸');
  });

  test('should handle out of stock scenario', async ({ page }) => {
    // Given - ì¬ê³ ê°€ ì—†ëŠ” ìƒí’ˆ
    await page.goto('/products/out-of-stock-product');

    // When - ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ ì‹œë„
    await page.click('[data-testid="add-to-cart"]');

    // Then - ì¬ê³  ë¶€ì¡± ë©”ì‹œì§€ í‘œì‹œ
    await expect(page.locator('[data-testid="stock-error"]')).toBeVisible();
    await expect(page.locator('[data-testid="stock-error"]')).toContainText('ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤');
  });
});
```

#### ëª¨ë°”ì¼ ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸
```javascript
// tests/e2e/mobile-order.spec.js
const { test, expect, devices } = require('@playwright/test');

test.describe('Mobile Order Flow', () => {
  test.use({ ...devices['iPhone 12'] });

  test('should complete order on mobile device', async ({ page }) => {
    // ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ ì£¼ë¬¸ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
    await page.goto('/login');
    
    // ëª¨ë°”ì¼ í„°ì¹˜ ì¸í„°ë™ì…˜
    await page.tap('[data-testid="email"]');
    await page.fill('[data-testid="email"]', 'test@example.com');
    
    await page.tap('[data-testid="password"]');
    await page.fill('[data-testid="password"]', 'password123');
    
    await page.tap('[data-testid="login-button"]');
    await expect(page).toHaveURL('/dashboard');

    // ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜
    await page.tap('[data-testid="mobile-menu"]');
    await page.tap('[data-testid="products-link"]');
    
    // ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜
    await page.touchscreen.tap(200, 400);
    await page.touchscreen.tap(200, 300);
    
    // ëª¨ë°”ì¼ ì£¼ë¬¸ í”Œë¡œìš° ê³„ì†...
  });
});
```

### 5. í…ŒìŠ¤íŠ¸ ì„¤ì • ë° ì‹¤í–‰

#### Jest ì„¤ì •
```javascript
// jest.config.js
module.exports = {
  // í…ŒìŠ¤íŠ¸ í™˜ê²½
  testEnvironment: 'node',
  
  // í…ŒìŠ¤íŠ¸ íŒŒì¼ íŒ¨í„´
  testMatch: [
    '<rootDir>/tests/unit/**/*.test.js',
    '<rootDir>/tests/integration/**/*.test.js'
  ],
  
  // ì»¤ë²„ë¦¬ì§€ ì„¤ì •
  collectCoverage: true,
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html'],
  collectCoverageFrom: [
    'src/**/*.js',
    '!src/**/*.test.js',
    '!src/**/*.spec.js'
  ],
  
  // ì»¤ë²„ë¦¬ì§€ ì„ê³„ê°’
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    }
  },
  
  // í…ŒìŠ¤íŠ¸ ì„¤ì •
  setupFilesAfterEnv: ['<rootDir>/tests/setup.js'],
  
  // ëª¨ë“ˆ ë§¤í•‘
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/src/$1'
  },
  
  // ë³‘ë ¬ ì‹¤í–‰
  maxWorkers: '50%',
  
  // íƒ€ì„ì•„ì›ƒ
  testTimeout: 10000
};
```

#### Playwright ì„¤ì •
```javascript
// playwright.config.js
const { defineConfig, devices } = require('@playwright/test');

module.exports = defineConfig({
  // í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬
  testDir: './tests/e2e',
  
  // ë³‘ë ¬ ì‹¤í–‰
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  
  // ë¦¬í¬í„°
  reporter: [
    ['html'],
    ['json', { outputFile: 'test-results/results.json' }]
  ],
  
  // ì „ì—­ ì„¤ì •
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure'
  },
  
  // í”„ë¡œì íŠ¸ ì„¤ì •
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] }
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] }
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] }
    },
    {
      name: 'Mobile Chrome',
      use: { ...devices['Pixel 5'] }
    },
    {
      name: 'Mobile Safari',
      use: { ...devices['iPhone 12'] }
    }
  ],
  
  // ì›¹ ì„œë²„ ì„¤ì •
  webServer: {
    command: 'npm run start:test',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI
  }
});
```

#### í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
```json
// package.json
{
  "scripts": {
    "test": "jest",
    "test:unit": "jest --testPathPattern=tests/unit",
    "test:integration": "jest --testPathPattern=tests/integration",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:all": "npm run test:unit && npm run test:integration && npm run test:e2e",
    "test:coverage": "jest --coverage",
    "test:watch": "jest --watch",
    "test:ci": "jest --ci --coverage --watchAll=false"
  }
}
```

---

## í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ë° í™˜ê²½ ê´€ë¦¬
```
        ğŸ”º E2E Tests (10%)
       ğŸ”ºğŸ”º Integration Tests (20%)
      ğŸ”ºğŸ”ºğŸ”º Unit Tests (70%)
```

#### í…ŒìŠ¤íŠ¸ ìˆ˜ë¦½
```javascript
class TestStrategy {
  constructor() {
    this.testTypes = {
      unit: {
        ratio: 70,
        description: 'ê°œë³„ í•¨ìˆ˜/ë©”ì„œë“œ í…ŒìŠ¤íŠ¸',
        tools: ['Jest', 'Mocha', 'Jasmine'],
        executionTime: 'ë¹ ë¦„ (< 1ms)',
        maintenance: 'ë‚®ìŒ'
      },
      integration: {
        ratio: 20,
        description: 'ëª¨ë“ˆ/ì„œë¹„ìŠ¤ ê°„ í†µí•© í…ŒìŠ¤íŠ¸',
        tools: ['Supertest', 'Chai', 'Sinon'],
        executionTime: 'ë³´í†µ (1-100ms)',
        maintenance: 'ì¤‘ê°„'
      },
      e2e: {
        ratio: 10,
        description: 'ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ì „ì²´ í…ŒìŠ¤íŠ¸',
        tools: ['Playwright', 'Cypress', 'Selenium'],
        executionTime: 'ëŠë¦¼ (> 1s)',
        maintenance: 'ë†’ìŒ'
      }
    };
  }

  // í”„ë¡œì íŠ¸ë³„ í…ŒìŠ¤íŠ¸ ìˆ˜ë¦½
  createProjectStrategy(projectType) {
    const strategies = {
      api: {
        unit: 'ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜',
        integration: 'ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™, ì™¸ë¶€ API í˜¸ì¶œ',
        e2e: 'API ì—”ë“œí¬ì¸íŠ¸ ì „ì²´ í”Œë¡œìš°'
      },
      web: {
        unit: 'ì»´í¬ë„ŒíŠ¸ ë¡œì§, ìƒíƒœ ê´€ë¦¬',
        integration: 'ì»´í¬ë„ŒíŠ¸ ê°„ ìƒí˜¸ì‘ìš©, API í˜¸ì¶œ',
        e2e: 'ì‚¬ìš©ì ì›Œí¬í”Œë¡œìš°'
      },
      mobile: {
        unit: 'ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìœ í‹¸ë¦¬í‹°',
        integration: 'ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥, API ì—°ë™',
        e2e: 'ì•± ì „ì²´ ì‚¬ìš©ì ì—¬ì •'
      }
    };

    return strategies[projectType] || strategies.api;
  }
}
```

### 2. í…ŒìŠ¤íŠ¸ ìë™í™”

#### í…ŒìŠ¤íŠ¸ ìë™í™” ë ˆë²¨
```javascript
class TestAutomationStrategy {
  constructor() {
    this.automationLevels = {
      level1: 'ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìë™í™”',
      level2: 'í†µí•© í…ŒìŠ¤íŠ¸ ìë™í™”', 
      level3: 'E2E í…ŒìŠ¤íŠ¸ ìë™í™”',
      level4: 'ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìë™í™”',
      level5: 'ë³´ì•ˆ í…ŒìŠ¤íŠ¸ ìë™í™”'
    };
  }

  // í…ŒìŠ¤íŠ¸ ìë™í™” ìš°ì„ ìˆœìœ„ ê²°ì •
  determinePriority(project) {
    const priorities = [];
    
    // í•„ìˆ˜: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ í†µí•© í…ŒìŠ¤íŠ¸
    priorities.push({
      level: 1,
      type: 'unit',
      reason: 'ê¸°ë³¸ì ì¸ ì½”ë“œ í’ˆì§ˆ ë³´ì¥',
      effort: 'low',
      impact: 'high'
    });

    priorities.push({
      level: 2, 
      type: 'integration',
      reason: 'ëª¨ë“ˆ ê°„ ìƒí˜¸ì‘ìš© ê²€ì¦',
      effort: 'medium',
      impact: 'high'
    });

    // ì„ íƒì : í”„ë¡œì íŠ¸ íŠ¹ì„±ì— ë”°ë¼
    if (project.hasUI) {
      priorities.push({
        level: 3,
        type: 'e2e',
        reason: 'ì‚¬ìš©ì ê²½í—˜ ê²€ì¦',
        effort: 'high',
        impact: 'medium'
      });
    }

    if (project.performanceCritical) {
      priorities.push({
        level: 4,
        type: 'performance',
        reason: 'ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±',
        effort: 'high',
        impact: 'high'
      });
    }

    return priorities.sort((a, b) => a.level - b.level);
  }
}
```

---

## ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ìë™í™”

### 1. K6 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### K6 ê¸°ë³¸ ì„¤ì • ë° ìŠ¤í¬ë¦½íŠ¸
```javascript
// k6-performance-tests.js
import http from 'k6/http';
import { check, sleep } from 'k6';
import { Rate } from 'k6/metrics';

// ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­
export const errorRate = new Rate('errors');

export let options = {
  stages: [
    { duration: '2m', target: 100 }, // 2ë¶„ê°„ 100 ì‚¬ìš©ìê¹Œì§€ ì¦ê°€
    { duration: '5m', target: 100 }, // 5ë¶„ê°„ 100 ì‚¬ìš©ì ìœ ì§€
    { duration: '2m', target: 200 }, // 2ë¶„ê°„ 200 ì‚¬ìš©ìê¹Œì§€ ì¦ê°€
    { duration: '5m', target: 200 }, // 5ë¶„ê°„ 200 ì‚¬ìš©ì ìœ ì§€
    { duration: '2m', target: 0 },   // 2ë¶„ê°„ 0 ì‚¬ìš©ìê¹Œì§€ ê°ì†Œ
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'], // 95% ìš”ì²­ì´ 500ms ë¯¸ë§Œ
    http_req_failed: ['rate<0.1'],    // ì—ëŸ¬ìœ¨ 10% ë¯¸ë§Œ
    errors: ['rate<0.1'],             // ì»¤ìŠ¤í…€ ì—ëŸ¬ìœ¨ 10% ë¯¸ë§Œ
  },
};

export default function() {
  const baseUrl = __ENV.BASE_URL || 'http://localhost:3000';
  
  // API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
  const endpoints = [
    '/api/users',
    '/api/products',
    '/api/orders'
  ];
  
  for (const endpoint of endpoints) {
    const response = http.get(`${baseUrl}${endpoint}`, {
      headers: { 'Content-Type': 'application/json' },
    });
    
    check(response, {
      'status is 200': (r) => r.status === 200,
      'response time < 500ms': (r) => r.timings.duration < 500,
      'response has data': (r) => r.json().length > 0,
    }) || errorRate.add(1);
    
    sleep(1);
  }
}

// ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸
export function stressTest() {
  return {
    executor: 'ramping-vus',
    startVUs: 0,
    stages: [
      { duration: '5m', target: 100 },
      { duration: '10m', target: 200 },
      { duration: '5m', target: 300 },
      { duration: '10m', target: 400 },
      { duration: '5m', target: 0 },
    ],
  };
}

// ìŠ¤íŒŒì´í¬ í…ŒìŠ¤íŠ¸
export function spikeTest() {
  return {
    executor: 'ramping-vus',
    startVUs: 0,
    stages: [
      { duration: '1m', target: 10 },
      { duration: '1m', target: 100 },
      { duration: '1m', target: 10 },
      { duration: '1m', target: 0 },
    ],
  };
}
```

#### K6 CI/CD í†µí•©
```yaml
# .github/workflows/performance-test.yml
name: Performance Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  performance-test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Start application
      run: |
        npm run build
        npm start &
        sleep 30
        
    - name: Run K6 performance tests
      run: |
        docker run --rm -i grafana/k6 run - <k6-performance-tests.js
        
    - name: Upload performance results
      uses: actions/upload-artifact@v2
      with:
        name: performance-results
        path: performance-results/
```

### 2. Artillery ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### Artillery ì„¤ì • ë° ì‹œë‚˜ë¦¬ì˜¤
```yaml
# artillery-config.yml
config:
  target: 'http://localhost:3000'
  phases:
    - duration: 60
      arrivalRate: 10
    - duration: 120
      arrivalRate: 20
    - duration: 60
      arrivalRate: 10
  defaults:
    headers:
      Content-Type: 'application/json'
  plugins:
    metrics-by-endpoint: {}
  ensure:
    p95: 500
    maxErrorRate: 5

scenarios:
  - name: "API Load Test"
    weight: 100
    flow:
      - get:
          url: "/api/health"
          expect:
            - statusCode: 200
      - post:
          url: "/api/auth/login"
          json:
            email: "test@example.com"
            password: "password123"
          capture:
            - json: "$.token"
              as: "authToken"
      - get:
          url: "/api/users"
          headers:
            Authorization: "Bearer {{ authToken }}"
          expect:
            - statusCode: 200
            - hasHeader: "content-type"
      - think: 2
```

#### Artillery ìë™í™” ìŠ¤í¬ë¦½íŠ¸
```javascript
// artillery-automation.js
const artillery = require('artillery');
const fs = require('fs');

class ArtilleryManager {
  constructor() {
    this.configFile = 'artillery-config.yml';
    this.resultsDir = './performance-results';
  }

  async runPerformanceTest(testType = 'load') {
    const configs = {
      load: {
        phases: [
          { duration: 60, arrivalRate: 10 },
          { duration: 120, arrivalRate: 20 }
        ],
        ensure: { p95: 500, maxErrorRate: 5 }
      },
      stress: {
        phases: [
          { duration: 60, arrivalRate: 10 },
          { duration: 120, arrivalRate: 50 },
          { duration: 60, arrivalRate: 100 }
        ],
        ensure: { maxErrorRate: 10 }
      },
      spike: {
        phases: [
          { duration: 30, arrivalRate: 10 },
          { duration: 60, arrivalRate: 100 },
          { duration: 30, arrivalRate: 10 }
        ]
      }
    };

    const config = configs[testType];
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const resultsFile = `${this.resultsDir}/artillery-${testType}-${timestamp}.json`;

    return new Promise((resolve, reject) => {
      const runner = artillery.runner(config, {
        target: process.env.TARGET_URL || 'http://localhost:3000',
        output: resultsFile
      });

      runner.on('done', (results) => {
        console.log(`Performance test completed: ${testType}`);
        resolve({
          type: testType,
          results,
          file: resultsFile
        });
      });

      runner.on('error', (error) => {
        reject(error);
      });
    });
  }

  // ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¶„ì„
  analyzeResults(resultsFile) {
    const results = JSON.parse(fs.readFileSync(resultsFile, 'utf8'));
    
    return {
      summary: results.aggregate,
      metrics: {
        requests: results.aggregate.counters['http.requests'],
        errors: results.aggregate.counters['http.request_rate'],
        responseTime: {
          min: results.aggregate.summaries['http.response_time'].min,
          max: results.aggregate.summaries['http.response_time'].max,
          median: results.aggregate.summaries['http.response_time'].median,
          p95: results.aggregate.summaries['http.response_time'].p95,
          p99: results.aggregate.summaries['http.response_time'].p99
        }
      },
      passRate: this.calculatePassRate(results),
      recommendations: this.generateRecommendations(results)
    };
  }
}
```

---

## ì»¨í…Œì´ë„ˆ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•

### 1. Docker ê¸°ë°˜ í…ŒìŠ¤íŠ¸ í™˜ê²½

#### í…ŒìŠ¤íŠ¸ìš© Docker Compose ì„¤ì •
```yaml
# docker-compose.test.yml
version: '3.8'

services:
  app-test:
    build:
      context: .
      dockerfile: Dockerfile.test
    environment:
      - NODE_ENV=test
      - DATABASE_URL=postgresql://test:test@postgres-test:5432/testdb
      - REDIS_URL=redis://redis-test:6379
    depends_on:
      - postgres-test
      - redis-test
    volumes:
      - ./test-results:/app/test-results
    networks:
      - test-network

  postgres-test:
    image: postgres:13
    environment:
      - POSTGRES_DB=testdb
      - POSTGRES_USER=test
      - POSTGRES_PASSWORD=test
    ports:
      - "5433:5432"
    volumes:
      - postgres-test-data:/var/lib/postgresql/data
    networks:
      - test-network

  redis-test:
    image: redis:6-alpine
    ports:
      - "6380:6379"
    volumes:
      - redis-test-data:/data
    networks:
      - test-network

  nginx-test:
    image: nginx:alpine
    ports:
      - "8080:80"
    volumes:
      - ./nginx-test.conf:/etc/nginx/nginx.conf
    depends_on:
      - app-test
    networks:
      - test-network

volumes:
  postgres-test-data:
  redis-test-data:

networks:
  test-network:
    driver: bridge
```

#### í…ŒìŠ¤íŠ¸ìš© Dockerfile
```dockerfile
# Dockerfile.test
FROM node:18-alpine

WORKDIR /app

# í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜
COPY package*.json ./
RUN npm ci --only=development

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬
COPY . .

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê¶Œí•œ ì„¤ì •
RUN chmod +x scripts/run-tests.sh

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
CMD ["npm", "run", "test:docker"]
```

### 2. Kubernetes ê¸°ë°˜ í…ŒìŠ¤íŠ¸ í™˜ê²½

#### í…ŒìŠ¤íŠ¸ìš© Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸
```yaml
# k8s-test-environment.yml
apiVersion: v1
kind: Namespace
metadata:
  name: test-environment

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: test-app
  namespace: test-environment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: test-app
  template:
    metadata:
      labels:
        app: test-app
    spec:
      containers:
      - name: app
        image: myapp:test
        env:
        - name: NODE_ENV
          value: "test"
        - name: DATABASE_URL
          value: "postgresql://test:test@postgres-test:5432/testdb"
        - name: REDIS_URL
          value: "redis://redis-test:6379"
        ports:
        - containerPort: 3000

---
apiVersion: v1
kind: Service
metadata:
  name: test-app-service
  namespace: test-environment
spec:
  selector:
    app: test-app
  ports:
  - port: 3000
    targetPort: 3000

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgres-test
  namespace: test-environment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: postgres-test
  template:
    metadata:
      labels:
        app: postgres-test
    spec:
      containers:
      - name: postgres
        image: postgres:13
        env:
        - name: POSTGRES_DB
          value: "testdb"
        - name: POSTGRES_USER
          value: "test"
        - name: POSTGRES_PASSWORD
          value: "test"
        ports:
        - containerPort: 5432
```

#### í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìë™í™” ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash
# scripts/run-container-tests.sh

set -e

echo "Starting container-based test environment..."

# í…ŒìŠ¤íŠ¸ í™˜ê²½ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
kubectl create namespace test-environment --dry-run=client -o yaml | kubectl apply -f -

# í…ŒìŠ¤íŠ¸ í™˜ê²½ ë°°í¬
echo "Deploying test environment..."
kubectl apply -f k8s-test-environment.yml

# í…ŒìŠ¤íŠ¸ í™˜ê²½ ì¤€ë¹„ ëŒ€ê¸°
echo "â³ Waiting for test environment to be ready..."
kubectl wait --for=condition=available --timeout=300s deployment/test-app -n test-environment

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "ğŸ§ª Running tests..."
kubectl exec -n test-environment deployment/test-app -- npm test

# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
echo "Running performance tests..."
kubectl exec -n test-environment deployment/test-app -- npm run test:performance

# í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìˆ˜ì§‘
echo "Collecting test results..."
kubectl cp test-environment/test-app-pod:/app/test-results ./test-results

# í…ŒìŠ¤íŠ¸ í™˜ê²½ ì •ë¦¬
echo "ğŸ§¹ Cleaning up test environment..."
kubectl delete namespace test-environment

echo "Container-based tests completed!"
```

---

## í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬ ë° ì‹œë“œ

### 1. í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ë° ê´€ë¦¬

#### í…ŒìŠ¤íŠ¸ ë°ì´í„° íŒ©í† ë¦¬
```javascript
// test/factories/UserFactory.js
const { faker } = require('@faker-js/faker');

class UserFactory {
  static create(overrides = {}) {
    return {
      id: faker.datatype.uuid(),
      name: faker.name.fullName(),
      email: faker.internet.email(),
      phone: faker.phone.number(),
      address: {
        street: faker.address.streetAddress(),
        city: faker.address.city(),
        zipCode: faker.address.zipCode()
      },
      role: faker.helpers.arrayElement(['user', 'admin', 'moderator']),
      createdAt: faker.date.past(),
      updatedAt: faker.date.recent(),
      ...overrides
    };
  }

  static createMany(count, overrides = {}) {
    return Array.from({ length: count }, () => this.create(overrides));
  }

  static createAdmin(overrides = {}) {
    return this.create({
      role: 'admin',
      permissions: ['read', 'write', 'delete'],
      ...overrides
    });
  }

  static createWithSpecificData(specificData) {
    return this.create({
      ...specificData,
      // í•­ìƒ í•„ìš”í•œ ê¸°ë³¸ ë°ì´í„°ëŠ” ë³´ì¥
      email: specificData.email || faker.internet.email(),
      createdAt: specificData.createdAt || faker.date.past()
    });
  }
}

module.exports = UserFactory;
```

#### í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ì‹œë”
```javascript
// test/seeders/TestDataSeeder.js
const { Pool } = require('pg');
const UserFactory = require('../factories/UserFactory');
const ProductFactory = require('../factories/ProductFactory');

class TestDataSeeder {
  constructor() {
    this.pool = new Pool({
      host: process.env.DB_HOST || 'localhost',
      port: process.env.DB_PORT || 5432,
      database: process.env.DB_NAME || 'testdb',
      user: process.env.DB_USER || 'test',
      password: process.env.DB_PASSWORD || 'test'
    });
  }

  async seed() {
    try {
      await this.cleanDatabase();
      await this.seedUsers();
      await this.seedProducts();
      await this.seedOrders();
      console.log('Test data seeded successfully');
    } catch (error) {
      console.error('Error seeding test data:', error);
      throw error;
    } finally {
      await this.pool.end();
    }
  }

  async cleanDatabase() {
    const tables = ['orders', 'products', 'users'];
    
    for (const table of tables) {
      await this.pool.query(`TRUNCATE TABLE ${table} RESTART IDENTITY CASCADE`);
    }
  }

  async seedUsers(count = 100) {
    const users = UserFactory.createMany(count);
    
    for (const user of users) {
      await this.pool.query(
        'INSERT INTO users (id, name, email, phone, address, role, created_at, updated_at) VALUES ($1, $2, $3, $4, $5, $6, $7, $8)',
        [user.id, user.name, user.email, user.phone, JSON.stringify(user.address), user.role, user.createdAt, user.updatedAt]
      );
    }
    
    console.log(`Seeded ${count} users`);
  }

  async seedProducts(count = 50) {
    const products = ProductFactory.createMany(count);
    
    for (const product of products) {
      await this.pool.query(
        'INSERT INTO products (id, name, description, price, category, created_at, updated_at) VALUES ($1, $2, $3, $4, $5, $6, $7)',
        [product.id, product.name, product.description, product.price, product.category, product.createdAt, product.updatedAt]
      );
    }
    
    console.log(`Seeded ${count} products`);
  }

  async seedOrders() {
    // ì‚¬ìš©ìì™€ ìƒí’ˆì„ ì—°ê²°í•œ ì£¼ë¬¸ ë°ì´í„° ìƒì„±
    const users = await this.pool.query('SELECT id FROM users LIMIT 20');
    const products = await this.pool.query('SELECT id FROM products LIMIT 30');
    
    for (let i = 0; i < 100; i++) {
      const user = users.rows[Math.floor(Math.random() * users.rows.length)];
      const product = products.rows[Math.floor(Math.random() * products.rows.length)];
      
      await this.pool.query(
        'INSERT INTO orders (id, user_id, product_id, quantity, status, created_at) VALUES ($1, $2, $3, $4, $5, $6)',
        [faker.datatype.uuid(), user.id, product.id, faker.datatype.number({ min: 1, max: 5 }), 'pending', new Date()]
      );
    }
    
    console.log('Seeded 100 orders');
  }
}

module.exports = TestDataSeeder;
```

### 2. í…ŒìŠ¤íŠ¸ ë°ì´í„° ê²©ë¦¬ ë° ì •ë¦¬

#### í…ŒìŠ¤íŠ¸ ê²©ë¦¬ ê´€ë¦¬ì
```javascript
// test/helpers/TestIsolationManager.js
class TestIsolationManager {
  constructor() {
    this.testData = new Map();
    this.cleanupTasks = [];
  }

  // í…ŒìŠ¤íŠ¸ ì‹œì‘ ì‹œ ê²©ë¦¬ í™˜ê²½ ì„¤ì •
  async setupTestIsolation() {
    // íŠ¸ëœì­ì…˜ ì‹œì‘
    await this.beginTransaction();
    
    // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì´ˆê¸°í™”
    await this.initializeTestData();
    
    // ì •ë¦¬ ì‘ì—… ë“±ë¡
    this.registerCleanupTasks();
  }

  // í…ŒìŠ¤íŠ¸ ì¢…ë£Œ ì‹œ ê²©ë¦¬ í™˜ê²½ ì •ë¦¬
  async cleanup() {
    try {
      // ë“±ë¡ëœ ì •ë¦¬ ì‘ì—… ì‹¤í–‰
      for (const task of this.cleanupTasks) {
        await task();
      }
      
      // íŠ¸ëœì­ì…˜ ë¡¤ë°±
      await this.rollbackTransaction();
      
      console.log('Test isolation cleanup completed');
    } catch (error) {
      console.error('Error during test cleanup:', error);
    }
  }

  async beginTransaction() {
    // ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ ì‹œì‘
    this.transaction = await this.pool.query('BEGIN');
  }

  async rollbackTransaction() {
    // íŠ¸ëœì­ì…˜ ë¡¤ë°±ìœ¼ë¡œ ëª¨ë“  ë³€ê²½ì‚¬í•­ ì·¨ì†Œ
    await this.pool.query('ROLLBACK');
  }

  // í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ë° ì¶”ì 
  async createTestData(type, data) {
    const record = await this.insertRecord(type, data);
    
    // ìƒì„±ëœ ë°ì´í„°ë¥¼ ì¶”ì í•˜ì—¬ ì •ë¦¬ ì‹œ ì‚¬ìš©
    if (!this.testData.has(type)) {
      this.testData.set(type, []);
    }
    this.testData.get(type).push(record.id);
    
    return record;
  }

  registerCleanupTasks() {
    // ë°ì´í„°ë² ì´ìŠ¤ ì •ë¦¬
    this.cleanupTasks.push(async () => {
      for (const [type, ids] of this.testData) {
        await this.deleteRecords(type, ids);
      }
    });

    // íŒŒì¼ ì‹œìŠ¤í…œ ì •ë¦¬
    this.cleanupTasks.push(async () => {
      await this.cleanupTestFiles();
    });

    // ì™¸ë¶€ ì„œë¹„ìŠ¤ ì •ë¦¬
    this.cleanupTasks.push(async () => {
      await this.cleanupExternalServices();
    });
  }
}

module.exports = TestIsolationManager;
```

---

## CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œì˜ í’ˆì§ˆ ê²Œì´íŠ¸

### 1. í’ˆì§ˆ ê²Œì´íŠ¸ ì •ì˜ ë° ì„¤ì •

#### í’ˆì§ˆ ê²Œì´íŠ¸ ë§¤ë‹ˆì €
```javascript
// scripts/quality-gate-manager.js
class QualityGateManager {
  constructor() {
    this.gates = {
      unitTests: {
        threshold: 90, // 90% ì´ìƒ í†µê³¼
        weight: 30
      },
      integrationTests: {
        threshold: 85, // 85% ì´ìƒ í†µê³¼
        weight: 25
      },
      codeCoverage: {
        threshold: 80, // 80% ì´ìƒ ì»¤ë²„ë¦¬ì§€
        weight: 20
      },
      securityScan: {
        threshold: 0, // ë³´ì•ˆ ì·¨ì•½ì  0ê°œ
        weight: 15
      },
      performanceTests: {
        threshold: 500, // 500ms ì´í•˜ ì‘ë‹µì‹œê°„
        weight: 10
      }
    };
  }

  async evaluateQuality(allResults) {
    const scores = {};
    let totalScore = 0;
    let totalWeight = 0;

    for (const [gateName, config] of Object.entries(this.gates)) {
      const result = allResults[gateName];
      const score = this.calculateGateScore(gateName, result, config);
      
      scores[gateName] = {
        score,
        passed: score >= config.threshold,
        weight: config.weight
      };
      
      totalScore += score * config.weight;
      totalWeight += config.weight;
    }

    const overallScore = totalWeight > 0 ? totalScore / totalWeight : 0;
    const passed = Object.values(scores).every(gate => gate.passed);

    return {
      overallScore,
      passed,
      gates: scores,
      recommendation: this.generateRecommendation(scores)
    };
  }

  calculateGateScore(gateName, result, config) {
    switch (gateName) {
      case 'unitTests':
        return (result.passed / result.total) * 100;
      
      case 'codeCoverage':
        return result.percentage;
      
      case 'securityScan':
        return result.vulnerabilities === 0 ? 100 : Math.max(0, 100 - result.vulnerabilities * 10);
      
      case 'performanceTests':
        return result.averageResponseTime <= config.threshold ? 100 : 
               Math.max(0, 100 - ((result.averageResponseTime - config.threshold) / config.threshold) * 100);
      
      default:
        return (result.passed / result.total) * 100;
    }
  }
}
```

### 2. GitHub Actions í’ˆì§ˆ ê²Œì´íŠ¸ íŒŒì´í”„ë¼ì¸

#### GitHub Actions ì›Œí¬í”Œë¡œìš°
```yaml
# .github/workflows/quality-gate.yml
name: Quality Gate Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  quality-gate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    # 1. ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
    - name: Code Quality Check
      run: |
        npm run lint
        npm run type-check
        
    # 2. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
    - name: Unit Tests
      run: |
        npm run test:unit -- --coverage --passWithNoTests
        
    # 3. í†µí•© í…ŒìŠ¤íŠ¸
    - name: Integration Tests
      run: |
        npm run test:integration
        
    # 4. E2E í…ŒìŠ¤íŠ¸ (í•„ìš”ì‹œ)
    - name: E2E Tests
      run: |
        npm run test:e2e
      if: github.event_name == 'push' && github.ref == 'refs/heads/main'
      
    # 5. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
    - name: Performance Tests
      run: |
        npm run test:performance
      if: github.event_name == 'push'
      
    # 6. ë³´ì•ˆ ìŠ¤ìº”
    - name: Security Scan
      run: |
        npm audit --audit-level=high
        npm run security:scan
        
    # 7. ë¹Œë“œ ê²€ì¦
    - name: Build Verification
      run: |
        npm run build
        
    # 8. í’ˆì§ˆ ê²Œì´íŠ¸ í‰ê°€
    - name: Quality Gate Evaluation
      run: |
        node scripts/evaluate-quality-gate.js
        
    # 9. ê²°ê³¼ ë³´ê³ 
    - name: Quality Report
      if: always()
      uses: actions/upload-artifact@v3
      with:
        name: quality-report
        path: quality-report.json
        
    # 10. í’ˆì§ˆ ê²Œì´íŠ¸ ì‹¤íŒ¨ ì‹œ ë¹Œë“œ ì¤‘ë‹¨
    - name: Fail if quality gate failed
      run: |
        if [ -f quality-report.json ]; then
          QUALITY_PASSED=$(node -p "require('./quality-report.json').passed")
          if [ "$QUALITY_PASSED" != "true" ]; then
            echo "Quality gate failed"
            exit 1
          fi
        fi
```

### 3. í’ˆì§ˆ ê²Œì´íŠ¸ ìë™í™” ìŠ¤í¬ë¦½íŠ¸

#### í’ˆì§ˆ ê²Œì´íŠ¸ í‰ê°€ ìŠ¤í¬ë¦½íŠ¸
```javascript
// scripts/evaluate-quality-gate.js
const { execSync } = require('child_process');
const fs = require('fs');
const QualityGateManager = require('./quality-gate-manager');

async function evaluateQualityGate() {
  console.log('Evaluating quality gates...');
  
  const qualityManager = new QualityGateManager();
  const results = {};
  
  try {
    // 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìˆ˜ì§‘
    console.log('Collecting unit test results...');
    results.unitTests = await collectUnitTestResults();
    
    // 2. í†µí•© í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìˆ˜ì§‘
    console.log('Collecting integration test results...');
    results.integrationTests = await collectIntegrationTestResults();
    
    // 3. ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ìˆ˜ì§‘
    console.log('Collecting code coverage...');
    results.codeCoverage = await collectCoverageResults();
    
    // 4. ë³´ì•ˆ ìŠ¤ìº” ê²°ê³¼ ìˆ˜ì§‘
    console.log('Collecting security scan results...');
    results.securityScan = await collectSecurityScanResults();
    
    // 5. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìˆ˜ì§‘
    console.log('Collecting performance test results...');
    results.performanceTests = await collectPerformanceResults();
    
    // 6. í’ˆì§ˆ ê²Œì´íŠ¸ í‰ê°€
    console.log('Evaluating quality gates...');
    const evaluation = await qualityManager.evaluateQuality(results);
    
    // 7. ê²°ê³¼ ì €ì¥
    fs.writeFileSync('quality-report.json', JSON.stringify(evaluation, null, 2));
    
    // 8. ê²°ê³¼ ì¶œë ¥
    printQualityReport(evaluation);
    
    // 9. í’ˆì§ˆ ê²Œì´íŠ¸ í†µê³¼ ì—¬ë¶€ì— ë”°ë¥¸ ì¢…ë£Œ ì½”ë“œ ì„¤ì •
    process.exit(evaluation.passed ? 0 : 1);
    
  } catch (error) {
    console.error('Error evaluating quality gates:', error);
    process.exit(1);
  }
}

async function collectUnitTestResults() {
  try {
    const output = execSync('npm run test:unit -- --json', { encoding: 'utf8' });
    const results = JSON.parse(output);
    
    return {
      total: results.numTotalTests,
      passed: results.numPassedTests,
      failed: results.numFailedTests,
      percentage: (results.numPassedTests / results.numTotalTests) * 100
    };
  } catch (error) {
    console.error('Failed to collect unit test results:', error.message);
    return { total: 0, passed: 0, failed: 0, percentage: 0 };
  }
}

async function collectCoverageResults() {
  try {
    const output = execSync('npm run test:coverage', { encoding: 'utf8' });
    
    // ì»¤ë²„ë¦¬ì§€ ê²°ê³¼ì—ì„œ í¼ì„¼í‹°ì§€ ì¶”ì¶œ
    const coverageMatch = output.match(/All files[^|]*\|([^|]*)/);
    if (coverageMatch) {
      const coverage = parseFloat(coverageMatch[1]);
      return { percentage: coverage };
    }
    
    return { percentage: 0 };
  } catch (error) {
    console.error('Failed to collect coverage results:', error.message);
    return { percentage: 0 };
  }
}

function printQualityReport(evaluation) {
  console.log('\nQuality Gate Report');
  console.log('========================');
  console.log(`Overall Score: ${evaluation.overallScore.toFixed(1)}%`);
  console.log(`Status: ${evaluation.passed ? 'PASSED' : 'FAILED'}`);
  console.log('\nGate Details:');
  
  for (const [gateName, gate] of Object.entries(evaluation.gates)) {
    const status = gate.passed ? 'PASS' : 'FAIL';
    console.log(`  ${status} ${gateName}: ${gate.score.toFixed(1)}% (threshold: ${this.gates[gateName].threshold}%)`);
  }
  
  if (evaluation.recommendation) {
    console.log(`\nRecommendation: ${evaluation.recommendation}`);
  }
}

// ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
if (require.main === module) {
  evaluateQualityGate();
}

module.exports = { evaluateQualityGate };
```

---

### í•µì‹¬ ì›ì¹™ ìš”ì•½

1. **í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ 70%, í†µí•© í…ŒìŠ¤íŠ¸ 20%, E2E í…ŒìŠ¤íŠ¸ 10%
2. **ìë™í™” ìš°ì„ **: ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ CI/CD íŒŒì´í”„ë¼ì¸ì— í†µí•©
3. **í’ˆì§ˆ ê²Œì´íŠ¸**: ìë™í™”ëœ í’ˆì§ˆ ê²€ì¦ ë° ë°°í¬ ì°¨ë‹¨
4. **í™˜ê²½ ê²©ë¦¬**: ì¼ê´€ëœ í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶• ë° ê´€ë¦¬
5. **ë°ì´í„° ê´€ë¦¬**: ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ë° ì •ë¦¬

### ì‹¤ë¬´ ì ìš© ê°€ì´ë“œ

- **ê°œë°œ ë‹¨ê³„**: í…ŒìŠ¤íŠ¸ ìš°ì„  ê°œë°œ ë° ì§€ì†ì  í†µí•©
- **í…ŒìŠ¤íŠ¸ ë‹¨ê³„**: ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²°ê³¼ ë¶„ì„
- **ë°°í¬ ë‹¨ê³„**: í’ˆì§ˆ ê²Œì´íŠ¸ë¥¼ í†µí•œ ìë™ ë°°í¬ ì œì–´

ì´ëŸ¬í•œ ì›ì¹™ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ì‹ ë¢°ì„± ë†’ì€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì§€ì†ì ìœ¼ë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

