---
title: 네트워크 관리
tags: [linux, network, ip, ifconfig, netstat, ss, firewall, iptables]
updated: 2025-12-08
---

# 네트워크 관리

## 개요

네트워크 인터페이스, 연결, 방화벽 관리 방법. 네트워크 설정은 서버 접근성과 보안에 직접 영향을 준다.

## 네트워크 인터페이스 확인

### ip addr

IP 주소와 인터페이스 정보를 확인한다.

```bash
ip addr show                 # 모든 인터페이스
ip addr show eth0
ip a                         # 간단한 형식
ip -4 addr                   # IPv4만
ip -6 addr                   # IPv6만
```

`ifconfig`보다 최신 명령어다. 대부분의 경우 `ip`를 사용한다.

### ifconfig

네트워크 인터페이스 정보를 확인한다.

```bash
ifconfig
ifconfig eth0
ifconfig -a                 # 비활성 인터페이스 포함
```

구버전 호환성을 위해 남아있다. 최신 시스템에서는 `ip`를 사용한다.

## 네트워크 인터페이스 관리

### ip link

네트워크 링크를 관리한다.

```bash
ip link show
ip link set eth0 up
ip link set eth0 down
ip link set eth0 mtu 1500
```

### ifconfig

인터페이스를 관리한다.

```bash
ifconfig eth0 up
ifconfig eth0 down
ifconfig eth0 192.168.1.10
ifconfig eth0 netmask 255.255.255.0
```

## IP 주소 설정

### ip addr

IP 주소를 설정한다.

```bash
ip addr add 192.168.1.10/24 dev eth0
ip addr del 192.168.1.10/24 dev eth0
ip addr flush dev eth0
```

서브넷 마스크는 CIDR 표기법(/24)을 사용한다.

### ifconfig

IP 주소를 설정한다.

```bash
ifconfig eth0 192.168.1.10 netmask 255.255.255.0
ifconfig eth0:0 192.168.1.11            # 별칭 인터페이스
```

## 라우팅 관리

### ip route

라우팅 테이블을 관리한다.

```bash
ip route show
ip route add default via 192.168.1.1
ip route add 10.0.0.0/8 via 192.168.1.1
ip route del default
```

### route

라우팅 테이블을 관리한다.

```bash
route -n                    # 숫자 형식
route add default gw 192.168.1.1
route del default
```

`-n` 옵션은 호스트명 해석을 하지 않아 빠르다.

## 네트워크 연결 확인

### ss

소켓 통계를 확인한다.

```bash
ss -an
ss -tuln                     # TCP/UDP 리스닝 포트
ss -tulpn                    # 프로세스 정보 포함
ss -o state established
ss -i
ss -s
```

**주요 상태:**
- LISTEN: 리스닝 중
- ESTABLISHED: 연결됨
- TIME-WAIT: 종료 대기
- CLOSE-WAIT: 종료 대기

`netstat`보다 빠르다. 프로세스 정보는 `-p` 옵션으로 확인한다.

### netstat

네트워크 연결 상태를 확인한다.

```bash
netstat -an
netstat -tuln
netstat -tulpn
netstat -rn                  # 라우팅 테이블
netstat -i                   # 인터페이스 통계
netstat -s                   # 프로토콜별 통계
```

최신 시스템에서는 `ss`를 권장한다.

### lsof

열린 포트를 확인한다.

```bash
lsof -i :80
lsof -i tcp:80
lsof -i udp:53
lsof -i -P -n
```

## 네트워크 통계

### ip -s link

인터페이스 통계를 확인한다.

```bash
ip -s link show eth0
```

### ifconfig

인터페이스 통계를 확인한다.

```bash
ifconfig eth0
```

**주요 통계:**
- RX packets: 수신 패킷
- TX packets: 송신 패킷
- RX errors: 수신 에러
- TX errors: 송신 에러

### sar -n

네트워크 통계를 확인한다.

```bash
sar -n DEV 1 10             # 인터페이스 통계
sar -n EDEV 1 10             # 에러 통계
sar -n TCP 1 10
```

## 네트워크 테스트

### ping

호스트 연결을 테스트한다.

```bash
ping 8.8.8.8
ping -c 4 8.8.8.8
ping -i 2 8.8.8.8
ping -s 1000 8.8.8.8
```

네트워크 연결 확인의 기본이다. ICMP가 차단된 환경에서는 동작하지 않을 수 있다.

### traceroute

패킷 경로를 추적한다.

```bash
traceroute 8.8.8.8
traceroute -n 8.8.8.8
```

### mtr

ping과 traceroute를 결합한 도구.

```bash
mtr 8.8.8.8
mtr -r -c 10 8.8.8.8
```

설치가 필요할 수 있다. 네트워크 문제 진단에 유용하다.

### telnet / nc

포트 연결을 테스트한다.

```bash
telnet 192.168.1.1 80
nc -zv 192.168.1.1 80       # 포트 스캔
nc -l -p 8080
```

`nc`(netcat)가 더 유용하다. 포트 연결 테스트에 자주 사용한다.

### curl

HTTP 요청을 테스트한다.

```bash
curl http://example.com
curl -I http://example.com  # 헤더만
curl -v http://example.com
curl -X POST http://api.com/data
```

## DNS 확인

### nslookup

DNS 조회를 수행한다.

```bash
nslookup example.com
nslookup -type=MX example.com
```

### dig

DNS 조회를 수행한다.

```bash
dig example.com
dig @8.8.8.8 example.com
dig MX example.com
dig +short example.com
```

`dig`가 더 상세한 정보를 제공한다. DNS 문제 진단에 유용하다.

### host

호스트명을 조회한다.

```bash
host example.com
host -t MX example.com
```

## 방화벽 관리

### iptables

패킷 필터링 규칙을 관리한다.

```bash
iptables -L
iptables -L -n              # 숫자 형식
iptables -L -v
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -D INPUT -p tcp --dport 80 -j ACCEPT
iptables -F                 # 모든 규칙 삭제
iptables -S
```

규칙을 추가한 후 `iptables-save`로 저장한다. 실수로 모든 규칙을 삭제하지 않도록 주의한다.

### firewalld (RHEL/CentOS)

방화벽을 관리한다.

```bash
firewall-cmd --list-all
firewall-cmd --list-ports
firewall-cmd --add-port=80/tcp
firewall-cmd --remove-port=80/tcp
firewall-cmd --add-service=http
firewall-cmd --reload
firewall-cmd --permanent --add-port=80/tcp
```

`--permanent` 옵션 없이 추가한 규칙은 재시작 시 사라진다.

### ufw (Ubuntu/Debian)

방화벽을 관리한다.

```bash
ufw status
ufw enable
ufw disable
ufw allow 80/tcp
ufw deny 22/tcp
ufw delete allow 80/tcp
ufw reload
```

## 네트워크 설정 파일

### /etc/network/interfaces (Debian/Ubuntu)

```bash
# /etc/network/interfaces
auto eth0
iface eth0 inet static
    address 192.168.1.10
    netmask 255.255.255.0
    gateway 192.168.1.1
    dns-nameservers 8.8.8.8
```

### /etc/sysconfig/network-scripts/ifcfg-eth0 (RHEL/CentOS)

```bash
# /etc/sysconfig/network-scripts/ifcfg-eth0
TYPE=Ethernet
BOOTPROTO=static
NAME=eth0
DEVICE=eth0
ONBOOT=yes
IPADDR=192.168.1.10
NETMASK=255.255.255.0
GATEWAY=192.168.1.1
DNS1=8.8.8.8
```

### NetworkManager (최신 배포판)

```bash
nmcli connection show
nmcli connection up eth0
nmcli connection down eth0
nmcli device status
```

## 네트워크 문제 해결

### 연결 문제

```bash
# 1. 인터페이스 상태 확인
ip link show

# 2. IP 주소 확인
ip addr show

# 3. 라우팅 확인
ip route show

# 4. DNS 확인
dig example.com

# 5. 연결 테스트
ping 8.8.8.8
```

### 포트 문제

```bash
# 1. 포트 리스닝 확인
ss -tulpn | grep 80

# 2. 방화벽 확인
iptables -L -n
firewall-cmd --list-all

# 3. 연결 테스트
nc -zv localhost 80
```

### 성능 문제

```bash
# 1. 네트워크 통계 확인
sar -n DEV 1 10

# 2. 에러 확인
sar -n EDEV 1 10

# 3. 패킷 캡처
tcpdump -i eth0 -n
```

네트워크 문제는 단계적으로 확인한다. 물리적 연결부터 시작한다.
