---
title: AWS CDN CloudFront
tags: [aws, networking-and-content-delivery, cdn]
updated: 2025-12-07
---

# AWS CloudFront CDN

## 개요

CloudFront는 AWS의 CDN(Content Delivery Network) 서비스다. 전 세계 엣지 로케이션에 콘텐츠를 캐싱해 사용자에게 빠르게 전달한다.

## CDN이란?

CDN은 웹 콘텐츠를 전 세계 여러 지역에 분산 저장하여 사용자에게 빠르게 전달하는 네트워크 인프라다.

### CDN이 해결하는 문제

**지연 시간 문제:**
- 사용자가 한국에 있는데 미국 서버에서 이미지를 받아오면 200-300ms의 지연이 발생
- CDN을 사용하면 한국 엣지 서버에서 20-50ms로 단축

**서버 부하 문제:**
- 원본 서버에 모든 요청이 몰리면 서버 다운 위험
- CDN이 요청을 분산시켜 원본 서버 부하 감소

**대역폭 비용 문제:**
- 원본 서버에서 직접 전송하면 높은 대역폭 비용
- CDN을 통해 지역별로 분산 전송하여 비용 절약

### CDN의 작동 메커니즘

1. 캐싱: 자주 요청되는 콘텐츠를 엣지 서버에 저장
2. 지리적 분산: 전 세계 400개 이상의 엣지 로케이션에 서버 배치
3. 지능적 라우팅: 사용자와 가장 가까운 서버로 자동 라우팅
4. 캐시 무효화: 콘텐츠 업데이트 시 캐시 자동 갱신

**실무 팁:**
정적 콘텐츠(이미지, CSS, JS)는 CDN을 사용하면 성능과 비용 모두 개선된다.

## CloudFront 핵심 개념

### 오리진(Origin)

콘텐츠의 원본이 저장된 서버다. CloudFront는 다양한 오리진을 지원한다.

**지원하는 오리진:**
- S3 버킷: 정적 웹사이트, 이미지, 동영상 등
- EC2 인스턴스: 동적 웹 애플리케이션
- ELB: 로드 밸런서 뒤의 여러 서버
- API Gateway: REST API 엔드포인트
- 사용자 정의 서버: 온프레미스나 다른 클라우드 서버

**실무 팁:**
S3 버킷을 오리진으로 사용하면 가장 간단하고 비용 효율적이다.

### 엣지 로케이션(Edge Location)

사용자와 가까운 지역에 위치한 CDN 서버다. 전 세계 주요 도시에 배치되어 있다.

**주요 엣지 로케이션:**
- 아시아: 서울, 도쿄, 싱가포르, 뭄바이, 홍콩
- 유럽: 런던, 프랑크푸르트, 파리, 스톡홀름
- 아메리카: 뉴욕, 로스앤젤레스, 상파울루, 토론토

### 배포(Distribution)

CloudFront에서 생성하는 콘텐츠 제공 단위다. 각 배포는 고유한 도메인명을 가진다.

**배포 유형:**
- Web Distribution: 웹사이트, API, 동적 콘텐츠용
- RTMP Distribution: 실시간 스트리밍용 (현재 지원 중단)

### 캐싱 정책(Cache Policy)

콘텐츠가 얼마나 오래 캐시될지 결정하는 규칙이다.

**캐싱 전략:**
- 정적 자산: CSS, JS, 이미지 - 1년 캐싱
- HTML 페이지: 1시간 캐싱
- API 응답: 5분 캐싱
- 개인화 콘텐츠: 캐싱 비활성화

**실무 팁:**
캐싱 정책을 잘 설정하면 원본 서버 부하를 크게 줄일 수 있다. 정적 자산은 최대한 길게 캐싱한다.

## 구축 과정

### 1단계: S3 버킷 준비

**S3 버킷 생성 및 설정:**
1. AWS 콘솔에서 S3 서비스 선택
2. "버킷 만들기" 클릭
3. 버킷명 입력 (전 세계적으로 고유해야 함)
4. 리전 선택 (가장 많은 사용자가 있는 지역)
5. 퍼블릭 액세스 차단 설정 해제
6. 버킷 정책으로 퍼블릭 읽기 권한 부여

**정적 웹사이트 파일 업로드:**
- HTML, CSS, JavaScript 파일을 버킷에 업로드
- 각 파일의 Content-Type을 올바르게 설정
- 폴더 구조를 웹사이트 구조에 맞게 구성

**실무 팁:**
버킷 정책을 잘못 설정하면 보안 위험이 있다. 퍼블릭 읽기는 필요한 파일에만 적용한다.

### 2단계: CloudFront 배포 생성

**배포 설정 구성:**
1. CloudFront 콘솔에서 "배포 만들기" 선택
2. 오리진 도메인을 S3 버킷으로 설정
3. 뷰어 프로토콜 정책을 "HTTPS로 리디렉션" 설정
4. 캐싱 동작 설정:
   - 기본 TTL: 86400초 (24시간)
   - 최대 TTL: 31536000초 (1년)
   - 최소 TTL: 0초

**고급 설정:**
- 압축 활성화: HTML, CSS, JS 파일 자동 압축
- 지리적 제한: 특정 국가만 접근 허용
- WAF 연동: 웹 애플리케이션 방화벽 설정

**실무 팁:**
압축을 활성화하면 전송 데이터 크기가 줄어 비용이 절감된다.

### 3단계: 사용자 정의 도메인 연결

**Route 53을 통한 도메인 연결:**
1. Route 53에서 호스팅 영역 생성
2. CloudFront 배포의 도메인명을 Alias 레코드로 설정
3. SSL/TLS 인증서를 AWS Certificate Manager에서 발급
4. CloudFront 배포에 인증서 연결

**도메인 설정 완료:**
- www.example.com → CloudFront 배포
- example.com → www.example.com으로 리디렉션
- HTTPS 강제 적용

**실무 팁:**
ACM 인증서는 us-east-1 리전에서 발급해야 CloudFront에서 사용할 수 있다.

## 성능 최적화

### 캐싱 최적화

**콘텐츠별 캐싱 전략:**
- 이미지 파일: 1년 캐싱, WebP 형식 사용
- CSS/JS 파일: 1년 캐싱, 버전 관리 (파일명에 해시 추가)
- HTML 파일: 1시간 캐싱, ETag 활용
- API 응답: 5분 캐싱, 개인화 데이터는 캐싱 제외

**캐시 무효화 전략:**
- 전체 무효화는 비용이 높으므로 특정 경로만 무효화
- 배포 시 자동 무효화 스크립트 작성
- 캐시 무효화 대신 버전 관리 방식 선호

**실무 팁:**
캐시 무효화는 비용이 발생한다. 파일명에 버전을 포함하면 무효화 없이도 새 파일을 배포할 수 있다.

### 압축 및 최적화

**압축 설정:**
- Gzip 압축 활성화
- 압축 가능한 콘텐츠 타입 설정
- 이미지는 사전 압축하여 업로드

**이미지 최적화:**
- WebP 형식 사용 (브라우저 지원 시)
- 반응형 이미지 구현
- 지연 로딩(Lazy Loading) 적용

**실무 팁:**
이미지는 사전에 압축하여 업로드하면 전송 비용을 줄일 수 있다.

### 네트워크 최적화

**HTTP/2 활용:**
- CloudFront는 HTTP/2를 자동 지원
- 멀티플렉싱으로 동시 요청 처리
- 서버 푸시 기능 활용

**지리적 분산:**
- 사용자 위치에 맞는 엣지 로케이션 선택
- 다중 리전 배포로 가용성 향상

## 비용 관리 및 보안

### 비용 최적화

**과금 구조:**
- 데이터 전송 비용: 지역별로 차등 과금
- 요청 비용: 10,000회 요청당 과금
- 캐시 무효화 비용: 경로당 과금

**비용 절약 방법:**
- 캐시 히트율 향상으로 데이터 전송 비용 절약
- 불필요한 캐시 무효화 최소화
- 이미지 압축으로 대역폭 사용량 감소
- 적절한 TTL 설정으로 원본 서버 요청 감소

**실무 팁:**
캐시 히트율이 높을수록 비용이 절감된다. 정적 자산은 최대한 길게 캐싱한다.

### 보안 강화

**HTTPS 강제 적용:**
- 모든 트래픽을 HTTPS로 리디렉션
- HSTS 헤더 설정으로 브라우저 캐싱
- SSL/TLS 인증서 자동 갱신

**WAF 연동:**
- SQL 인젝션, XSS 공격 차단
- DDoS 공격 방어
- 지리적 제한으로 특정 국가 차단

**보안 헤더 설정:**
- X-Frame-Options: 클릭재킹 방지
- X-Content-Type-Options: MIME 타입 스니핑 방지
- X-XSS-Protection: XSS 공격 방지
- Strict-Transport-Security: HTTPS 강제

**실무 팁:**
WAF를 연동하면 보안이 강화되지만 비용이 추가된다. 필요에 따라 사용한다.

## 모니터링 및 운영

### 성능 모니터링

**주요 지표:**
- 캐시 히트율: 90% 이상 목표
- 평균 응답 시간: 100ms 이하 목표
- 오류율: 1% 이하 목표
- 데이터 전송량: 월별 트렌드 분석

**모니터링 도구:**
- CloudWatch: AWS 네이티브 모니터링
- Real User Monitoring: 실제 사용자 경험 측정
- WebPageTest: 상세한 성능 분석

**실무 팁:**
CloudWatch 대시보드를 만들어 주요 지표를 모니터링한다. 캐시 히트율이 낮으면 TTL을 조정한다.

### 운영 고려사항

**배포 프로세스:**
1. 개발 환경에서 테스트
2. 스테이징 환경에서 검증
3. 프로덕션 배포
4. 캐시 무효화 (필요시)
5. 성능 모니터링

**장애 대응:**
- 다중 오리진 설정으로 가용성 확보
- 헬스 체크 설정으로 장애 자동 감지
- 백업 오리진으로 자동 페일오버

**정기 점검:**
- 월간 비용 분석 및 최적화
- 분기별 성능 리뷰
- 연간 아키텍처 검토

## 참고

- AWS CloudFront 공식 문서: https://docs.aws.amazon.com/cloudfront/
- CloudFront 요금 정책: https://aws.amazon.com/cloudfront/pricing/
- AWS Well-Architected Framework: https://aws.amazon.com/architecture/well-architected/
