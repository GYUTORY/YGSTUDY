# AWS S3 (Simple Storage Service) 💾

## 개요
Amazon S3는 인터넷을 위한 객체 스토리지 서비스로, 업계 최고의 확장성, 데이터 가용성, 보안 및 성능을 제공합니다. S3는 다양한 사용 사례에 대해 안정적이고 안전한 데이터 스토리지를 제공합니다.

> 💡 **실제 사용 예시**: Netflix는 S3를 사용하여 전 세계 사용자들에게 영화와 TV 프로그램을 스트리밍하고 있습니다. 매일 수백만 건의 요청을 처리하면서도 99.999999999%의 내구성을 유지합니다.

## 주요 특징

### 1. 객체 스토리지
- 파일을 객체로 저장
  - 각 객체는 고유한 키(이름)와 메타데이터를 가짐
  - 객체는 버킷(Bucket)이라는 컨테이너에 저장
  - 객체 크기: 최소 0바이트, 최대 5TB
  - 메타데이터: 최대 2KB

> 🔍 **실제 구현 예시**:
> ```json
> {
>   "Key": "images/profile/2024/user123.jpg",
>   "Size": 1024,
>   "LastModified": "2024-03-20T10:00:00Z",
>   "ETag": "\"d41d8cd98f00b204e9800998ecf8427e\"",
>   "StorageClass": "STANDARD"
> }
> ```

### 2. 내구성과 가용성
- 99.999999999%(11개의 9)의 내구성
  - 1,000,000개의 객체 중 1개만 손실될 확률
  - 연간 0.000000001%의 데이터 손실 가능성
- 99.99%의 가용성
  - 월간 다운타임이 52.56분 이하
- 여러 가용 영역에 데이터 자동 복제
  - 최소 3개의 가용 영역에 데이터 저장
  - 동시 장애 발생 시에도 데이터 보호

### 3. 스토리지 클래스
#### S3 Standard
- 자주 액세스하는 데이터
- 가장 높은 가용성과 성능
- 가격: $0.023/GB/월 (us-east-1 기준)
- 사용 사례: 콘텐츠 배포, 동적 웹사이트, 빅데이터 분석

#### S3 Intelligent-Tiering
- 액세스 패턴이 불규칙한 데이터
- 자동으로 최적의 스토리지 티어 선택
- 모니터링 및 분석 비용 없음
- 사용 사례: 사용자 생성 콘텐츠, 로그 데이터

#### S3 Standard-IA (Infrequent Access)
- 자주 액세스하지 않는 데이터
- Standard보다 40% 저렴
- 최소 30일 보관 필요
- 사용 사례: 백업, 재해 복구, 장기 저장 데이터

#### S3 One Zone-IA
- 단일 가용 영역에 저장
- Standard-IA보다 20% 저렴
- 사용 사례: 재생성 가능한 데이터, 보조 백업

#### S3 Glacier
- 장기 보관 데이터
- 검색 시간: 분~시간
- 가격: $0.004/GB/월
- 사용 사례: 규제 준수, 장기 백업

#### S3 Glacier Deep Archive
- 가장 저렴한 스토리지 옵션
- 검색 시간: 12시간
- 가격: $0.00099/GB/월
- 사용 사례: 7년 이상 보관 데이터

### 4. 보안 기능 🔐
#### 서버 측 암호화 (SSE)
- SSE-S3: AWS 관리 키
- SSE-KMS: AWS KMS 관리 키
- SSE-C: 고객 제공 키

#### 접근 제어
- IAM 정책
  ```json
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Action": [
          "s3:GetObject",
          "s3:PutObject"
        ],
        "Resource": "arn:aws:s3:::my-bucket/*"
      }
    ]
  }
  ```
- 버킷 정책
- ACL (Access Control List)
- VPC 엔드포인트
- MFA 삭제

### 5. 데이터 관리
#### 수명 주기 정책
```json
{
  "Rules": [
    {
      "ID": "Move to Glacier",
      "Status": "Enabled",
      "Transitions": [
        {
          "Days": 90,
          "StorageClass": "GLACIER"
        }
      ]
    }
  ]
}
```

#### 버전 관리
- 객체의 모든 버전 유지
- 실수로 삭제된 데이터 복구
- 이전 버전으로 롤백 가능

#### 크로스 리전 복제
- 다른 리전에 자동 복제
- 지연 시간 최소화
- 규제 준수

## 주요 사용 사례

### 1. 데이터 레이크
- 대규모 데이터 저장 및 분석
  - AWS Glue와 통합
  - Amazon Athena로 SQL 쿼리
  - Amazon EMR로 빅데이터 처리
- 실제 구현 예시:
  ```python
  import boto3
  
  s3 = boto3.client('s3')
  
  # 데이터 레이크에 파일 업로드
  s3.upload_file(
    'local_file.csv',
    'my-data-lake',
    'raw/2024/03/20/data.csv'
  )
  ```

### 2. 백업 및 복구
- 데이터 백업
  - AWS Backup과 통합
  - 자동화된 백업 스케줄링
  - 복구 시간 목표(RTO) 최적화
- 재해 복구
  - 크로스 리전 복제
  - 다중 가용 영역 배포
  - 자동화된 복구 프로세스

### 3. 정적 웹사이트 호스팅
- HTML, CSS, JavaScript 파일 호스팅
- CloudFront와 통합
- SSL/TLS 지원
- 예시 구성:
  ```json
  {
    "IndexDocument": {
      "Suffix": "index.html"
    },
    "ErrorDocument": {
      "Key": "error.html"
    }
  }
  ```

### 4. 미디어 스토리지
- 이미지, 비디오, 오디오 파일 저장
- CloudFront와 통합
- 미디어 변환 및 처리
- 예시: 이미지 처리 파이프라인
  ```python
  def process_image(bucket, key):
      s3 = boto3.client('s3')
      response = s3.get_object(Bucket=bucket, Key=key)
      image = Image.open(response['Body'])
      # 이미지 처리 로직
      return processed_image
  ```

### 5. 로그 저장
- 서버 로그
- 애플리케이션 로그
- 감사 로그
- CloudWatch와 통합

## 모범 사례

### 1. 버킷 명명
- 전역적으로 고유한 이름 사용
  - 예: `company-name-prod-logs-2024`
- DNS 호환 이름 사용
  - 소문자, 숫자, 하이픈만 사용
  - 3-63자 길이
- 명명 규칙 예시:
  ```
  {company}-{environment}-{purpose}-{region}
  ```

### 2. 보안
- 최소 권한 원칙 적용
- 버킷 정책과 IAM 정책 조합 사용
- 암호화 활성화
- 정기적인 보안 감사

### 3. 비용 최적화
- 적절한 스토리지 클래스 선택
- 수명 주기 정책 설정
- 불필요한 데이터 정리
- 비용 모니터링 및 알림 설정

### 4. 성능
- 멀티파트 업로드 사용
  - 대용량 파일 업로드
  - 업로드 재개 기능
- 적절한 키 이름 구조 사용
  - 접두사 분산
  - 날짜 기반 구조
- CloudFront와 함께 사용
  - 엣지 로케이션 활용
  - 캐싱 최적화

## 제한 사항 ⚠️
- 단일 객체 크기 제한: 5TB
- 버킷당 객체 수 제한: 무제한
- 버킷 이름 길이: 3-63자
- 버킷당 버킷 정책 크기: 20KB
- 초당 요청 제한: 3,500 PUT/COPY/POST/DELETE, 5,500 GET/HEAD

## 가격 정책
### 스토리지 비용
- Standard: $0.023/GB/월
- Standard-IA: $0.0125/GB/월
- One Zone-IA: $0.01/GB/월
- Glacier: $0.004/GB/월
- Glacier Deep Archive: $0.00099/GB/월

### 요청 비용
- GET 요청: $0.0004/1,000건
- PUT 요청: $0.005/1,000건
- DELETE 요청: 무료

### 데이터 전송 비용
- 인바운드: 무료
- 아웃바운드: $0.09/GB (첫 1TB)

## 결론
AWS S3는 확장 가능하고 안전한 객체 스토리지 서비스로, 다양한 사용 사례에 적합합니다. 적절한 설정과 모범 사례를 따르면 비용 효율적이고 안전한 데이터 스토리지 솔루션을 구축할 수 있습니다.

> 💡 **팁**: S3를 처음 사용하는 경우, AWS S3 콘솔에서 제공하는 "Getting Started" 가이드를 참고하세요. 또한 AWS S3 문서와 함께 AWS S3 개발자 가이드를 읽어보는 것을 추천합니다.
