---
title: AWS 로드 밸런서 완전 가이드: ALB vs NLB vs ELB
tags: [aws, loadbalancer, lb, alb, nlb, elb]
updated: 2025-09-23
---

# AWS 로드 밸런서 완전 가이드: ALB vs NLB vs ELB

## 목차
- [1. 로드 밸런싱의 기본 개념](#1-로드-밸런싱의-기본-개념)
- [2. AWS 로드 밸런서 개요](#2-aws-로드-밸런서-개요)
- [3. ALB (Application Load Balancer)](#3-alb-application-load-balancer)
- [4. NLB (Network Load Balancer)](#4-nlb-network-load-balancer)
- [5. ELB (Elastic Load Balancer)](#5-elb-elastic-load-balancer)
- [6. 상세 비교 분석](#6-상세-비교-분석)
- [7. 선택 가이드라인](#7-선택-가이드라인)
- [8. 실제 운영 시 고려사항](#8-실제-운영-시-고려사항)
- [9. 참조](#9-참조)

---

## 1. 로드 밸런싱의 기본 개념

### 1.1 로드 밸런싱이란?

**로드 밸런싱(Load Balancing)**은 들어오는 네트워크 트래픽을 여러 서버나 컴퓨팅 리소스에 분산시켜 처리하는 기술입니다. 이는 단일 서버에 과부하가 집중되는 것을 방지하고, 전체 시스템의 가용성과 성능을 향상시키는 핵심적인 역할을 합니다.

### 1.2 로드 밸런싱의 핵심 목적

#### 1.2.1 트래픽 분산
- **균등 분산**: 모든 서버가 동일한 양의 트래픽을 처리하도록 분배
- **가중치 기반 분산**: 서버의 성능이나 용량에 따라 차등적으로 트래픽 할당
- **지리적 분산**: 사용자의 위치에 따라 가장 가까운 서버로 라우팅

#### 1.2.2 고가용성 확보
- **장애 격리**: 한 서버에 문제가 발생해도 다른 서버들이 서비스 지속
- **자동 복구**: 장애 서버를 자동으로 감지하고 트래픽에서 제외
- **무중단 서비스**: 서버 추가/제거 시에도 서비스 중단 없이 운영

#### 1.2.3 성능 최적화
- **응답 시간 단축**: 가장 빠른 서버로 요청 라우팅
- **처리량 증대**: 여러 서버의 병렬 처리로 전체 처리량 향상
- **리소스 효율성**: 서버 리소스의 균등한 활용

### 1.3 OSI 7계층과 로드 밸런싱

로드 밸런서는 OSI 7계층 모델의 어느 계층에서 동작하느냐에 따라 그 특성과 기능이 달라집니다:

#### 1.3.1 4계층 (Transport Layer) 로드 밸런싱
- **특징**: TCP/UDP 패킷의 IP 주소와 포트 번호만을 기반으로 분산
- **장점**: 빠른 처리 속도, 낮은 지연시간, 단순한 구조
- **단점**: 애플리케이션 레벨의 세밀한 제어 불가능
- **사용 사례**: 데이터베이스 연결, 게임 서버, 실시간 통신

#### 1.3.2 7계층 (Application Layer) 로드 밸런싱
- **특징**: HTTP/HTTPS 요청의 내용을 분석하여 라우팅 결정
- **장점**: 세밀한 라우팅 제어, 콘텐츠 기반 분산, 보안 기능
- **단점**: 상대적으로 높은 지연시간, 복잡한 구조
- **사용 사례**: 웹 애플리케이션, API 서버, 마이크로서비스

---

## 2. AWS 로드 밸런서 개요

### 2.1 AWS Elastic Load Balancing (ELB) 서비스

AWS의 **Elastic Load Balancing**은 클라우드 환경에서 제공되는 완전 관리형 로드 밸런싱 서비스입니다. 이 서비스는 하드웨어 설치나 소프트웨어 구성 없이도 즉시 사용할 수 있으며, 자동으로 확장되고 고가용성을 제공합니다.

### 2.2 AWS 로드 밸런서의 핵심 특징

#### 2.2.1 완전 관리형 서비스
- **자동 확장**: 트래픽 증가에 따라 자동으로 용량 확장
- **자동 복구**: 장애 발생 시 자동으로 대체 리소스 할당
- **무중단 운영**: AWS가 백그라운드에서 모든 관리 작업 수행

#### 2.2.2 다중 가용영역 지원
- **지역 분산**: 여러 가용영역에 걸쳐 로드 밸런서 인스턴스 배치
- **장애 격리**: 한 가용영역 장애 시에도 다른 영역에서 서비스 지속
- **지연시간 최적화**: 사용자와 가장 가까운 가용영역으로 트래픽 라우팅

#### 2.2.3 보안 통합
- **AWS WAF 통합**: 웹 애플리케이션 방화벽과의 완벽한 연동
- **SSL/TLS 종료**: 인증서 관리와 암호화/복호화 처리
- **VPC 보안**: 가상 사설 클라우드 내에서의 안전한 통신

### 2.3 AWS 로드 밸런서 유형

AWS는 현재 **4가지 유형**의 로드 밸런서를 제공합니다:

1. **ALB (Application Load Balancer)** - 7계층 HTTP/HTTPS 로드 밸런서
2. **NLB (Network Load Balancer)** - 4계층 TCP/UDP 로드 밸런서
3. **GWLB (Gateway Load Balancer)** - 3계층 게이트웨이 로드 밸런서
4. **ELB (Elastic Load Balancer)** - 레거시 로드 밸런서 (구 CLB)

---

## 3. ALB (Application Load Balancer)

### 3.1 ALB의 기본 개념

**Application Load Balancer**는 OSI 7계층의 Application Layer에서 동작하는 고급 로드 밸런서입니다. HTTP/HTTPS 트래픽을 처리하는데 특화되어 있으며, 현대적인 웹 애플리케이션과 마이크로서비스 아키텍처에 최적화되어 있습니다.

### 3.2 ALB의 핵심 아키텍처

#### 3.2.1 7계층 처리 방식
ALB는 HTTP/HTTPS 요청의 세부 내용을 분석하여 라우팅 결정을 내립니다:

- **HTTP 헤더 분석**: Host, User-Agent, Authorization 등의 헤더 정보 활용
- **URL 경로 분석**: 요청 경로를 기반으로 한 세밀한 라우팅
- **HTTP 메서드 분석**: GET, POST, PUT 등 메서드별 라우팅
- **쿼리 파라미터 분석**: URL의 쿼리 스트링을 통한 조건부 라우팅

#### 3.2.2 타겟 그룹 기반 아키텍처
ALB는 **타겟 그룹(Target Group)**이라는 개념을 도입하여 유연한 트래픽 분산을 제공합니다:

- **다중 타겟 그룹**: 하나의 ALB가 여러 타겟 그룹을 관리
- **동적 타겟 관리**: 타겟의 추가/제거가 실시간으로 반영
- **타겟별 헬스 체크**: 각 타겟 그룹마다 독립적인 헬스 체크 설정

### 3.3 ALB의 고급 라우팅 기능

#### 3.3.1 Path-based 라우팅
```
예시: 전자상거래 플랫폼
- /api/users/* → 사용자 관리 서비스
- /api/products/* → 상품 관리 서비스  
- /api/orders/* → 주문 처리 서비스
- /api/payments/* → 결제 처리 서비스
```

#### 3.3.2 Host-based 라우팅
```
예시: 멀티 테넌트 애플리케이션
- api.company1.com → 테넌트 1 전용 서비스
- api.company2.com → 테넌트 2 전용 서비스
- admin.company1.com → 관리자 대시보드
```

#### 3.3.3 HTTP 헤더 기반 라우팅
```
예시: 모바일/웹 분리
- User-Agent: *Mobile* → 모바일 최적화 서비스
- User-Agent: *Desktop* → 데스크톱 서비스
- X-API-Version: v2 → API v2 서비스
```

### 3.4 ALB의 컨테이너 통합

#### 3.4.1 Amazon ECS 통합
- **서비스 디스커버리**: ECS 서비스와 자동 연동
- **동적 포트 매핑**: 컨테이너의 동적 포트를 자동으로 감지
- **태스크 상태 추적**: 컨테이너의 시작/종료를 실시간으로 모니터링

#### 3.4.2 Amazon EKS 통합
- **Kubernetes 서비스 연동**: K8s Service와 ALB 자동 연결
- **Ingress Controller**: AWS Load Balancer Controller를 통한 자동 관리
- **Pod 기반 라우팅**: 개별 Pod까지의 세밀한 트래픽 제어

### 3.5 ALB의 보안 기능

#### 3.5.1 SSL/TLS 처리
- **SSL 종료**: ALB에서 SSL 암호화/복호화 처리
- **인증서 관리**: AWS Certificate Manager와 완벽 통합
- **다중 인증서**: 여러 도메인에 대한 인증서 동시 지원

#### 3.5.2 AWS WAF 통합
- **웹 공격 방어**: SQL 인젝션, XSS 등 웹 공격 차단
- **지역별 접근 제어**: 특정 국가/지역의 접근 차단
- **Rate Limiting**: 요청 빈도 제한으로 DDoS 공격 방어

### 3.6 ALB 사용 시나리오

#### 3.6.1 마이크로서비스 아키텍처
```
전자상거래 플랫폼 예시:
┌─────────────────┐
│   ALB           │
└─────────┬───────┘
          │
    ┌─────┴─────┐
    │           │
┌───▼───┐   ┌───▼───┐   ┌───▼───┐
│ User  │   │ Order │   │Payment│
│Service│   │Service│   │Service│
└───────┘   └───────┘   └───────┘
```

#### 3.6.2 컨테이너 기반 애플리케이션
- **Blue-Green 배포**: 새 버전과 기존 버전 간의 무중단 전환
- **Canary 배포**: 점진적인 트래픽 전환을 통한 안전한 배포
- **A/B 테스팅**: 사용자 그룹별로 다른 버전의 서비스 제공

---

## 4. NLB (Network Load Balancer)

### 4.1 NLB의 기본 개념

**Network Load Balancer**는 OSI 7계층의 Transport Layer(4계층)에서 동작하는 고성능 로드 밸런서입니다. TCP, UDP, TLS 트래픽을 처리하며, **초고성능**과 **초저지연시간**을 제공하는 것이 핵심 특징입니다.

### 4.2 NLB의 아키텍처 특징

#### 4.2.1 4계층 처리 방식
NLB는 패킷의 IP 주소와 포트 번호만을 기반으로 라우팅 결정을 내립니다:

- **패킷 레벨 처리**: 애플리케이션 내용을 분석하지 않고 패킷 헤더만 확인
- **연결 유지**: TCP 연결의 특성을 활용한 효율적인 트래픽 분산
- **프로토콜 투명성**: 상위 계층 프로토콜에 무관하게 동작

#### 4.2.2 고정 IP 주소 지원
NLB의 가장 중요한 특징 중 하나는 **고정 IP 주소**를 제공한다는 것입니다:

- **Elastic IP 할당**: 각 가용영역마다 고정 IP 주소 할당 가능
- **클라이언트 IP 보존**: 원본 클라이언트 IP 주소를 백엔드로 전달
- **DNS 기반 접근**: 고정 IP를 DNS에 등록하여 안정적인 접근 제공

### 4.3 NLB의 성능 특성

#### 4.3.1 초고성능 처리
- **처리량**: 초당 수백만 개의 연결 처리 가능
- **지연시간**: 밀리초 단위의 극도로 낮은 지연시간
- **동시 연결**: 수백만 개의 동시 연결 지원
- **자동 확장**: 트래픽 증가에 따른 자동 용량 확장

#### 4.3.2 성능 최적화 메커니즘
```
NLB 성능 최적화:
┌─────────────────┐
│   클라이언트    │
└─────────┬───────┘
          │
┌─────────▼───────┐
│   NLB (L4)     │ ← 패킷 레벨 처리
└─────────┬───────┘
          │
┌─────────▼───────┐
│   백엔드 서버   │ ← 직접 연결
└─────────────────┘
```

### 4.4 NLB의 프로토콜 지원

#### 4.4.1 TCP 프로토콜
- **연결 지향적**: 안정적인 데이터 전송 보장
- **순서 보장**: 데이터 패킷의 순서 유지
- **에러 감지**: 전송 중 발생한 오류 자동 감지 및 재전송
- **사용 사례**: 데이터베이스 연결, 게임 서버, 파일 전송

#### 4.4.2 UDP 프로토콜
- **비연결 지향적**: 빠른 데이터 전송에 최적화
- **실시간 통신**: 낮은 지연시간이 중요한 애플리케이션
- **사용 사례**: 실시간 스트리밍, VoIP, DNS 서버

#### 4.4.3 TLS 프로토콜
- **보안 통신**: 암호화된 데이터 전송
- **인증서 관리**: SSL/TLS 인증서 처리
- **사용 사례**: 보안이 중요한 금융 거래, 개인정보 처리

### 4.5 NLB의 고급 기능

#### 4.5.1 Cross-Zone Load Balancing
- **가용영역 간 분산**: 여러 가용영역의 타겟에 균등하게 트래픽 분산
- **장애 격리**: 한 가용영역 장애 시에도 서비스 지속
- **지연시간 최적화**: 클라이언트와 가장 가까운 가용영역 우선 선택

#### 4.5.2 Target Health Monitoring
- **TCP 헬스 체크**: 포트 연결 가능 여부 확인
- **HTTP/HTTPS 헬스 체크**: 애플리케이션 레벨 상태 확인
- **커스텀 헬스 체크**: 애플리케이션별 맞춤형 헬스 체크 설정

### 4.6 NLB 사용 시나리오

#### 4.6.1 게임 서버
```
MMORPG 게임 서버 예시:
┌─────────────────┐
│   게임 클라이언트 │
└─────────┬───────┘
          │ TCP 연결
┌─────────▼───────┐
│   NLB           │ ← 고정 IP: 203.0.113.10
└─────────┬───────┘
          │
    ┌─────┴─────┐
    │           │
┌───▼───┐   ┌───▼───┐   ┌───▼───┐
│게임서버│   │게임서버│   │게임서버│
│  #1   │   │  #2   │   │  #3   │
└───────┘   └───────┘   └───────┘
```

#### 4.6.2 데이터베이스 클러스터
- **읽기 전용 복제본**: 읽기 쿼리를 여러 복제본에 분산
- **쓰기 전용 마스터**: 쓰기 작업은 마스터 데이터베이스로 집중
- **장애 복구**: 마스터 장애 시 자동으로 슬레이브 승격

#### 4.6.3 실시간 스트리밍
- **UDP 기반 스트리밍**: 낮은 지연시간의 실시간 비디오 전송
- **CDN 연동**: 여러 지역의 스트리밍 서버와 연동
- **부하 분산**: 수백만 시청자의 동시 접속 처리

---

## 5. ELB (Elastic Load Balancer)

### 5.1 ELB의 기본 개념

**Elastic Load Balancer (ELB)**는 AWS의 **레거시 로드 밸런서**입니다. 이전에는 **Classic Load Balancer (CLB)**라고 불렸으며, AWS가 제공한 최초의 로드 밸런서 서비스입니다. 현재는 새로운 프로젝트에서는 권장되지 않지만, 기존 시스템과의 호환성을 위해 여전히 제공되고 있습니다.

### 5.2 ELB의 역사적 배경

#### 5.2.1 AWS 로드 밸런싱의 진화
```
AWS 로드 밸런서 진화 과정:
2009년: ELB (Classic Load Balancer) 출시
2016년: ALB (Application Load Balancer) 출시  
2017년: NLB (Network Load Balancer) 출시
2019년: GWLB (Gateway Load Balancer) 출시
```

#### 5.2.2 레거시 시스템의 필요성
- **EC2-Classic 지원**: VPC 이전의 클래식 네트워크 환경 지원
- **기존 애플리케이션 호환**: 이미 구축된 시스템의 마이그레이션 지원
- **단순한 구성**: 복잡한 설정 없이 기본적인 로드 밸런싱 제공

### 5.3 ELB의 제한된 기능

#### 5.3.1 기본적인 로드 밸런싱
- **라운드 로빈**: 순차적으로 요청을 각 서버에 분산
- **최소 연결**: 가장 적은 연결을 가진 서버에 요청 전달
- **가중치 기반**: 서버별 가중치에 따른 차등 분산

#### 5.3.2 제한된 프로토콜 지원
- **HTTP/HTTPS**: 웹 애플리케이션용 기본 프로토콜
- **TCP**: 일반적인 TCP 연결 지원
- **SSL/TLS**: 기본적인 암호화 통신 지원

#### 5.3.3 단순한 헬스 체크
- **HTTP 헬스 체크**: 기본적인 HTTP 상태 확인
- **TCP 헬스 체크**: 포트 연결 가능 여부 확인
- **제한된 커스터마이징**: 복잡한 헬스 체크 설정 불가

### 5.4 ELB의 아키텍처 한계

#### 5.4.1 단일 가용영역 제약
- **가용영역 제한**: 모든 인스턴스가 동일한 가용영역에 있어야 함
- **장애 복구 제한**: 가용영역 장애 시 전체 서비스 중단 가능성
- **확장성 제약**: 가용영역 간 부하 분산의 어려움

#### 5.4.2 성능 제한
- **처리량 제한**: ALB나 NLB 대비 낮은 처리 성능
- **지연시간**: 상대적으로 높은 응답 지연시간
- **동시 연결**: 제한된 동시 연결 수 지원

### 5.5 ELB 사용 시나리오

#### 5.5.1 레거시 시스템 유지보수
```
기존 EC2-Classic 환경:
┌─────────────────┐
│   웹 클라이언트  │
└─────────┬───────┘
          │
┌─────────▼───────┐
│   ELB (CLB)    │ ← 레거시 로드 밸런서
└─────────┬───────┘
          │
┌─────────▼───────┐
│ EC2-Classic     │
│ 웹 서버 클러스터 │
└─────────────────┘
```

#### 5.5.2 마이그레이션 중간 단계
- **점진적 마이그레이션**: 기존 시스템을 단계적으로 현대화
- **호환성 유지**: 기존 애플리케이션과의 호환성 보장
- **비용 최적화**: 마이그레이션 완료까지의 임시 솔루션

### 5.6 ELB에서 현대적 로드 밸런서로의 마이그레이션

#### 5.6.1 마이그레이션 고려사항
- **애플리케이션 호환성**: 새로운 로드 밸런서와의 호환성 확인
- **기능 차이점**: ELB에서 제공하지 않는 고급 기능 활용
- **성능 개선**: 마이그레이션을 통한 성능 향상 기대

#### 5.6.2 마이그레이션 전략
1. **ALB 마이그레이션**: HTTP/HTTPS 웹 애플리케이션의 경우
2. **NLB 마이그레이션**: TCP 기반 애플리케이션의 경우
3. **단계적 전환**: Blue-Green 배포를 통한 안전한 전환

---

## 6. 상세 비교 분석

### 6.1 아키텍처 레벨 비교

| 구분 | **ALB** | **NLB** | **ELB(CLB)** |
|------|---------|---------|---------------|
| **동작 계층** | L7 (Application) | L4 (Transport) | L4/L7 (레거시) |
| **처리 방식** | HTTP 요청 내용 분석 | IP/포트 기반 패킷 처리 | 기본적인 요청 처리 |
| **지연시간** | ~10ms | ~1ms | ~20ms |
| **처리량** | 100,000 RPS | 수백만 RPS | 수천 RPS |

### 6.2 기능적 특성 비교

#### 6.2.1 라우팅 기능
```
ALB: 고급 라우팅
├── Path-based 라우팅 (/api/users/*)
├── Host-based 라우팅 (api.example.com)
├── Header-based 라우팅 (User-Agent)
└── Query parameter 라우팅 (?version=v2)

NLB: 기본 라우팅
├── 포트 기반 라우팅
├── 프로토콜 기반 라우팅
└── 고정 연결 유지

ELB: 제한적 라우팅
├── 라운드 로빈
├── 최소 연결
└── 가중치 기반
```

#### 6.2.2 보안 기능
| 보안 기능 | ALB | NLB | ELB |
|-----------|-----|-----|-----|
| **AWS WAF 통합** | ✅ 완벽 지원 | ❌ 미지원 | ❌ 미지원 |
| **SSL/TLS 종료** | ✅ 고급 기능 | ✅ 기본 지원 | ✅ 기본 지원 |
| **HTTP/2 지원** | ✅ 네이티브 지원 | ❌ 미지원 | ❌ 미지원 |
| **WebSocket** | ✅ 완벽 지원 | ✅ 지원 | ⚠️ 제한적 |

### 6.3 성능 및 확장성 비교

#### 6.3.1 처리 성능
```
성능 비교 (상대적 지표):
NLB: ████████████████████ (최고)
ALB: ████████████ (중간)
ELB: ████ (낮음)
```

#### 6.3.2 확장성 특성
- **ALB**: 자동 확장, 컨테이너 친화적, 마이크로서비스 최적화
- **NLB**: 초고성능 확장, 고정 IP 지원, 실시간 애플리케이션 최적화
- **ELB**: 제한적 확장, 레거시 호환, 단순한 웹 서버 클러스터용

### 6.4 비용 구조 비교

#### 6.4.1 요금 모델
| 로드 밸런서 | 시간당 요금 | LCU 요금 | 데이터 처리 요금 |
|-------------|-------------|----------|------------------|
| **ALB** | $0.0225/시간 | $0.008/LCU | $0.008/GB |
| **NLB** | $0.0225/시간 | $0.006/LCU | $0.006/GB |
| **ELB** | $0.025/시간 | - | $0.008/GB |

#### 6.4.2 비용 최적화 고려사항
- **ALB**: 마이크로서비스 환경에서 비용 효율적
- **NLB**: 고성능이 필요한 경우 비용 대비 효과적
- **ELB**: 단순한 웹 서버 클러스터에서 가장 저렴

---

## 7. 선택 가이드라인

### 7.1 ALB를 선택해야 하는 경우

#### 7.1.1 웹 애플리케이션 및 API 서버
```
ALB 선택 기준:
✅ HTTP/HTTPS 기반 애플리케이션
✅ 복잡한 라우팅 규칙 필요
✅ 마이크로서비스 아키텍처
✅ 컨테이너 기반 애플리케이션 (ECS/EKS)
✅ AWS WAF 통합 필요
✅ HTTP/2 또는 WebSocket 지원 필요
```

#### 7.1.2 구체적인 사용 사례
- **전자상거래 플랫폼**: 다양한 서비스(사용자, 상품, 주문, 결제)를 하나의 도메인으로 통합
- **API 게이트웨이**: 여러 마이크로서비스를 하나의 엔드포인트로 통합
- **멀티 테넌트 SaaS**: 고객별로 다른 서비스 인스턴스 제공

### 7.2 NLB를 선택해야 하는 경우

#### 7.2.1 고성능 및 실시간 애플리케이션
```
NLB 선택 기준:
✅ TCP/UDP 기반 애플리케이션
✅ 고정 IP 주소 필요
✅ 초고성능 및 초저지연시간 필요
✅ 게임 서버, 데이터베이스 연결
✅ 실시간 스트리밍 애플리케이션
✅ 금융 거래 시스템
✅ 수백만 요청 처리 필요
```

#### 7.2.2 구체적인 사용 사례
- **MMORPG 게임 서버**: 수만 명의 동시 접속자와 초저지연시간 요구
- **데이터베이스 클러스터**: 읽기 전용 복제본과의 고성능 연결
- **실시간 트레이딩 시스템**: 밀리초 단위의 응답 시간이 중요한 금융 시스템

### 7.3 ELB를 선택해야 하는 경우

#### 7.3.1 레거시 시스템 및 특수 상황
```
ELB 선택 기준:
✅ EC2-Classic 네트워크 사용
✅ 기존 레거시 애플리케이션
✅ 단순한 로드 밸런싱만 필요
✅ 비용이 가장 중요한 요소
✅ 마이그레이션 중간 단계
```

#### 7.3.2 마이그레이션 전략
- **점진적 현대화**: 기존 시스템을 단계적으로 ALB나 NLB로 이전
- **호환성 유지**: 기존 애플리케이션과의 호환성을 보장하면서 전환
- **비용 최적화**: 마이그레이션 완료까지의 임시 솔루션으로 활용

### 7.4 선택 의사결정 트리

```
애플리케이션 요구사항 분석
│
├─ HTTP/HTTPS 기반?
│  ├─ Yes → 복잡한 라우팅 필요?
│  │  ├─ Yes → ALB 선택
│  │  └─ No → 단순한 웹 서버?
│  │     ├─ Yes → ELB 고려
│  │     └─ No → ALB 선택
│  └─ No → TCP/UDP 기반?
│     ├─ Yes → 고성능/고정IP 필요?
│     │  ├─ Yes → NLB 선택
│     │  └─ No → ALB 고려
│     └─ No → 기타 프로토콜
│
├─ 레거시 시스템?
│  ├─ Yes → EC2-Classic?
│  │  ├─ Yes → ELB 선택
│  │  └─ No → 마이그레이션 계획
│  └─ No → 현대적 아키텍처
│
└─ 성능 요구사항
   ├─ 초고성능 필요 → NLB
   ├─ 중간 성능 → ALB
   └─ 기본 성능 → ELB
```

---

## 8. 실제 운영 시 고려사항

### 8.1 스티키 세션 (Session Affinity) 관리

#### 8.1.1 ALB의 스티키 세션
ALB는 **쿠키 기반**의 스티키 세션을 제공합니다:

**Application Cookie 방식:**
- 애플리케이션에서 직접 쿠키 설정
- 완전한 제어권을 애플리케이션에서 보유
- 세션 데이터의 안전성과 일관성 보장

**Load Balancer Cookie 방식:**
- ALB가 자동으로 `AWSALB` 쿠키 생성
- 애플리케이션 수정 없이 스티키 세션 구현
- 쿠키 만료 시간을 ALB에서 관리

**운영 시 주의사항:**
- 스티키 세션 사용 시 특정 타겟에 트래픽 집중 가능성
- 오토스케일링과의 충돌 가능성 고려
- 세션 데이터의 백업 및 복구 전략 필요

#### 8.1.2 NLB의 스티키 세션
NLB는 **소스 IP 기반**의 연결 유지를 제공합니다:

**연결 유지 메커니즘:**
- 동일한 소스 IP에서 오는 요청을 같은 타겟으로 라우팅
- TCP 연결의 특성을 활용한 자연스러운 세션 유지
- 프록시나 NAT 환경에서의 주의 필요

**운영 시 고려사항:**
- 프록시 서버를 통한 접근 시 분산 왜곡 가능성
- SNAT(Source Network Address Translation) 환경에서의 영향
- 클라이언트 IP 보존과 스티키 세션의 균형

### 8.2 헬스 체크 최적화

#### 8.2.1 헬스 체크 경로 설계
**효율적인 헬스 체크 엔드포인트:**
```
/healthz 엔드포인트 설계 원칙:
✅ 외부 의존성 호출 제거 (DB, API 호출 금지)
✅ 최소한의 로직만 포함
✅ 빠른 응답 시간 (100ms 이내)
✅ 애플리케이션 상태만 확인
```

**헬스 체크 응답 예시:**
```json
{
  "status": "healthy",
  "timestamp": "2025-09-23T10:30:00Z",
  "version": "1.2.3",
  "uptime": 86400
}
```

#### 8.2.2 헬스 체크 타이밍 최적화
**권장 설정값:**
- **간격(Interval)**: 15-30초 (짧을수록 빠른 감지, 하지만 오탐 증가)
- **타임아웃(Timeout)**: 애플리케이션 p95 응답시간 + 여유시간
- **건강 임계값(Healthy Threshold)**: 2-3회 (연속 성공 횟수)
- **비건강 임계값(Unhealthy Threshold)**: 2-3회 (연속 실패 횟수)

**운영 시 주의사항:**
- 너무 짧은 간격은 오탐을 증가시킬 수 있음
- 타임아웃이 너무 짧으면 정상 서버도 비건강으로 판단
- 임계값이 너무 낮으면 일시적 장애를 과도하게 반응

#### 8.2.3 NLB TCP 헬스 체크의 한계
**TCP 헬스 체크의 특성:**
- 포트 연결 가능 여부만 확인
- 애플리케이션 레벨 상태는 알 수 없음
- 서버는 살아있지만 애플리케이션이 응답하지 않는 경우 감지 불가

**개선 방안:**
- 가능한 경우 HTTP/HTTPS 헬스 체크로 전환
- 애플리케이션 레벨에서의 상태 모니터링 병행
- 외부 모니터링 도구와의 연동

### 8.3 모니터링 및 로깅

#### 8.3.1 CloudWatch 지표 활용
**주요 모니터링 지표:**

**ALB 지표:**
- `RequestCount`: 처리된 요청 수
- `TargetResponseTime`: 타겟 응답 시간
- `HTTPCode_Target_2XX_Count`: 성공 응답 수
- `HTTPCode_Target_4XX_Count`: 클라이언트 오류 수
- `HTTPCode_Target_5XX_Count`: 서버 오류 수

**NLB 지표:**
- `ActiveFlowCount`: 활성 연결 수
- `NewFlowCount`: 새 연결 수
- `ProcessedBytes`: 처리된 바이트 수
- `TCP_Target_Reset_Count`: TCP 리셋 수

#### 8.3.2 액세스 로그 분석
**ALB 액세스 로그 활용:**
```
로그 분석을 통한 인사이트:
- 사용자 행동 패턴 분석
- 성능 병목 지점 식별
- 보안 위협 탐지
- 트래픽 패턴 기반 용량 계획
```

**로그 기반 알림 설정:**
- 5xx 오류율 임계값 초과 시 알림
- 응답 시간 임계값 초과 시 알림
- 비정상적인 트래픽 패턴 감지 시 알림

### 8.4 보안 고려사항

#### 8.4.1 SSL/TLS 인증서 관리
**AWS Certificate Manager (ACM) 활용:**
- 자동 인증서 갱신
- 다중 도메인 인증서 지원
- 와일드카드 인증서 지원
- 인증서 투명성 로그 자동 등록

**보안 모범 사례:**
- 최신 TLS 버전 사용 (TLS 1.2 이상)
- 강력한 암호화 스위트 사용
- HSTS (HTTP Strict Transport Security) 헤더 설정
- 정기적인 보안 업데이트 적용

#### 8.4.2 AWS WAF 통합
**WAF 규칙 설정:**
- SQL 인젝션 공격 차단
- XSS (Cross-Site Scripting) 공격 차단
- DDoS 공격 방어
- 지리적 접근 제한

**WAF 모니터링:**
- 차단된 요청 패턴 분석
- False Positive 최소화
- 규칙 성능 영향 모니터링

### 8.5 비용 최적화

#### 8.5.1 LCU (Load Balancer Capacity Unit) 최적화
**LCU 구성 요소:**
- **새 연결**: 초당 새 연결 수
- **활성 연결**: 동시 활성 연결 수
- **처리된 바이트**: 시간당 처리된 바이트 수
- **규칙 평가**: ALB의 경우 규칙 평가 횟수

**비용 최적화 전략:**
- 불필요한 규칙 제거 (ALB)
- 연결 재사용 최적화
- 압축 사용으로 데이터 전송량 감소
- 적절한 타겟 그룹 크기 유지

#### 8.5.2 리소스 사용량 모니터링
**비용 모니터링 도구:**
- AWS Cost Explorer를 통한 비용 분석
- CloudWatch를 통한 사용량 모니터링
- AWS Budgets를 통한 비용 알림 설정

**최적화 기회 식별:**
- 사용하지 않는 로드 밸런서 정리
- 적절한 로드 밸런서 유형 선택
- 리전별 비용 차이 고려

---

## 9. 참조

### 9.1 AWS 공식 문서
- [AWS Elastic Load Balancing 사용자 가이드](https://docs.aws.amazon.com/elasticloadbalancing/)
- [Application Load Balancer 사용자 가이드](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/)
- [Network Load Balancer 사용자 가이드](https://docs.aws.amazon.com/elasticloadbalancing/latest/network/)
- [Classic Load Balancer 사용자 가이드](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/)

### 9.2 AWS 아키텍처 센터
- [로드 밸런싱 아키텍처 패턴](https://aws.amazon.com/architecture/load-balancing/)
- [고가용성 아키텍처 설계](https://aws.amazon.com/architecture/high-availability/)
- [마이크로서비스 아키텍처 가이드](https://aws.amazon.com/architecture/microservices/)

### 9.3 AWS 블로그 및 기술 자료
- [AWS Compute Blog - Load Balancing](https://aws.amazon.com/blogs/compute/category/networking-content-delivery/elastic-load-balancing/)
- [AWS re:Invent 세션 자료](https://www.youtube.com/results?search_query=aws+reinvent+load+balancer)
- [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/)

### 9.4 비용 및 성능 분석 도구
- [AWS Simple Monthly Calculator](https://calculator.aws/)
- [AWS Cost Explorer](https://console.aws.amazon.com/cost-management/home#/dashboard)
- [AWS Trusted Advisor](https://console.aws.amazon.com/trustedadvisor/)

### 9.5 커뮤니티 및 학습 자료
- [AWS 한국 사용자 그룹](https://www.meetup.com/awskrug/)
- [AWS Training and Certification](https://aws.amazon.com/training/)
- [AWS 공식 YouTube 채널](https://www.youtube.com/user/AmazonWebServices)

---

*이 문서는 2025년 9월 23일 기준으로 작성되었으며, AWS 서비스의 지속적인 업데이트에 따라 일부 내용이 변경될 수 있습니다. 최신 정보는 AWS 공식 문서를 참조하시기 바랍니다.*
