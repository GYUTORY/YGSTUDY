# AWS Application Load Balancer (ALB) 완벽 가이드 🚀

## 1. ALB란 무엇인가?

Application Load Balancer(ALB)는 AWS에서 제공하는 7계층(Application Layer) 로드 밸런서로, HTTP와 HTTPS 트래픽을 처리하도록 설계되었습니다. ALB는 마이크로서비스 아키텍처와 컨테이너 기반 애플리케이션에 최적화되어 있으며, 고급 라우팅 기능을 제공합니다.

## 2. AWS 로드 밸런서 비교 📊

| 기능 | ALB | NLB | CLB | GWLB |
|------|-----|-----|-----|------|
| 계층 | 7계층 | 4계층 | 4/7계층 | 3계층 |
| 프로토콜 | HTTP/HTTPS | TCP/UDP/TLS | TCP/SSL/TLS/HTTP/HTTPS | IP 패킷 |
| 고정 IP | ❌ | ✅ | ❌ | ✅ |
| 타겟 타입 | EC2, IP, Lambda, 컨테이너 | EC2, IP, ALB | EC2 | EC2, IP |
| SSL 종료 | ✅ | ❌ | ✅ | ❌ |
| WAF 통합 | ✅ | ❌ | ❌ | ❌ |
| 비용 | 중간 | 낮음 | 높음 | 중간 |
| 사용 사례 | 웹 애플리케이션 | TCP/UDP 트래픽 | 레거시 애플리케이션 | 네트워크 트래픽 |

> 💡 **참고**: 
> - ALB: Application Load Balancer
> - NLB: Network Load Balancer
> - CLB: Classic Load Balancer
> - GWLB: Gateway Load Balancer

---

## 3. ALB의 주요 특징

### 3.1 고급 라우팅 기능
- **Path-based 라우팅**: URL 경로에 따라 다른 대상 그룹으로 트래픽을 라우팅
- **Host-based 라우팅**: 호스트 헤더를 기반으로 트래픽 분배
- **Query string 파라미터 기반 라우팅**: URL 쿼리 파라미터에 따른 라우팅
- **HTTP 헤더 기반 라우팅**: HTTP 헤더 값을 기반으로 한 라우팅

### 3.2 컨테이너 지원
- Amazon ECS와 완벽한 통합
- 동적 포트 매핑 지원
- 서비스 디스커버리 기능

### 3.3 보안 기능 🔒
- SSL/TLS 종료
- AWS WAF 통합
- AWS Certificate Manager(ACM) 통합
- AWS Shield 통합

### 3.4 모니터링 및 로깅
- CloudWatch 지표 통합
- 액세스 로깅
- 요청 추적
- 실시간 모니터링

---

## 4. ALB 사용 사례

### 4.1 마이크로서비스 아키텍처
- 서비스 간 트래픽 분배
- 서비스 디스커버리
- A/B 테스팅

### 4.2 컨테이너 기반 애플리케이션
- ECS/EKS 클러스터 로드 밸런싱
- 동적 포트 매핑
- 컨테이너 오케스트레이션

### 4.3 다중 환경 구성
- 개발/스테이징/프로덕션 환경 분리
- Blue/Green 배포
- Canary 배포

---

## 5. ALB 구성 요소

### 5.1 리스너(Listener)
- HTTP/HTTPS 프로토콜 지원
- 포트 설정
- SSL/TLS 인증서 관리

### 5.2 대상 그룹(Target Group)
- EC2 인스턴스
- IP 주소
- Lambda 함수
- 컨테이너

### 5.3 라우팅 규칙
- 조건 설정
- 우선순위 지정
- 리다이렉션 설정

---

## 6. ALB 모범 사례

### 6.1 보안 🔒
- HTTPS 사용
- 보안 그룹 적절히 구성
- WAF 규칙 적용

### 6.2 고가용성
- 다중 AZ 구성
- 자동 스케일링 설정
- 헬스 체크 구성

### 6.3 성능
- 적절한 인스턴스 타입 선택
- 캐싱 전략 수립
- 연결 드레이닝 설정

---

## 7. 비용 최적화 💰

### 7.1 요금 구조
- 시간당 요금
- 데이터 처리량 요금
- LCU(Load Balancer Capacity Units) 기반 요금

### 7.2 비용 절감 전략
- 적절한 인스턴스 크기 선택
- 자동 스케일링 활용
- 리소스 태깅

## 8. 결론

AWS ALB는 현대적인 웹 애플리케이션과 마이크로서비스 아키텍처에 필수적인 서비스입니다. 고급 라우팅 기능, 강력한 보안 기능, 그리고 다양한 통합 옵션을 통해 안정적이고 확장 가능한 애플리케이션을 구축할 수 있습니다. ALB를 효과적으로 활용하면 애플리케이션의 가용성과 성능을 크게 향상시킬 수 있습니다.

---

> 📌 **핵심 포인트**:
> - ALB는 HTTP/HTTPS 트래픽에 최적화된 7계층 로드 밸런서입니다.
> - 마이크로서비스와 컨테이너 환경에서 뛰어난 성능을 발휘합니다.
> - 고급 라우팅 기능과 보안 기능을 제공합니다.
> - 다른 AWS 서비스들과의 통합이 용이합니다.
