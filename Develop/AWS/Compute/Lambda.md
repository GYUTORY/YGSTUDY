# AWS Lambda란 무엇인가?

AWS Lambda는 아마존 웹 서비스(Amazon Web Services, AWS)에서 제공하는 서버리스(Serverless) 컴퓨팅 서비스입니다. 서버리스라는 용어에서 알 수 있듯이, 사용자는 서버를 직접 관리하거나 프로비저닝할 필요 없이 코드를 실행할 수 있습니다. Lambda는 이벤트 기반으로 동작하며, 사용자가 정의한 이벤트(예: S3에 파일 업로드, DynamoDB에 데이터 삽입, API Gateway 호출 등)가 발생할 때마다 지정된 코드를 자동으로 실행합니다.

## Lambda의 기본 개념

Lambda의 가장 큰 특징은 서버 관리의 부담을 완전히 AWS에 맡길 수 있다는 점입니다. 사용자는 오직 비즈니스 로직에 집중하여 코드를 작성하고, 그 코드를 Lambda 함수로 업로드하면 됩니다. AWS는 해당 코드를 실행하기 위한 인프라(서버, OS, 네트워크 등)를 자동으로 관리하고, 필요에 따라 인스턴스를 생성하거나 종료합니다.

### 주요 특징
- **이벤트 기반 실행**: Lambda 함수는 특정 이벤트가 발생할 때마다 자동으로 실행됩니다.
- **자동 확장**: 동시에 수천, 수만 개의 이벤트가 발생해도 Lambda는 자동으로 확장되어 각 이벤트를 병렬로 처리합니다.
- **과금 방식**: 사용한 만큼만 비용을 지불합니다. 함수가 실행된 시간(밀리초 단위)과 사용한 리소스(메모리)에 따라 과금됩니다.
- **서버 관리 불필요**: 서버의 프로비저닝, 패치, 모니터링 등 인프라 관리가 필요 없습니다.
- **다양한 언어 지원**: Python, Node.js, Java, Go, C#, Ruby 등 다양한 언어를 지원합니다.

## 왜 Lambda가 필요한가?

### 1. 서버 관리의 부담 해소
기존에는 애플리케이션을 실행하기 위해 서버를 직접 구매하거나, EC2와 같은 가상 서버를 프로비저닝해야 했습니다. 서버의 용량을 예측하고, 트래픽이 몰릴 때를 대비해 오토스케일링을 설정하는 등 많은 관리 작업이 필요했습니다. Lambda는 이러한 부담을 완전히 없애줍니다. 서버가 필요 없으니, 인프라 관리에 드는 시간과 비용을 절약할 수 있습니다.

### 2. 비용 효율성
Lambda는 코드가 실행된 시간만큼만 비용을 청구합니다. EC2나 ECS와 같은 서비스는 인스턴스가 실행 중인 시간 전체에 대해 비용이 발생하지만, Lambda는 함수가 호출되어 실제로 실행된 시간(최소 1ms 단위)만큼만 과금됩니다. 트래픽이 적거나, 간헐적으로 이벤트가 발생하는 워크로드에 매우 적합합니다.

### 3. 빠른 개발 및 배포
Lambda는 코드를 빠르게 배포하고, 수정할 수 있습니다. 서버를 재시작하거나, 배포 파이프라인을 복잡하게 구성할 필요 없이, 코드를 업로드하고 바로 테스트할 수 있습니다. 또한, AWS의 다양한 서비스와 쉽게 연동할 수 있어, 복잡한 아키텍처도 손쉽게 구현할 수 있습니다.

### 4. 자동 확장
Lambda는 이벤트가 몰릴 때 자동으로 확장됩니다. 예를 들어, 동시에 1,000개의 이벤트가 발생하면, Lambda는 1,000개의 인스턴스를 자동으로 생성해 각 이벤트를 병렬로 처리합니다. 사용자는 최대 동시 실행 제한만 신경 쓰면 됩니다.

### 5. 다양한 활용 사례
- **API 백엔드**: API Gateway와 연동해 REST API, GraphQL API의 백엔드로 활용
- **데이터 처리**: S3에 업로드된 파일 처리, 이미지/동영상 변환, 로그 분석 등
- **자동화**: 인프라 관리 자동화, 배치 작업, 알림 시스템 등
- **IoT**: IoT 디바이스에서 발생하는 이벤트 처리

## 언제 Lambda를 사용해야 하는가?

Lambda는 다음과 같은 상황에서 특히 유용합니다.

### 1. 이벤트 기반 아키텍처
특정 이벤트(예: 파일 업로드, 데이터베이스 변경, 메시지 큐 수신 등)에 따라 코드를 실행해야 할 때 Lambda가 적합합니다. 예를 들어, S3에 이미지가 업로드되면 자동으로 썸네일을 생성하는 작업, DynamoDB에 데이터가 삽입되면 알림을 보내는 작업 등에 Lambda를 사용할 수 있습니다.

### 2. 간헐적이거나 예측 불가능한 트래픽
트래픽이 일정하지 않고, 간헐적으로 이벤트가 발생하는 경우 Lambda가 비용 효율적입니다. EC2나 ECS는 항상 인스턴스를 실행해야 하므로, 트래픽이 적을 때도 비용이 발생하지만, Lambda는 이벤트가 없으면 비용이 들지 않습니다.

### 3. 빠른 프로토타이핑 및 실험
새로운 기능을 빠르게 개발하고, 실험해보고 싶을 때 Lambda를 사용하면 인프라 준비 없이 바로 코드를 배포하고 테스트할 수 있습니다.

### 4. 마이크로서비스 아키텍처
각 기능을 독립적인 Lambda 함수로 분리해 관리할 수 있습니다. 이를 통해 서비스의 유지보수성과 확장성을 높일 수 있습니다.

### 5. 서버 관리가 불필요한 경우
서버의 OS, 패치, 보안 등 인프라 관리에 신경 쓰고 싶지 않을 때 Lambda가 적합합니다.

## Lambda의 한계와 주의사항

Lambda는 매우 강력한 서비스이지만, 모든 상황에 적합한 것은 아닙니다. 다음과 같은 한계가 있습니다.

- **실행 시간 제한**: Lambda 함수는 최대 15분까지만 실행할 수 있습니다. 장시간 실행되는 작업에는 적합하지 않습니다.
- **콜드 스타트**: 함수가 오랫동안 호출되지 않다가 다시 호출되면, 초기화에 시간이 걸릴 수 있습니다(콜드 스타트 현상).
- **로컬 디스크 사용 제한**: 함수 실행 중에만 임시 디스크(/tmp, 최대 10GB)를 사용할 수 있습니다.
- **특정 언어나 라이브러리 제한**: 지원하지 않는 언어나 라이브러리는 사용할 수 없습니다.
- **동시 실행 제한**: 계정별로 동시 실행 제한이 있습니다(기본 1,000개, 요청 시 증가 가능).

## AWS Fargate와 Lambda의 차이

AWS Fargate는 컨테이너 기반의 서버리스 컴퓨팅 서비스입니다. ECS(ECS, EKS)와 연동하여 컨테이너를 실행할 수 있도록 해줍니다. Lambda와 Fargate는 모두 서버리스라는 공통점이 있지만, 사용 목적과 동작 방식에 차이가 있습니다.

### Lambda와 Fargate의 주요 차이점

| 구분 | AWS Lambda | AWS Fargate |
|------|------------|-------------|
| 실행 단위 | 함수(코드) | 컨테이너(이미지) |
| 최대 실행 시간 | 15분 | 제한 없음(컨테이너가 살아있는 한) |
| 사용 목적 | 이벤트 기반, 짧은 작업 | 장시간 실행, 복잡한 서비스 |
| 상태 관리 | 무상태(Stateless) | 상태 관리 가능(컨테이너 내부) |
| 배포 방식 | 코드 업로드 | 컨테이너 이미지 배포 |
| 언어/환경 | 지원 언어 제한 | 모든 언어/환경 가능(컨테이너화) |
| 비용 | 실행 시간/메모리 기준 | vCPU/메모리 기준(컨테이너 실행 시간) |
| 확장성 | 자동 확장 | ECS/EKS의 오토스케일링 활용 |

#### Lambda가 적합한 경우
- 짧고 간단한 작업(예: 이미지 변환, 데이터 처리, 알림 전송 등)
- 이벤트 기반 아키텍처
- 서버 관리가 필요 없는 경우
- 빠른 배포와 실험이 필요한 경우

#### Fargate가 적합한 경우
- 장시간 실행되는 작업(예: 웹 서버, 백엔드 서비스 등)
- 복잡한 라이브러리, 커스텀 런타임, 네이티브 바이너리 필요
- 컨테이너 기반의 마이크로서비스 아키텍처
- 상태를 유지해야 하는 서비스

## 실무에서의 Lambda 활용 예시

### 1. S3 파일 업로드 트리거
사용자가 S3 버킷에 이미지를 업로드하면 Lambda가 자동으로 실행되어 썸네일을 생성하고, 결과를 다른 버킷에 저장합니다. 이 과정에서 서버를 직접 관리할 필요가 없고, 트래픽이 몰려도 Lambda가 자동으로 확장되어 처리합니다.

### 2. 실시간 데이터 처리
IoT 센서에서 발생하는 데이터를 Kinesis 스트림으로 수집하고, Lambda가 이를 실시간으로 분석하여 이상 징후를 감지하거나, 알림을 전송합니다.

### 3. API 백엔드
API Gateway와 Lambda를 연동하여 서버리스 REST API를 구축할 수 있습니다. 사용자는 API Gateway에 HTTP 요청을 보내고, Lambda가 비즈니스 로직을 처리한 후 결과를 반환합니다. 서버 관리가 필요 없고, 트래픽에 따라 자동으로 확장됩니다.

### 4. 자동화 및 배치 작업
정기적으로 실행해야 하는 배치 작업(예: 매일 자정에 데이터 집계, 리포트 생성 등)을 CloudWatch Events(이벤트브리지)와 Lambda를 연동하여 자동화할 수 있습니다.

### 5. Slack/Discord 챗봇
Slack이나 Discord와 같은 메신저 플랫폼에서 특정 명령어가 입력되면, Lambda가 실행되어 정보를 조회하거나, 알림을 전송하는 챗봇을 만들 수 있습니다.

## Lambda 아키텍처 설계 팁

1. **함수는 작고 단순하게**: 하나의 Lambda 함수는 하나의 역할만 담당하도록 설계하는 것이 유지보수에 유리합니다.
2. **환경 변수 활용**: 환경 변수로 설정값을 관리하면, 코드 수정 없이 환경에 따라 동작을 다르게 할 수 있습니다.
3. **로깅과 모니터링**: CloudWatch Logs, X-Ray 등을 활용해 함수의 실행 내역과 성능을 모니터링하세요.
4. **에러 처리**: 예외 상황에 대한 처리를 꼼꼼히 구현하고, DLQ(Dead Letter Queue)나 재시도 정책을 활용하세요.
5. **보안**: 최소 권한 원칙(Least Privilege Principle)을 적용해 Lambda 함수에 필요한 IAM 권한만 부여하세요.
6. **패키지 관리**: 외부 라이브러리가 필요하다면, Layer 기능을 활용해 공통 라이브러리를 효율적으로 관리할 수 있습니다.
7. **콜드 스타트 최소화**: VPC 연결, 대용량 패키지 사용 등은 콜드 스타트를 유발할 수 있으니, 필요 최소한으로만 사용하세요.
8. **동시성 제어**: 계정/함수별 동시 실행 제한을 적절히 설정해 예기치 않은 비용 폭증을 방지하세요.

## 실전 경험담 및 베스트 프랙티스

### 경험 1: 이미지 변환 서비스
한 스타트업에서는 사용자가 이미지를 업로드하면, Lambda가 자동으로 썸네일을 생성해주는 서비스를 구축했습니다. 초기에 EC2로 구현했을 때는 트래픽이 몰릴 때 서버가 부족해 장애가 발생했지만, Lambda로 전환한 후에는 자동 확장 덕분에 장애 없이 서비스를 운영할 수 있었습니다. 또한, 사용량이 적을 때는 비용이 거의 들지 않아, 스타트업 입장에서는 매우 큰 이점이었습니다.

### 경험 2: 실시간 알림 시스템
대형 커머스 플랫폼에서는 주문, 결제, 배송 등 다양한 이벤트가 발생할 때마다 Lambda를 활용해 실시간으로 알림을 전송하고 있습니다. 이벤트가 몰릴 때도 Lambda가 자동으로 확장되어, 지연 없이 알림을 보낼 수 있었습니다. 또한, Lambda의 로그와 모니터링 기능을 활용해 장애 상황을 빠르게 감지하고 대응할 수 있었습니다.

### 경험 3: 비용 최적화
기존에 EC2로 운영하던 배치 작업을 Lambda로 전환한 한 기업은, 월간 인프라 비용이 70% 이상 절감되는 효과를 경험했습니다. Lambda는 사용한 만큼만 비용이 발생하므로, 간헐적으로 실행되는 작업에 매우 적합합니다.

## Lambda와 Fargate 선택 가이드

- **Lambda를 선택해야 하는 경우**
  - 이벤트 기반, 짧은 실행, 서버 관리 불필요, 빠른 배포/실험, 비용 최적화가 중요한 경우
- **Fargate를 선택해야 하는 경우**
  - 장시간 실행, 복잡한 환경/라이브러리, 컨테이너 기반, 상태 관리, 네트워크/스토리지 커스텀 설정이 필요한 경우

## Lambda의 한계 극복 방법

- **실행 시간 제한(15분) 극복**: 작업을 여러 개의 작은 함수로 분할하거나, Step Functions와 연동해 워크플로우로 처리
- **콜드 스타트 최소화**: 프로비저닝된 동시성(Provisioned Concurrency) 기능 활용
- **대용량 패키지 관리**: Lambda Layer로 공통 라이브러리 관리, 필요 없는 파일/코드 최소화
- **VPC 연결 최적화**: VPC 엔드포인트, NAT Gateway 구성 최적화

## Lambda와 연동 가능한 AWS 서비스

- **API Gateway**: REST/HTTP API 백엔드로 Lambda 활용
- **S3**: 파일 업로드/삭제 트리거
- **DynamoDB**: 테이블 변경 트리거
- **Kinesis, SQS**: 실시간 데이터 스트림/메시지 큐 처리
- **CloudWatch Events/EventBridge**: 스케줄링, 이벤트 기반 자동화
- **SNS, SES**: 알림, 이메일 발송
- **Step Functions**: 복잡한 워크플로우 오케스트레이션

## Lambda의 미래와 트렌드

최근에는 서버리스 아키텍처가 점점 더 보편화되고 있습니다. Lambda는 단순한 이벤트 처리뿐만 아니라, 복잡한 마이크로서비스, 데이터 파이프라인, AI/ML 워크플로우 등 다양한 분야에서 활용되고 있습니다. AWS 역시 Lambda의 기능을 지속적으로 확장하고 있으며, 더 많은 언어 지원, 더 빠른 콜드 스타트, 더 유연한 리소스 관리 등 사용자 경험을 개선하고 있습니다.

## 결론

AWS Lambda는 서버 관리의 부담을 없애고, 비용 효율적이며, 빠른 개발과 배포가 가능한 혁신적인 서비스입니다. 이벤트 기반 아키텍처, 간헐적 트래픽, 빠른 실험/배포, 자동 확장 등 다양한 장점을 가지고 있으며, Fargate와 같은 컨테이너 기반 서버리스 서비스와 함께 사용하면 더욱 유연하고 강력한 클라우드 아키텍처를 설계할 수 있습니다. Lambda의 한계와 특징을 잘 이해하고, 적절한 상황에 활용한다면, 누구나 효율적이고 확장성 높은 서비스를 구축할 수 있습니다.

