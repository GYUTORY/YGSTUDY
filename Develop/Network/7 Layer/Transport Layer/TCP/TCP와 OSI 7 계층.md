
# TCP와 OSI 7 계층
- TCP(Transmission Control Protocol)는 인터넷에서 가장 널리 사용되는 전송 계층 프로토콜입니다.
- 데이터를 신뢰성 있게 전송하는 데 중점을 두며, OSI(Open Systems Interconnection) 7 계층 모델의 핵심 구성 요소 중 하나로 동작합니다. 

---

## 1. OSI 7 계층 모델

OSI 7 계층 모델은 네트워크 통신을 이해하고 설계하기 위해 제안된 표준 모델입니다. 데이터가 네트워크를 통해 전달될 때 각 계층에서 특정 작업을 수행하며, 이 과정은 계층적으로 이루어집니다.

### OSI 7 계층 구조와 설명

| 계층 번호 | 계층 이름          | 역할                                                                 |
|-----------|-------------------|----------------------------------------------------------------------|
| 7         | 응용 계층 (Application Layer) | 사용자와 직접 상호작용하는 인터페이스 제공 (예: HTTP, FTP, SMTP) |
| 6         | 표현 계층 (Presentation Layer) | 데이터 형식 변환, 암호화/복호화, 압축 (예: JPEG, ASCII)          |
| 5         | 세션 계층 (Session Layer)     | 연결 세션 설정, 유지 및 종료 (예: NetBIOS)                       |
| 4         | 전송 계층 (Transport Layer)   | 데이터 전달의 신뢰성 보장 (예: TCP, UDP)                          |
| 3         | 네트워크 계층 (Network Layer)  | 데이터 전송 경로 설정 및 라우팅 (예: IP, ICMP)                   |
| 2         | 데이터 링크 계층 (Data Link Layer) | 데이터 전송 오류 제어 및 물리 주소 결정 (예: Ethernet, PPP)  |
| 1         | 물리 계층 (Physical Layer)     | 실제 하드웨어를 통해 데이터 전송 (예: 케이블, 무선)              |

---

## 2. TCP와 OSI 모델에서의 위치

TCP는 OSI 모델의 **4번째 계층(전송 계층)**에 해당합니다. 전송 계층은 데이터를 송신지에서 수신지로 안전하고 신뢰성 있게 전송하는 데 중점을 둡니다.

### TCP의 주요 특징

1. **연결 지향(Connection-Oriented)**:
    - 데이터를 전송하기 전에 클라이언트와 서버 간의 연결을 설정 (3-way handshake)합니다.
    - 연결이 설정된 후에만 데이터 전송이 시작됩니다.

2. **신뢰성 보장(Reliability)**:
    - 데이터 패킷의 순서 보장 (재전송 및 재조립).
    - 손실된 데이터는 다시 요청하여 전송.

3. **흐름 제어(Flow Control)**:
    - 송신자가 너무 많은 데이터를 보내 수신자가 처리하지 못하는 상황을 방지.

4. **혼잡 제어(Congestion Control)**:
    - 네트워크의 혼잡 상태를 감지하고, 데이터 전송 속도를 조정.

---

## 3. TCP의 동작 원리

### (1) 3-Way Handshake (연결 설정)

TCP는 데이터를 전송하기 전에 클라이언트와 서버 간의 연결을 설정합니다. 이 과정은 다음 세 단계로 이루어집니다:

1. **SYN (Synchronize)**: 클라이언트가 서버에 연결 요청을 보냅니다.
2. **SYN-ACK**: 서버가 요청을 수락하고 확인 응답을 보냅니다.
3. **ACK (Acknowledge)**: 클라이언트가 응답을 확인하며 연결이 설정됩니다.

#### 예시:
```plaintext
클라이언트 -> 서버: SYN
서버 -> 클라이언트: SYN-ACK
클라이언트 -> 서버: ACK
```

### (2) 데이터 전송

- 데이터를 작은 단위(패킷)로 나누어 전송합니다.
- 각 패킷에는 순서 번호(Sequence Number)가 포함되어 있어 수신 측에서 원래 데이터 순서를 복원할 수 있습니다.

### (3) 연결 종료

연결 종료는 **4-Way Handshake**로 이루어집니다.

1. **FIN**: 클라이언트가 연결 종료를 요청.
2. **ACK**: 서버가 요청 확인.
3. **FIN**: 서버도 종료 요청.
4. **ACK**: 클라이언트가 요청 확인.

---

## 4. TCP와 UDP 비교

TCP와 UDP는 모두 전송 계층에서 동작하는 프로토콜이지만, 성격과 사용 목적이 다릅니다.

| 특징             | TCP                                       | UDP                            |
|------------------|------------------------------------------|--------------------------------|
| 연결 방식        | 연결 지향 (Connection-Oriented)         | 비연결 지향 (Connectionless)  |
| 신뢰성           | 데이터 손실 방지, 순서 보장              | 신뢰성 없음                   |
| 속도             | 비교적 느림                              | 빠름                          |
| 용도             | 웹, 이메일, 파일 전송 (예: HTTP, FTP)   | 스트리밍, 게임 (예: VoIP, DNS)|

---

## 5. TCP와 OSI 계층의 상호작용

OSI 모델에서 데이터는 각 계층을 거치면서 변환됩니다. TCP는 전송 계층에서 데이터의 신뢰성을 담당하며, 하위 계층(네트워크 계층 및 데이터 링크 계층)과 협력하여 데이터를 전달합니다.

### 데이터 흐름 예시 (웹 요청 과정)
1. **응용 계층 (HTTP)**: 사용자가 웹 페이지를 요청.
2. **전송 계층 (TCP)**: 데이터를 패킷으로 분할하고 순서를 지정.
3. **네트워크 계층 (IP)**: 패킷의 목적지를 설정 (IP 주소).
4. **데이터 링크 계층 (Ethernet)**: 실제 물리 네트워크로 패킷 전송.
5. **물리 계층**: 데이터를 신호로 변환하여 케이블 또는 무선으로 전송.

---

## 6. TCP의 한계와 보완

### (1) 한계
1. **높은 오버헤드**:
    - 신뢰성을 보장하기 위해 추가 데이터(헤더)와 확인 작업이 필요.
    - 데이터 전송 속도가 상대적으로 느릴 수 있음.

2. **단방향성 전송 어려움**:
    - TCP는 양방향 통신을 기본으로 설계되어 단순 브로드캐스트에 비효율적.

### (2) 보완
- 실시간 스트리밍이나 게임에서는 TCP 대신 속도가 빠른 UDP를 사용.
- 혼잡 제어 알고리즘 개선.

---

## 7. 결론

TCP는 OSI 7 계층 중 전송 계층에서 핵심적인 역할을 하며, 데이터를 신뢰성 있게 전송하는 데 필수적입니다. OSI 모델은 네트워크 통신을 체계적으로 이해할 수 있는 기준을 제공하며, TCP는 인터넷과 같은 현대 네트워크의 기반을 이루는 중요한 프로토콜입니다.

---
