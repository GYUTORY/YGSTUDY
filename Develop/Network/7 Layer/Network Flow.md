
# 네트워크 플로우 (Network Flow)

**작성일**: 2025-10-07  
**카테고리**: 네트워크 기초

---

## 1. 개요

### 1.1 WWW (World Wide Web)
- **정의**: 인터넷을 통해 접근할 수 있는 정보 공간
- **특징**: 
  - URL로 문서 등 리소스를 식별
  - 리소스 간 하이퍼링크로 연결
  - 전 세계적으로 분산된 정보 시스템

### 1.2 웹 통신의 기본 구성요소
![웹 통신.jpeg](..%2F..%2F..%2Fetc%2Fimage%2FNetwork_image%2F7Layer%2F%EC%9B%B9%20%ED%86%B5%EC%8B%A0.jpeg)

#### 클라이언트 (Client)
- **정의**: 사용자가 서버에 접속하기 위해 사용하는 프로그램 또는 서비스
- **예시**: 웹 브라우저, 모바일 앱, 데스크톱 애플리케이션
- **역할**: 사용자의 요청을 서버에 전달하고 응답을 받아 사용자에게 표시

#### 서버 (Server)
- **정의**: 클라이언트에게 네트워크를 통해 정보나 서비스를 제공하는 컴퓨터 시스템
- **역할**: 클라이언트의 요청을 처리하고 적절한 응답을 제공

---

## 2. 웹 통신 과정

### 2.1 기본 웹 통신 플로우
![웹 통신 과정.png](..%2F..%2F..%2Fetc%2Fimage%2FNetwork_image%2F7Layer%2F%EC%9B%B9%20%ED%86%B5%EC%8B%A0%20%EA%B3%BC%EC%A0%95.png)

1. **URL 입력**: 사용자가 웹 브라우저를 통해 URL을 입력
2. **DNS 조회**: 입력된 URL의 도메인 네임을 DNS 서버에서 검색
3. **IP 주소 획득**: DNS 서버에서 해당 도메인 네임에 해당하는 IP 주소를 찾아 전달
4. **HTTP 요청 생성**: 웹 페이지 URL 정보와 전달받은 IP 주소를 이용해 HTTP 요청 메시지 생성
5. **TCP 전송**: 요청을 TCP를 통해 서버로 전송
6. **서버 응답**: 서버는 클라이언트의 요청을 받고 응답을 전송

### 2.2 DNS 라우팅 과정
![DNS의 웹:앱 라우팅 과정.png](..%2F..%2F..%2Fetc%2Fimage%2FNetwork_image%2F7Layer%2FDNS%EC%9D%98%20%EC%9B%B9%3A%EC%95%B1%20%EB%9D%BC%EC%9A%B0%ED%8C%85%20%EA%B3%BC%EC%A0%95.png)

1. **도메인 입력**: 사용자가 웹 브라우저 주소창에 `www.example.com`을 입력
2. **ISP DNS 해석기**: 요청이 인터넷 서비스 제공업체(ISP)가 관리하는 DNS 해석기로 라우팅
3. **루트 네임 서버**: DNS 해석기가 요청을 DNS 루트 이름 서버에 전달
4. **TLD 네임 서버**: DNS 해석기가 요청을 `.com` 도메인 TLD(Top-level Domain) 네임 서버에 전달
5. **권한 네임 서버**: DNS 해석기가 요청을 Route 53 네임 서버에 전달
6. **IP 주소 반환**: Route 53 네임 서버가 `www.example.com` 레코드를 찾아 IP 주소를 DNS 해석기로 반환
7. **최종 응답**: DNS 해석기가 웹 브라우저에 IP 주소 반환

---



## 3. 상세 네트워크 통신 과정

### 3.1 클라이언트 측 처리 (브라우저)
1. **URL 파싱**: URL에 입력된 값을 브라우저 내부에서 결정된 규칙에 따라 의미를 분석
2. **HTTP 요청 생성**: 분석된 의미에 따라 HTTP Request 메시지 생성
3. **OS 의뢰**: 브라우저는 직접 네트워크 송출 기능이 없으므로 운영체제에 메시지 전달을 의뢰
   - 택배 시스템을 이용하는 것과 같은 원리
   - OS에 송신을 의뢰할 때는 도메인명이 아닌 IP 주소로 수신처 지정 필요
   - 이 과정에서 DNS 서버 조회가 필요

### 3.2 프로토콜 스택 및 LAN 어댑터
1. **메시지 수신**: 프로토콜 스택(운영체제의 네트워크 제어 소프트웨어)이 브라우저로부터 메시지 수신
2. **패킷 생성**: 받은 메시지를 패킷에 저장하고 수신처 주소 등 제어 정보 추가
3. **LAN 어댑터 전달**: 패킷을 LAN 어댑터에 전달
4. **프레임 생성**: LAN 어댑터가 다음 홉의 MAC 주소를 붙인 프레임을 전기 신호로 변환
5. **신호 송출**: 변환된 신호를 LAN 케이블에 송출
6. **오류 제어**: 프로토콜 스택은 통신 중 오류 발생 시 제어 정보를 사용하여 재전송 및 상황 조절
   - 네트워크 세계의 "비서" 역할

### 3.3 네트워크 장비 (허브, 스위치, 라우터)
1. **스위칭 허브 경유**: LAN 어댑터가 송신한 프레임이 스위칭 허브를 경유
2. **라우터 도착**: 인터넷 접속용 라우터에 도착
3. **프로바이더 전달**: 라우터가 패킷을 프로바이더(통신사)에게 전달
4. **인터넷 진입**: 인터넷으로 진입

### 3.4 액세스 회선 및 프로바이더
1. **액세스 회선**: 패킷이 인터넷 입구의 액세스 회선(통신 회선)을 통해 POP(Point Of Presence, 통신사용 라우터)까지 운반
2. **POP 경유**: POP를 거쳐 인터넷의 핵심부로 진입
3. **고속 라우터**: 수많은 고속 라우터들 사이로 패킷이 목적지를 향해 전달

### 3.5 방화벽 및 캐시 서버
1. **LAN 도착**: 패킷이 인터넷 핵심부를 통과하여 웹 서버측 LAN에 도착
2. **방화벽 검사**: 기다리고 있던 방화벽이 도착한 패킷을 검사
3. **캐시 서버 판단**: 패킷이 웹 서버까지 가야 하는지, 가지 않아도 되는지 판단
4. **캐시 활용**: 
   - 액세스한 페이지의 데이터가 캐시 서버에 있으면 웹 서버에 의뢰하지 않고 바로 응답
   - 재사용 가능한 데이터는 캐시 서버에 저장

### 3.6 웹 서버 처리
1. **패킷 도착**: 패킷이 물리적인 웹 서버에 도착
2. **메시지 복원**: 웹 서버의 프로토콜 스택이 패킷을 추출하여 메시지 복원
3. **애플리케이션 전달**: 복원된 메시지를 웹 서버 애플리케이션에 전달
4. **응답 생성**: 웹 서버 애플리케이션이 요청 메시지에 따른 데이터를 응답 메시지에 포함
5. **응답 전송**: 응답 메시지가 클라이언트에게 전달 (요청과 동일한 경로 역순)

---



## 4. 네트워크 통신의 전체 흐름

### 4.1 사설 네트워크에서의 통신 시작
- **장치 사용**: 사용자가 사설 네트워크에서 장치(컴퓨터, 스마트폰)를 사용하여 인터넷 브라우저 실행 또는 애플리케이션 실행
- **서버 연결 시도**: 특정 서버에 연결하고자 하는 요청을 통해 통신 시작

### 4.2 라우팅 및 패킷 전달
- **라우터 경유**: 사용자의 장치가 라우터를 통해 사설 네트워크를 벗어남
- **경로 결정**: 라우터가 라우팅 테이블을 기반으로 패킷의 최적 경로를 결정
- **공인 네트워크 전달**: 해당 패킷을 공인 네트워크로 전달

### 4.3 공인 네트워크 전송
- **공인 네트워크 도착**: 패킷이 공인 네트워크에 도착
- **경로 결정**: ISP나 다른 네트워크 장비를 통해 목적지 서버로의 경로 결정
- **라우팅 과정**: 다양한 라우터와 네트워크 장비가 패킷을 전달하고 라우팅하는 과정 진행

### 4.4 서버 도달 및 요청 처리
- **서버 도착**: 목적지 서버에 도착한 패킷이 서비스 요청 처리 대기
- **서비스 유형**: 서버가 제공하는 서비스에 따라 요청 유형이 달라짐
  - 웹페이지 요청
  - 데이터베이스 쿼리
  - 파일 다운로드 등

### 4.5 서버에서의 응답 생성
- **응답 생성**: 서버가 클라이언트의 요청에 따라 적절한 응답을 생성하고 패킷에 포함
- **응답 유형**: 클라이언트가 요청한 정보에 따라 다양한 형태의 응답 제공
  - 웹페이지의 HTML 코드
  - 데이터베이스 결과
  - 파일 데이터 등

### 4.6 응답 전송 및 클라이언트 수신
- **역방향 전송**: 서버에서 생성된 응답이 공인 네트워크를 통해 클라이언트로 전송
- **네트워크 장비 경유**: 네트워크 장비와 라우터를 거쳐 패킷이 목적지 클라이언트로 전달

### 4.7 사용자에게 응답 제공
- **응답 표시**: 클라이언트 장치에서 수신된 응답이 애플리케이션 또는 브라우저를 통해 사용자에게 표시
- **서비스 확인**: 사용자가 요청한 정보나 서비스를 확인하고 사용 가능

---


## 5. 핵심 개념 정리

### 5.1 네트워크 통신의 핵심 요소
- **클라이언트**: 사용자 요청을 서버에 전달하고 응답을 받아 표시하는 프로그램
- **서버**: 클라이언트의 요청을 처리하고 적절한 응답을 제공하는 컴퓨터 시스템
- **DNS**: 도메인 이름을 IP 주소로 변환하는 시스템
- **프로토콜 스택**: 네트워크 통신을 제어하는 운영체제의 소프트웨어
- **라우터**: 패킷의 최적 경로를 결정하고 전달하는 네트워크 장비

### 5.2 통신 과정의 주요 단계
1. **요청 생성**: 클라이언트에서 서버로의 요청 생성
2. **DNS 조회**: 도메인 이름을 IP 주소로 변환
3. **패킷 전송**: 네트워크를 통해 패킷 전송
4. **서버 처리**: 서버에서 요청 처리 및 응답 생성
5. **응답 전송**: 서버에서 클라이언트로 응답 전송

---

## 참고자료
> [1] [네트워크의 전체 흐름 살펴보기](https://hgggny.tistory.com/entry/8%EC%9E%A5-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%9D%98-%EC%A0%84%EC%B2%B4-%ED%9D%90%EB%A6%84-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0)
> 
> [2] [네트워크 데이터 전송 과정](https://yaelimeee.tistory.com/50)

