---
title: DNS (Domain Name System)
tags: [network, domain, dns, name-resolution, internet-infrastructure]
updated: 2025-09-21
---

# DNS (Domain Name System)

## 도입

### DNS란 무엇인가
DNS(Domain Name System)는 인터넷에서 사용되는 분산형 네이밍 시스템이다. 쉽게 말해 인터넷의 주소록이라고 할 수 있다. 우리가 브라우저에 'google.com'을 입력하면, DNS가 이를 실제 서버의 IP 주소인 '142.250.191.14'로 변환해주는 역할을 한다.

인터넷 초기에는 모든 컴퓨터의 주소가 숫자로만 이루어진 IP 주소였다. 하지만 사람이 기억하기 어려운 숫자 대신 의미 있는 이름을 사용하고 싶어했고, 이에 따라 DNS가 탄생했다. 1983년 Paul Mockapetris가 처음 설계했으며, 현재까지 인터넷의 핵심 인프라로 작동하고 있다.

### DNS가 필요한 이유
DNS 없이는 인터넷 사용이 거의 불가능하다고 봐도 된다. 매번 IP 주소를 외워서 접속해야 한다면 현대의 인터넷은 존재할 수 없었을 것이다. DNS는 다음과 같은 핵심 가치를 제공한다:

**기억의 편의성**: 'facebook.com'이 '31.13.69.35'보다 훨씬 기억하기 쉽다. 브랜드명이나 서비스명을 그대로 주소로 사용할 수 있어 사용자 경험이 크게 향상된다.

**유연한 관리**: 서버를 다른 곳으로 이전하거나 IP 주소가 변경되어도 도메인 이름은 그대로 유지할 수 있다. 이는 비즈니스 연속성 측면에서 매우 중요하다.

**확장 가능한 구조**: 전 세계 수십억 개의 도메인을 단일 시스템으로 관리할 수 있는 분산형 아키텍처를 제공한다.

## DNS의 핵심 작동 원리

### DNS 쿼리 과정의 이해

DNS가 도메인 이름을 IP 주소로 변환하는 과정은 마치 전화번호 안내 서비스와 비슷하다. '홍길동씨 전화번호가 뭐예요?'라고 물어보면, 안내원이 전화번호부를 뒤져서 찾아주는 것과 같은 원리다.

**1단계: 로컬 캐시 확인**
브라우저는 먼저 자신의 메모리에서 해당 도메인의 IP 주소를 찾아본다. 마치 최근에 본 전화번호를 기억해두는 것과 같다. 캐시에 있으면 즉시 반환하므로 매우 빠르다.

**2단계: 운영체제 DNS 서버 문의**
캐시에 없으면 운영체제에 설정된 DNS 서버(보통 인터넷 서비스 제공업체의 DNS 서버)에 문의한다. 이는 '전화번호 안내 서비스'에 전화하는 것과 같다.

**3단계: 계층적 탐색**
DNS 서버는 다음과 같은 순서로 정보를 찾는다:

- **Root DNS 서버**: 최상위 도메인(.com, .org, .kr 등)을 관리하는 서버들
- **TLD 서버**: 특정 최상위 도메인(.com, .org 등)을 전담하는 서버들  
- **Authoritative 서버**: 실제 도메인 정보를 보유한 최종 서버들

**4단계: 결과 반환**
찾은 IP 주소를 역순으로 클라이언트에게 전달한다. 이 과정에서 각 단계의 정보가 캐시에 저장되어 다음 요청 시 더 빠르게 처리된다.

### DNS의 계층적 구조

DNS는 전 세계적으로 분산된 계층적 구조를 가지고 있다. 이는 마치 전 세계의 전화번호 체계와 비슷하다:

```
Root DNS Servers (.)
├── .com TLD Servers (상업용 도메인)
│   ├── google.com Authoritative Servers
│   ├── facebook.com Authoritative Servers
│   └── amazon.com Authoritative Servers
├── .org TLD Servers (비영리 조직)
├── .kr TLD Servers (한국 도메인)
└── .edu TLD Servers (교육기관)
```

이런 구조의 장점은 **부하 분산**과 **장애 격리**다. 한 부분에 문제가 생겨도 다른 부분은 정상 작동하며, 전 세계적으로 분산되어 있어 어느 지역에서든 빠른 응답을 받을 수 있다.

### DNS 레코드의 종류와 역할

DNS 레코드는 도메인에 대한 다양한 정보를 저장하는 데이터베이스의 레코드들이다. 마치 주소록에서 이름, 전화번호, 주소, 이메일 등 다양한 정보를 기록하는 것과 같다.

#### A 레코드 - 기본 주소 정보
가장 기본적이고 중요한 레코드다. 도메인 이름을 IPv4 주소로 연결한다. '홍길동'이라는 이름에 '010-1234-5678'이라는 전화번호를 매핑하는 것과 같다.

**특징:**
- 직접적인 IP 주소 연결로 가장 빠른 응답을 제공한다
- 웹사이트 접속에 필수적인 레코드다
- IP 주소가 바뀌면 반드시 업데이트해야 한다

**사용 예시:**
```
example.com → 192.168.1.100
```

#### CNAME 레코드 - 별명 설정
한 도메인을 다른 도메인으로 연결하는 레코드다. 마치 '별명'을 설정하는 것과 같다. '김철수'라는 본명에 '철이'라는 별명을 부여하는 것처럼, 'www.example.com'을 'example.com'으로 연결할 수 있다.

**특징:**
- 여러 서브도메인이 같은 서버를 가리킬 때 유용하다
- IP 주소가 바뀌어도 원본 도메인만 수정하면 된다
- CDN이나 클라우드 서비스 연동 시 자주 사용된다

**사용 예시:**
```
www.example.com → example.com
blog.example.com → example.com
```

#### AAAA 레코드 - IPv6 주소
IPv6 주소를 연결하는 레코드다. IPv4 주소가 부족해지면서 등장한 더 긴 형태의 IP 주소를 처리한다.

**특징:**
- IPv6 환경에서 웹사이트 접속을 가능하게 한다
- IPv4와 IPv6를 동시에 지원할 수 있다

#### MX 레코드 - 이메일 서버 지정
이메일을 받을 서버를 지정하는 레코드다. '이 도메인으로 오는 이메일은 어느 서버로 보내라'는 지시사항과 같다.

**특징:**
- 우선순위 번호로 여러 이메일 서버를 설정할 수 있다
- 이메일 서비스에 필수적인 레코드다

**사용 예시:**
```
example.com의 이메일 → mail.example.com (우선순위 10)
example.com의 이메일 → backup-mail.example.com (우선순위 20)
```

#### NS 레코드 - DNS 서버 지정
해당 도메인의 DNS 정보를 관리하는 서버를 지정한다. '이 도메인의 주소록은 어느 서버에서 관리한다'는 정보와 같다.

**특징:**
- 도메인 등록 시 필수적으로 설정해야 한다
- 여러 DNS 서버를 설정하여 안정성을 높일 수 있다

#### TXT 레코드 - 텍스트 정보 저장
도메인에 대한 다양한 텍스트 정보를 저장한다. 주로 이메일 보안이나 도메인 소유권 확인에 사용된다.

**주요 용도:**
- **SPF**: 이메일 발송 서버 인증
- **DKIM**: 이메일 디지털 서명
- **DMARC**: 이메일 인증 정책
- **도메인 소유권 확인**: Google, Facebook 등 서비스 연동 시

## 실제 DNS 동작 과정

### 일반적인 DNS 쿼리 과정

사용자가 브라우저에 'naver.com'을 입력했을 때 일어나는 과정을 단계별로 살펴보자:

**1단계: 브라우저 캐시 확인**
브라우저는 먼저 자신의 메모리에서 'naver.com'의 IP 주소를 찾아본다. 최근에 방문한 사이트라면 캐시에서 즉시 찾을 수 있어 매우 빠르다.

**2단계: 운영체제 캐시 확인**
브라우저 캐시에 없으면 운영체제의 DNS 캐시를 확인한다. Windows의 경우 'ipconfig /displaydns' 명령어로 확인할 수 있다.

**3단계: 라우터 캐시 확인**
운영체제에도 없으면 라우터의 DNS 캐시를 확인한다. 가정용 공유기도 DNS 캐시 기능을 제공한다.

**4단계: ISP DNS 서버 문의**
위 단계에서 모두 찾지 못하면 인터넷 서비스 제공업체(ISP)의 DNS 서버에 문의한다. 한국의 경우 KT, SKT, LG U+ 등의 DNS 서버를 사용한다.

**5단계: Root DNS 서버 문의**
ISP DNS 서버도 해당 정보가 없으면 Root DNS 서버에 문의한다. Root 서버는 '.com' 도메인을 어디서 관리하는지 알려준다.

**6단계: TLD 서버 문의**
Root 서버의 안내를 받아 '.com' 도메인을 관리하는 TLD 서버에 문의한다. TLD 서버는 'naver.com'의 DNS 서버가 어디에 있는지 알려준다.

**7단계: Authoritative 서버 문의**
마지막으로 'naver.com'을 실제로 관리하는 Authoritative 서버에 문의하여 최종 IP 주소를 얻는다.

**8단계: 결과 캐싱 및 반환**
찾은 IP 주소는 각 단계에서 캐시에 저장되고, 최종적으로 브라우저에 전달된다.

### DNS 캐싱의 중요성

DNS 캐싱은 인터넷 성능에 매우 중요한 역할을 한다. 캐싱이 없다면 매번 위의 복잡한 과정을 거쳐야 하므로 웹 브라우징이 극도로 느려질 것이다.

**TTL(Time To Live)**
각 DNS 레코드에는 TTL 값이 설정되어 있다. 이는 '이 정보를 얼마나 오래 캐시에 보관할 것인가'를 나타낸다. 일반적으로:
- 자주 변경되지 않는 도메인: 1시간~24시간
- 자주 변경되는 도메인: 5분~30분
- 개발/테스트 환경: 1분~5분

### 실제 DNS 설정 사례

**개인 블로그 운영**
```
myname.com → 192.168.1.100 (A 레코드)
www.myname.com → myname.com (CNAME 레코드)
blog.myname.com → myname.com (CNAME 레코드)
```

**이메일 서비스 연동**
```
myname.com → mail.google.com (MX 레코드, 우선순위 10)
myname.com → "v=spf1 include:_spf.google.com ~all" (TXT 레코드)
```

**CDN 서비스 연동**
```
myname.com → 192.168.1.100 (A 레코드)
cdn.myname.com → cdn.cloudflare.com (CNAME 레코드)
```

## DNS 운영과 최적화

### DNS 성능 최적화 전략

#### TTL 설정의 전략적 접근
TTL(Time To Live) 설정은 DNS 성능에 직접적인 영향을 미친다. 너무 짧으면 DNS 서버에 부하를 주고, 너무 길면 변경사항이 늦게 반영된다.

**안정적인 서비스의 경우:**
- 메인 도메인: 1시간~24시간
- 서브도메인: 30분~2시간
- 이메일 서버: 1시간~12시간

**개발/테스트 환경:**
- 모든 레코드: 1분~5분
- 빠른 변경이 필요한 경우: 30초~1분

**CDN 연동 시:**
- CDN 엔드포인트: 5분~30분
- 원본 서버: 1시간~6시간

#### DNS 캐싱 전략
효율적인 DNS 캐싱은 웹사이트 성능을 크게 향상시킨다. 캐시 히트율을 높이기 위한 전략들:

**브라우저 레벨:**
- 자주 방문하는 도메인은 브라우저가 자동으로 캐싱
- 브라우저 캐시는 보통 1시간~24시간 유지

**운영체제 레벨:**
- Windows: DNS 클라이언트 서비스가 캐싱 담당
- macOS/Linux: systemd-resolved나 nscd가 캐싱 담당

**라우터/게이트웨이 레벨:**
- 가정용 공유기나 기업용 게이트웨이에서 DNS 캐싱 제공
- 여러 사용자가 같은 DNS 정보를 공유할 수 있음

### DNS 보안 강화

#### DNSSEC의 중요성
DNSSEC(DNS Security Extensions)는 DNS 응답의 무결성을 보장하는 보안 확장이다. DNS 스푸핑 공격을 방지하고 데이터 변조를 감지할 수 있다.

**DNSSEC의 장점:**
- DNS 응답의 진위성 검증
- 중간자 공격(MITM) 방지
- DNS 캐시 포이즈닝 방지

**구현 시 고려사항:**
- DNS 서버와 클라이언트 모두 DNSSEC 지원 필요
- 약간의 성능 오버헤드 발생
- 설정이 복잡하고 관리가 어려움

#### DNS over HTTPS (DoH)와 DNS over TLS (DoT)
기존 DNS는 암호화되지 않은 UDP 프로토콜을 사용한다. DoH와 DoT는 DNS 쿼리를 암호화하여 프라이버시와 보안을 강화한다.

**DoH (DNS over HTTPS):**
- HTTPS 프로토콜을 통해 DNS 쿼리 전송
- 방화벽에서 차단하기 어려움
- 브라우저에서 주로 사용

**DoT (DNS over TLS):**
- TLS 프로토콜을 통해 DNS 쿼리 전송
- 포트 853 사용
- 운영체제 레벨에서 설정 가능

### DNS 모니터링과 관리

#### 필수 모니터링 지표
DNS 서비스의 안정성을 위해 다음 지표들을 지속적으로 모니터링해야 한다:

**응답 시간:**
- 평균 응답 시간: 100ms 이하 권장
- 95퍼센타일 응답 시간: 500ms 이하 권장
- 타임아웃 발생률: 1% 이하 권장

**가용성:**
- DNS 서버 가용성: 99.9% 이상
- 지역별 응답 성공률 모니터링
- 장애 발생 시 자동 알림 설정

**트래픽 패턴:**
- 시간대별 쿼리 수 변화
- 도메인별 쿼리 분포
- 비정상적인 트래픽 패턴 감지

#### DNS 장애 대응
DNS 장애는 웹사이트 전체 접속 불가를 의미하므로 신속한 대응이 필요하다:

**일반적인 장애 원인:**
- DNS 서버 과부하
- 네트워크 연결 문제
- DNS 레코드 설정 오류
- DDoS 공격

**대응 절차:**
1. 장애 상황 파악 및 영향도 분석
2. 백업 DNS 서버로 트래픽 전환
3. DNS 레코드 점검 및 수정
4. 모니터링 강화 및 추가 장애 방지

## DNS 서버의 종류와 역할

### DNS 서버 분류

DNS 서버는 역할에 따라 크게 네 가지로 분류할 수 있다:

**Root DNS 서버**
- 전 세계에 13개의 Root 서버가 있다 (A~M)
- 최상위 도메인(.com, .org, .kr 등)의 정보를 제공
- ICANN에서 관리하며, 각 대륙에 분산 배치
- 예시: a.root-servers.net, b.root-servers.net

**TLD DNS 서버**
- 특정 최상위 도메인을 전담 관리
- .com, .org, .kr 등의 도메인 정보를 보유
- 도메인 등록업체에서 관리
- 예시: a.gtld-servers.net (.com 전담)

**Authoritative DNS 서버**
- 실제 도메인의 DNS 정보를 보유한 최종 서버
- 도메인 소유자가 직접 관리하거나 DNS 서비스 업체에 위임
- A, CNAME, MX 등 모든 레코드 정보를 보유
- 예시: ns1.google.com, ns1.naver.com

**Recursive DNS 서버**
- 클라이언트의 DNS 쿼리를 대신 처리하는 서버
- ISP, Google(8.8.8.8), Cloudflare(1.1.1.1) 등이 제공
- 캐싱 기능으로 성능 향상
- 클라이언트와 다른 DNS 서버들 사이의 중개 역할

### DNS 보안 위협과 대응

#### 주요 보안 위협

**DNS 캐시 포이즈닝**
공격자가 DNS 캐시에 잘못된 정보를 주입하여 사용자를 악성 사이트로 유도하는 공격이다. 예를 들어, 은행 사이트의 IP 주소를 가짜 사이트로 바꿔서 사용자의 계정 정보를 탈취할 수 있다.

**DNS 증폭 공격**
DNS 응답이 쿼리보다 훨씬 크다는 특성을 이용한 DDoS 공격이다. 작은 DNS 쿼리를 보내면 큰 응답을 받을 수 있어, 공격자의 대역폭을 절약하면서 피해자의 서버를 과부하시킬 수 있다.

**DNS 터널링**
DNS 프로토콜을 통해 데이터를 유출하는 기법이다. 방화벽이 DNS 트래픽을 허용하는 경우, 이를 악용하여 내부 네트워크에서 데이터를 외부로 전송할 수 있다.

#### 보안 대응 방안

**DNSSEC 도입**
DNS 응답의 무결성을 보장하는 가장 강력한 방법이다. 디지털 서명을 통해 DNS 응답이 변조되지 않았음을 확인할 수 있다.

**DNS 암호화**
DoH(DNS over HTTPS)나 DoT(DNS over TLS)를 사용하여 DNS 쿼리를 암호화한다. 이를 통해 중간자 공격을 방지할 수 있다.

**모니터링 강화**
비정상적인 DNS 트래픽 패턴을 감지하고, 의심스러운 활동을 차단하는 시스템을 구축한다.

### DNS 진단 도구

#### 명령줄 도구

**nslookup**
가장 기본적인 DNS 조회 도구다. Windows와 대부분의 Unix 계열 시스템에서 사용할 수 있다.
```
nslookup google.com
nslookup google.com 8.8.8.8
```

**dig (Domain Information Groper)**
더 상세한 DNS 정보를 제공하는 도구다. Linux와 macOS에서 주로 사용된다.
```
dig google.com A
dig google.com MX
dig @8.8.8.8 google.com
```

**host**
간단한 DNS 조회를 위한 도구다.
```
host google.com
host -t MX google.com
```

#### 온라인 진단 도구

**MXToolbox**
DNS 레코드 확인, 이메일 서버 테스트, 도메인 상태 점검 등을 제공한다.

**DNSViz**
DNSSEC 설정 상태를 시각적으로 확인할 수 있는 도구다.

**WhatsMyDNS**
전 세계 여러 지역에서 DNS 전파 상태를 확인할 수 있다.

**DNS Checker**
도메인의 DNS 레코드가 전 세계적으로 올바르게 전파되었는지 확인한다.

## 마무리

DNS는 인터넷의 핵심 인프라로서, 우리가 매일 사용하는 웹 브라우징의 첫 번째 단계를 담당한다. 도메인 이름을 IP 주소로 변환하는 단순해 보이는 작업이지만, 그 뒤에는 복잡한 분산 시스템과 정교한 캐싱 메커니즘이 작동하고 있다.

DNS의 성능과 보안은 웹사이트의 사용자 경험에 직접적인 영향을 미친다. 적절한 TTL 설정, 효율적인 캐싱 전략, 그리고 강력한 보안 조치를 통해 안정적이고 빠른 DNS 서비스를 구축할 수 있다. 또한 지속적인 모니터링과 장애 대응 체계를 갖춤으로써 DNS 관련 문제를 신속하게 해결할 수 있다.

앞으로 IPv6의 확산, DNS over HTTPS의 보편화, 그리고 더욱 정교한 보안 위협에 대응하기 위한 새로운 기술들이 등장할 것이다. DNS의 기본 원리를 이해하고 있다면, 이러한 변화에 효과적으로 대응할 수 있을 것이다.

## 참조

- RFC 1034: Domain Names - Concepts and Facilities
- RFC 1035: Domain Names - Implementation and Specification  
- RFC 4033: DNS Security Introduction and Requirements
- RFC 8484: DNS Queries over HTTPS (DoH)
- RFC 7858: Specification for DNS over Transport Layer Security (DoT)
- ICANN Root Server System
- Cloudflare DNS Documentation
- Google Public DNS
- 한국인터넷진흥원(KISA) DNS 가이드
- 한국정보통신기술협회(TTA) DNS 표준 가이드










