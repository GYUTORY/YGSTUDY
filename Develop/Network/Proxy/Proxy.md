---
title: 프록시 (Proxy)
tags: [network, proxy, forward-proxy, reverse-proxy, load-balancing, caching]
updated: 2025-12-10
---

# 프록시 (Proxy)

## 정의

프록시(Proxy)는 클라이언트와 서버 사이에서 중개 역할을 수행하는 네트워크 구성 요소다.

```
클라이언트 → 프록시 서버 → 실제 서버
```

프록시는 클라이언트의 요청을 받아 서버에 전달하고, 서버의 응답을 다시 클라이언트에게 전달한다.

**실무 팁:**
프록시는 네트워크의 중간 지점에서 요청을 처리한다. Forward Proxy는 클라이언트를 보호하고, Reverse Proxy는 서버를 보호한다.

## 동작 원리

### 프록시의 주요 개념

| 개념 | 설명 | 목적 |
|------|------|------|
| 투명성 (Transparency) | 클라이언트나 서버가 프록시의 존재를 인식하지 못하도록 함 | 원활한 통신 보장 |
| 제어 (Control) | 네트워크 트래픽을 관리하고 보안 정책을 적용 | 보안 & 성능 최적화 |

### 프록시가 필요한 이유

**1. 보안 강화**
- 방화벽 역할
- 악성 트래픽 차단
- 접근 제어

**2. 성능 최적화**
- 콘텐츠 캐싱
- 데이터 압축
- 로드 밸런싱

**3. 익명성 & 프라이버시**
- IP 주소 숨김
- 지역 제한 우회
- 개인정보 보호

**4. 네트워크 관리**
- 트래픽 모니터링
- 정책 일관 적용
- 리소스 최적화

## 프록시 유형

### Forward Proxy (포워드 프록시)

클라이언트를 대신하여 외부 서버에 요청하는 프록시다.

**실무 팁:**
Forward Proxy는 기업 네트워크에서 인터넷 접근을 제어하는 데 사용한다. 클라이언트의 IP 주소를 숨기고 보안 정책을 적용한다.

**구조:**
```
[클라이언트] → [Forward Proxy] → [인터넷 서버들]
```

**주요 특징:**

| 특징 | 설명 | 장점 |
|------|------|------|
| 클라이언트 보호 | 클라이언트의 실제 IP 주소를 서버로부터 숨김 | 프라이버시 보호, 익명성 확보 |
| 접근 제어 | 특정 웹사이트나 콘텐츠에 대한 접근 제한 | 보안 정책 준수 |
| 캐싱 | 자주 요청되는 콘텐츠를 저장 | 속도 향상, 대역폭 절약 |
| 로깅 | 클라이언트의 인터넷 사용 패턴 기록 | 모니터링, 감사 추적 |

**사용 환경:**
- 기업 네트워크: 직원 인터넷 사용 모니터링 및 제어
- 교육 기관: 학생 보호, 부적절한 콘텐츠 차단
- 정부 기관: 고수준 보안, 외부 접근 통제
- 개인 사용: 개인정보 보호, 지역 제한 우회

### Reverse Proxy (리버스 프록시)

서버를 대신하여 클라이언트 요청을 받아 백엔드 서버로 전달하는 프록시다.

**실무 팁:**
Reverse Proxy는 웹 서버 앞에 배치하여 로드 밸런싱, SSL 종료, 캐싱을 처리한다. Nginx, HAProxy가 대표적이다.

**구조:**
```
[클라이언트들] → [Reverse Proxy] → [내부 서버 1, 2, 3...]
```

**주요 특징:**

| 특징 | 설명 | 장점 |
|------|------|------|
| 서버 보호 | 백엔드 서버의 실제 IP와 구조를 클라이언트로부터 숨김 | 보안 강화, DDoS 방어 |
| 로드 밸런싱 | 여러 백엔드 서버에 요청을 지능적으로 분산 | 성능 향상, 고가용성 |
| SSL 종료 | HTTPS 연결을 프록시에서 처리 | 백엔드 부하 감소 |
| 캐싱 | 정적 콘텐츠를 캐시하여 빠른 응답 | 속도 향상, 백엔드 부하 감소 |
| 압축 | 응답 데이터를 압축하여 전송 | 대역폭 절약 |

**사용 환경:**
- 웹 서버 클러스터: 여러 서버 통합, 고가용성
- 마이크로서비스: API 게이트웨이, 서비스 라우팅
- CDN: 전 세계 분산, 콘텐츠 캐싱
- API 게이트웨이: 엔드포인트 통합, Rate Limiting

## 주요 기능

### 로드 밸런싱 (Load Balancing)

여러 백엔드 서버에 요청을 분산하여 시스템의 성능과 가용성을 향상합니다.

**알고리즘 비교:**

| 알고리즘 | 동작 방식 | 장점 | 단점 | 사용 사례 |
|---------|----------|------|------|----------|
| Round Robin | 순차적 분배 | 구현 간단, 공평한 분배 | 서버 성능 차이 미고려 | 동일 성능 서버 |
| Weighted | 가중치 기반 분배 | 서버 성능 반영 | 가중치 설정 필요 | 이기종 서버 환경 |
| Least Connections | 연결 수 기반 | 실시간 부하 반영 | 오버헤드 증가 | 장시간 연결 |
| IP Hash | IP 기반 일관된 분배 | 세션 유지 용이 | 부하 불균형 가능 | 세션 기반 서비스 |
| Geographic | 지리적 위치 기반 | 지연 시간 최소화 | 복잡한 구성 | 글로벌 서비스 |

### 캐싱 (Caching)

자주 요청되는 콘텐츠를 저장하여 응답 시간 단축 및 서버 부하를 감소시킵니다.

**캐싱 전략:**

| 전략 | 대상 | TTL | 효과 |
|------|------|-----|------|
| 정적 콘텐츠 | 이미지, CSS, JS | 24시간+ | 높은 캐시 히트율 |
| 동적 콘텐츠 | API 응답, DB 쿼리 | 분~시간 | 서버 부하 감소 |
| 조건부 캐싱 | ETag, Last-Modified | 동적 | 효율적 검증 |

### SSL 터미네이션 (SSL Termination)

HTTPS 연결을 프록시에서 처리하여 백엔드 서버 부하를 감소시킵니다.

```
[클라이언트] --HTTPS--> [프록시] --HTTP--> [백엔드 서버들]
```

**장점:**

| 항목 | 효과 | 설명 |
|------|------|------|
| 성능 향상 | 백엔드 CPU 절약 | 암호화 처리를 프록시에서 일괄 수행 |
| 관리 용이 | 중앙화된 인증서 관리 | 하나의 인증서로 여러 서버 보호 |
| 보안 강화 | 일관된 보안 정책 | TLS 버전, 암호화 스위트 통일 |

### 압축 (Compression)

응답 데이터를 압축하여 대역폭을 절약하고 전송 속도를 향상시킵니다.

**압축 알고리즘 비교:**

| 알고리즘 | 압축률 | 속도 | 브라우저 지원 | 권장 사용 |
|---------|--------|------|--------------|----------|
| Gzip | 중간 | 빠름 | 모든 브라우저 | 일반적인 웹 콘텐츠 |
| Brotli | 높음 | 보통 | 최신 브라우저 | 정적 리소스 |
| Deflate | 낮음 | 빠름 | 대부분 브라우저 | 레거시 호환성 |

## 사용 사례

### 기업 환경 - Forward Proxy

| 기능 | 구현 방법 | 효과 |
|------|----------|------|
| 네트워크 보안 강화 | 악성 사이트 차단, 콘텐츠 필터링 | 보안 위협 차단 |
| 대역폭 최적화 | 정적 리소스 캐싱 | 70% 이상 대역폭 절약 |
| 정책 준수 | SNS/스트리밍 차단 | 생산성 향상 |

### 웹 서비스 - Reverse Proxy

**성능 최적화 지표:**

| 최적화 기법 | 개선 효과 | 적용 사례 |
|------------|----------|----------|
| 캐싱 | 응답 시간 80% 감소 | 정적 리소스, API 응답 |
| 압축 | 전송 용량 70% 감소 | HTML, CSS, JSON |
| 로드 밸런싱 | 처리량 300% 증가 | 트래픽 분산 |

### 마이크로서비스 - API Gateway

**주요 가치:**

| 역할 | 기능 | 장점 |
|------|------|------|
| API 게이트웨이 | 단일 진입점, 서비스 통합 | 클라이언트 단순화 |
| 서비스 디스커버리 | 동적 라우팅, 헬스체크 | 자동 장애 복구 |
| 중앙화 모니터링 | 통합 로깅, 메트릭 수집 | 운영 효율성 향상 |

## 운영 가이드

### 모니터링

**핵심 메트릭:**

| 메트릭 | 정상 범위 | 경고 임계값 | 조치 |
|--------|----------|-----------|------|
| 응답 시간 | < 100ms | > 500ms | 서버 증설 |
| 처리량 | 1000+ RPS | < 500 RPS | 캐시 확인 |
| 에러율 | < 0.1% | > 1% | 장애 조사 |
| CPU 사용률 | < 70% | > 90% | 스케일 아웃 |

### 보안 고려사항

| 보안 계층 | 구현 방법 | 목적 |
|----------|----------|------|
| 접근 제어 | IP 필터링, OAuth, JWT | 무단 접근 차단 |
| 데이터 보호 | TLS 1.3, 헤더 마스킹 | 데이터 유출 방지 |
| Rate Limiting | Token Bucket, Leaky Bucket | DDoS 공격 방어 |

### 성능 최적화

**캐싱 전략:**

| 콘텐츠 유형 | TTL | 캐시 키 | 효과 |
|------------|-----|---------|------|
| 이미지 | 7일 | URL + Version | 99% 히트율 |
| CSS/JS | 1일 | URL + Hash | 95% 히트율 |
| API 응답 | 5분 | URL + Query | 70% 히트율 |
| HTML | 1분 | URL | 50% 히트율 |

**연결 관리:**

| 설정 | 권장값 | 효과 |
|------|--------|------|
| Keep-Alive Timeout | 65초 | 연결 재사용 극대화 |
| Connection Pool Size | 100+ | 동시 요청 처리 |
| Timeout | 30초 | 리소스 효율성 |

## Forward vs Reverse Proxy 비교

| 비교 항목 | Forward Proxy | Reverse Proxy |
|----------|--------------|---------------|
| 위치 | 클라이언트 측 | 서버 측 |
| 보호 대상 | 클라이언트 | 서버 |
| 주요 목적 | 익명성, 접근 제어 | 보안, 성능, 확장성 |
| 사용 사례 | 기업 방화벽, VPN | 웹 서버, API 게이트웨이 |
| 투명성 | 클라이언트가 인식 | 클라이언트는 모름 |

## HTTP 헤더와 프록시

### Forwarded 헤더

프록시를 통과하는 요청에서 원본 클라이언트 정보를 전달합니다.

**주요 헤더:**

| 헤더 | 용도 | 예시 |
|------|------|------|
| X-Forwarded-For | 클라이언트 원본 IP 주소 | `203.0.113.10, 198.51.100.5` |
| X-Forwarded-Host | 원본 호스트명 | `api.example.com` |
| X-Forwarded-Proto | 원본 프로토콜 | `https` |
| X-Forwarded-Port | 원본 포트 번호 | `443` |

**표준화된 Forwarded 헤더 (RFC 7239):**
```
Forwarded: for=203.0.113.10;host=api.example.com;proto=https
```

## 장단점

### 장점

| 카테고리 | 세부 항목 | 효과 |
|---------|----------|------|
| 보안 강화 | 네트워크 보호, DDoS/SQL 인젝션 차단 | 내부 네트워크 안전성 확보 |
| 성능 향상 | 캐싱, 압축, 로드 밸런싱 | 응답 시간 80% 감소, 대역폭 70% 절약 |
| 운영 효율성 | 중앙화된 관리, 통합 모니터링 | 관리 포인트 단일화 |

### 단점

| 카테고리 | 세부 항목 | 완화 방법 |
|---------|----------|----------|
| 복잡성 증가 | 설정 복잡성, 디버깅 어려움 | IaC 도구 활용, 분산 추적 도입 |
| 성능 오버헤드 | 추가 지연 (5-10ms) | 고성능 프록시 사용 |
| 보안 고려사항 | 프록시 취약점, 데이터 노출 위험 | 정기 보안 패치, End-to-End 암호화 |

## 참고

### 프록시 솔루션

| 솔루션 | 특징 | 추천 용도 |
|--------|------|----------|
| [Nginx](https://nginx.org/) | 고성능, 경량, 비동기 | 웹 서버, Reverse Proxy |
| [HAProxy](https://www.haproxy.org/) | 로드 밸런싱 특화, 고가용성 | L7 로드 밸런서 |
| [Squid](http://www.squid-cache.org/) | 캐싱 프록시, Forward Proxy | 캐시 서버 |
| [Envoy](https://www.envoyproxy.io/) | 마이크로서비스, 서비스 메시 | Cloud Native 환경 |
| [Traefik](https://traefik.io/) | 동적 설정, Kubernetes 통합 | 컨테이너 환경 |

### 공식 문서
- [RFC 7239 - Forwarded HTTP Extension](https://tools.ietf.org/html/rfc7239)
- [RFC 2616 - HTTP/1.1](https://tools.ietf.org/html/rfc2616)
- [Nginx - Reverse Proxy](https://nginx.org/en/docs/http/ngx_http_proxy_module.html)
- [Apache - mod_proxy](https://httpd.apache.org/docs/current/mod/mod_proxy.html)

### 보안 자료
- [OWASP](https://owasp.org/)
- [NIST Cybersecurity](https://www.nist.gov/cyberframework)
- [SSL Labs](https://www.ssllabs.com/projects/best-practices/)
