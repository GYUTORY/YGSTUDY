---
title: 라우팅
tags: [network, 라우팅, 네트워크, 라우터]
updated: 2025-12-10
---

# 라우팅 (Routing)

## 정의

라우팅(Routing)은 네트워크에서 데이터 패킷이 출발지에서 목적지까지 이동할 때 최적의 경로를 선택하는 프로세스다.

**실무 팁:**
라우팅은 IP 주소를 기반으로 패킷의 경로를 결정한다. 라우터가 라우팅 테이블을 사용하여 최적 경로를 선택한다.

### 라우팅의 중요성

**1. 효율적인 데이터 전송**
- 네트워크 트래픽 최소화
- 전송 속도 향상
- 지연 시간 최소화
- 대역폭 효율적 활용

**2. 네트워크 안정성**
- 장애 발생 시 자동 우회
- 백업 경로 제공
- 무중단 서비스 보장

**3. 최적화**
- 네트워크 리소스 효율적 사용
- 병목 현상 방지
- 트래픽 분산

## 동작 원리

### 라우팅 테이블 (Routing Table)

라우터가 패킷의 목적지를 결정하기 위해 사용하는 정보 테이블이다.

**실무 팁:**
라우팅 테이블은 목적지 네트워크와 다음 홉 라우터 정보를 저장한다. `ip route show` 명령어로 확인할 수 있다.

**라우팅 테이블 구성 요소:**

| 항목 | 설명 | 예시 |
|------|------|------|
| Destination | 목적지 네트워크 주소 | 192.168.1.0/24 |
| Netmask | 네트워크 마스크 | 255.255.255.0 |
| Gateway | 다음 홉 라우터 주소 | 10.0.0.1 |
| Interface | 출력 인터페이스 | eth0, eth1 |
| Metric | 경로 비용 | 10, 20, 100 |

**라우팅 테이블 예시:**
```
Destination     Gateway         Genmask         Flags   Metric  Iface
0.0.0.0         192.168.1.1     0.0.0.0         UG      0       eth0
192.168.1.0     0.0.0.0         255.255.255.0   U       0       eth0
10.0.0.0        192.168.1.254   255.0.0.0       UG      10      eth0
```

### 라우팅 프로세스

1. **패킷 수신**: 라우터가 패킷을 받음
2. **목적지 IP 확인**: 패킷 헤더에서 목적지 IP 추출
3. **라우팅 테이블 조회**: 목적지 IP와 매칭되는 경로 검색
4. **최적 경로 선택**: 메트릭 기반으로 최적 경로 결정
5. **패킷 전달**: 다음 홉으로 패킷 전송
6. **TTL 감소**: TTL 값을 1 감소시키고 체크섬 재계산

### 라우팅 메트릭

경로를 선택할 때 사용하는 기준입니다.

| 메트릭 | 설명 | 장점 | 단점 | 사용 프로토콜 |
|--------|------|------|------|--------------|
| Hop Count | 라우터 개수 | 간단, 계산 빠름 | 대역폭/지연 미고려 | RIP |
| Bandwidth | 대역폭 | 전송 속도 고려 | 지연 시간 미고려 | EIGRP |
| Delay | 지연 시간 | 실시간 반영 | 변동성 있음 | EIGRP |
| Cost | 종합 비용 | 유연한 설정 | 복잡함 | OSPF |

## 라우팅 프로토콜

### 분류

**1. 관리 방식**
- Static Routing: 관리자가 수동으로 경로 설정
- Dynamic Routing: 프로토콜이 자동으로 경로 학습

**2. 알고리즘**
- Distance Vector: 거리와 방향 기반 (RIP)
- Link State: 네트워크 토폴로지 기반 (OSPF)
- Hybrid: 두 방식의 혼합 (EIGRP)

**3. 적용 범위**
- IGP (Interior Gateway Protocol): 내부 네트워크 (OSPF, RIP, EIGRP)
- EGP (Exterior Gateway Protocol): 외부 네트워크 간 (BGP)

### 주요 프로토콜

**RIP (Routing Information Protocol)**
- 알고리즘: Distance Vector
- 메트릭: Hop Count
- 최대 홉: 15
- 업데이트 주기: 30초
- 장점: 간단한 설정
- 단점: 느린 수렴, 제한된 확장성
- 사용: 소규모 네트워크

**OSPF (Open Shortest Path First)**
- 알고리즘: Link State
- 메트릭: Cost (대역폭 기반)
- 최대 홉: 무제한
- 업데이트: 변경 시에만
- 장점: 빠른 수렴, 효율적
- 단점: 복잡한 설정, 높은 리소스
- 사용: 대규모 엔터프라이즈

**BGP (Border Gateway Protocol)**
- 알고리즘: Path Vector
- 메트릭: AS Path, Policy
- 최대 홉: 무제한
- 업데이트: 변경 시에만
- 장점: 확장성, 정책 기반
- 단점: 복잡함, 느린 수렴
- 사용: 인터넷 백본, ISP 간 연결

**EIGRP (Enhanced Interior Gateway Routing Protocol)**
- 알고리즘: Hybrid
- 메트릭: 대역폭, 지연, 부하
- 업데이트: 변경 시에만
- 장점: 빠른 수렴, 효율적
- 단점: Cisco 전용
- 사용: Cisco 환경

### 프로토콜 비교

| 프로토콜 | 유형 | 메트릭 | 수렴 속도 | 확장성 | 복잡도 | 적합한 환경 |
|---------|------|--------|-----------|--------|--------|------------|
| RIP | IGP | Hop Count | 느림 | 낮음 | 낮음 | 소규모 네트워크 |
| OSPF | IGP | Cost | 빠름 | 높음 | 높음 | 대규모 엔터프라이즈 |
| EIGRP | IGP | Composite | 매우 빠름 | 높음 | 중간 | Cisco 환경 |
| BGP | EGP | Policy | 느림 | 매우 높음 | 매우 높음 | ISP, 인터넷 백본 |

## 라우터 기능

### 기본 기능

**1. 패킷 포워딩**
- 패킷의 목적지 IP 확인
- 라우팅 테이블 조회
- 최적 경로로 패킷 전달

**2. 경로 결정**
- 라우팅 프로토콜 실행
- 라우팅 테이블 업데이트
- 메트릭 기반 최적 경로 선택

**3. 네트워크 분할**
- 브로드캐스트 도메인 분리
- 네트워크 성능 향상
- 보안 강화

### 고급 기능

**QoS (Quality of Service)**
- 트래픽 우선순위 설정
- 대역폭 보장
- 지연 시간 제어

**보안 기능**
- ACL (Access Control List): 트래픽 필터링
- 방화벽: 패킷 검사 및 차단
- VPN: 암호화된 터널 제공
- NAT: IP 주소 변환

## 라우팅 최적화

### 로드 밸런싱

여러 경로에 트래픽을 분산하여 네트워크 자원을 효율적으로 활용합니다.

**방식:**
- ECMP (Equal-Cost Multi-Path): 동일 비용 경로에 트래픽 분산
- Weighted Load Balancing: 가중치 기반 분산

### 장애 복구

**Fast Reroute**
- 장애 감지 시 즉시 백업 경로로 전환
- 수 밀리초 이내 복구
- 패킷 손실 최소화

**Redundancy (이중화)**
- 주 경로 + 백업 경로 구성
- 자동 장애 감지 및 전환
- 고가용성 보장

## 실전 예제

### 기업 네트워크 라우팅 설정

```bash
# Static Route 추가
ip route add 10.0.0.0/8 via 192.168.1.254

# Default Route 설정
ip route add default via 192.168.1.1

# 라우팅 테이블 확인
ip route show
```

### OSPF 기본 설정

```cisco
router ospf 1
  network 192.168.1.0 0.0.0.255 area 0
  network 10.0.0.0 0.255.255.255 area 1
```

### BGP 기본 설정

```cisco
router bgp 65001
  neighbor 203.0.113.1 remote-as 65002
  network 192.168.0.0 mask 255.255.255.0
```

## 트러블슈팅

### 일반적인 문제

| 문제 | 원인 | 해결 방법 |
|------|------|----------|
| 패킷 손실 | 잘못된 경로, 장애 | 라우팅 테이블 확인, 경로 수정 |
| 느린 연결 | 비최적 경로 | 메트릭 조정, 라우팅 프로토콜 재설정 |
| 라우팅 루프 | 잘못된 설정 | TTL 확인, Split Horizon 적용 |
| 수렴 지연 | 프로토콜 문제 | 타이머 조정, 프로토콜 변경 |

### 진단 명령어

```bash
# 라우팅 테이블 확인
ip route show
route -n

# 경로 추적
traceroute 8.8.8.8
traceroute -I google.com

# 네트워크 연결 확인
ping 8.8.8.8
ping -c 4 google.com

# 라우터 통계
netstat -rn
```

## 참고

### 관련 RFC 문서
- RFC 2328 - OSPF Version 2
- RFC 4271 - BGP-4
- RFC 2453 - RIP Version 2
- RFC 1812 - Requirements for IP Version 4 Routers

### 참고 자료
- Cisco Routing Protocol Guide
- OSPF Complete Implementation
- BGP Best Practices
- Network Routing: Algorithms, Protocols, and Architectures
