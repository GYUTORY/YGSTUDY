# 스레드의 자원 공유

## 스레드의 기본 개념
- 스레드(Thread)는 프로세스 내에서 실행되는 작업의 기본 단위입니다.
- 하나의 프로세스는 여러 개의 스레드를 가질 수 있으며, 이들은 프로세스의 자원을 공유하면서 동시에 실행될 수 있습니다.
- 예를 들어, 웹 브라우저에서 파일을 다운로드하면서 동시에 웹 서핑을 할 수 있는 것은 여러 스레드가 동시에 작업을 수행하기 때문입니다.

## 스레드의 메모리 구조
프로세스의 메모리 영역은 크게 4가지로 구분됩니다:
1. **Code 영역**: 프로그램의 실행 코드가 저장되는 영역
2. **Data 영역**: 전역 변수, 정적 변수 등이 저장되는 영역
3. **Heap 영역**: 동적으로 할당되는 메모리 영역
4. **Stack 영역**: 함수 호출 시 지역 변수, 매개변수, 반환 주소 등이 저장되는 영역

<div align="center">
    <img src="../../../../etc/image/OS/쓰레드의 자원 구조.png" alt="쓰레드의 자원 구조.png" width="50%">
</div>

## 스레드 간 자원 공유
- **공유되는 자원**:
  - Code 영역: 모든 스레드가 동일한 실행 코드를 공유
  - Data 영역: 전역 변수와 정적 변수를 공유
  - Heap 영역: 동적으로 할당된 메모리를 공유
  - 파일 디스크립터, 소켓 등 프로세스의 시스템 자원

- **독립적인 자원**:
  - Stack 영역: 각 스레드는 자신만의 독립적인 스택을 가짐
  - 레지스터 상태: 각 스레드의 실행 상태를 저장
  - 스레드 ID: 각 스레드를 식별하는 고유 ID

## 스레드의 장점과 단점
### 장점
1. **자원 공유**: 프로세스의 자원을 공유하므로 메모리 사용이 효율적
2. **응답성**: 하나의 스레드가 블록되더라도 다른 스레드는 계속 실행 가능
3. **경제성**: 프로세스 생성보다 스레드 생성이 더 빠르고 자원 소모가 적음
4. **병렬성**: 멀티코어 시스템에서 여러 스레드를 동시에 실행 가능

### 단점
1. **동기화 문제**: 공유 자원에 대한 동시 접근 시 동기화가 필요
2. **디버깅 어려움**: 여러 스레드가 동시에 실행되므로 디버깅이 복잡
3. **교착 상태**: 잘못된 동기화로 인한 교착 상태(Deadlock) 발생 가능성

## 스레드 동기화
- **상호 배제(Mutual Exclusion)**: 공유 자원에 대한 동시 접근을 제어
- **세마포어(Semaphore)**: 자원의 사용 가능 여부를 나타내는 카운터
- **뮤텍스(Mutex)**: 한 번에 하나의 스레드만 자원에 접근 가능
- **모니터(Monitor)**: 상호 배제를 보장하는 고수준 동기화 메커니즘

<div align="center">
    <img src="../../../../etc/image/OS/쓰레드의 자원 공유.png" alt="쓰레드의 자원 공조.png" width="50%">
</div>

## 실제 예시
1. **웹 브라우저**:
   - UI 스레드: 사용자 인터페이스 처리
   - 네트워크 스레드: 데이터 다운로드
   - 렌더링 스레드: 웹 페이지 렌더링

2. **워드 프로세서**:
   - 입력 처리 스레드: 키보드 입력 처리
   - 자동 저장 스레드: 문서 자동 저장
   - 인쇄 스레드: 문서 인쇄 처리

---

**출처**
- 아래의 출처의 기반에서, 작성되었습니다.

> 출처: https://inpa.tistory.com/entry/👩‍💻-프로세스-⚔️-쓰레드-차이 [Inpa Dev 👨‍💻:티스토리]


