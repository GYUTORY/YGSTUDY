
## 스레드의 개념
- 운영체제에서 스레드는 프로세스 내부에서 실행되는 작은 작업 단위읻.
- 스레드는 프로세스의 실행 흐름을 구성하는 단위로, 하나의 프로세스는 내부에 여러개의 스레드가 포함될 수 있다.
---
#### 짧게 넘어가는, 프로세스의 개념
- 독립된 객체로서 생성되면 각각의 메모리 자원을 할당 받고, 서로에게 접근할 수 있다. 
- 프로세스 특성상 서로에게 접근이 불가능하기에, 여러개의 프로세스를 처리하기 위해서 서로의 상태 자원을 공유할면 IPC라는 커뮤니케이션 기법이 필요하다.
- IPC는 커널의 공유 메모리를 활용하여 프로세스들간의 데이터 상태 정보를 주고 받는다. 
---
## 스레드의 특징 
1. 프로세스들이 서로의 데이터에 접근하는 것이 직접적으로 불가능한데 반면, 스레드는 프로세스 내부에 존재하기에 프로세스의 데이터 영역에 접근이 가능하다. 그리고 스레드들끼리 서로의 데이터에 접근 가능하다. IPC 필요없이 프로세스의 데이터를 가져올 수 있다.
2. 스레드도 일조의 작업 단위라서, 프로세스처럼 작업이 처리된다(리눅스에선 스레드를 Light Weight Process라고 부르는데, 프로세스 취급을 하는 것이다) 이 말은 즉, 스레드도 프로세스처럼 작업을 병렬로 처리해서 속도를 높일 수 있다는 것이다.
3. 스레드는 일종의 함수로 구현된다. 스레드도 함수라서 데이터(지역 변수)를 다루고, 데이터를 관리하기 위해 stack 메모리 영역을 가진다. 이 stack 공간은 프로세스가 가지는 stack 메모리 영역과는 별개이며, 스레드의 메모리 영역으 thread stack이라고 부른다.
4. 하나의 프로세스는 내부에 여러개의 스레드를 가질 수 있다.

## 스레드의 구조
![스레드의 구조.png](..%2F..%2F..%2Fetc%2Fimage%2FOS_IMAGE%2F%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98%20%EA%B5%AC%EC%A1%B0.png) 

- 해당 그림과 같이 프로그램 카운터(PC)와 스택 포인터(SP) 등을 비롯한 스레드 실행 환경 정보(문맥 정보), 지역 데이터, 스택을 독립적으로 가지면서 코드,
전역 데이터, 힙을 다른 스레드와 공유한다.
- 스레드는 보통 다른 프로시저를 호출하고 다른 실행을 기록한다.

## 스레드의 주소 공간
![스레드의 주소 공간.png](..%2F..%2F..%2Fetc%2Fimage%2FOS_IMAGE%2F%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98%20%EC%A3%BC%EC%86%8C%20%EA%B3%B5%EA%B0%84.png) 

- 같은 프로세스의 스레드들은 해당 그림과 같이 동일한 주소 공간을 공유한다.
- 프로세스 하나에 포함된 스레드들은 공동의 목적을 달성하려고 병렬로 수행한다. 즉, 프로세스가 하나인 서로 다른 프로세스에서 프로그램의 다른 부분을 동시에 실행할 수 있다.

## 스레드의 장점 
- **사용자 응답성 증가** : 응용 프로그램의 일부분을 봉쇄하거나 긴 작업을 수행하더라도 병렬 프로그램을 계속 실행할 수 있어 사용자 응답성이 증가한다.
- **프로세스의 자원과 메모리 공유 가능** : 스레드들이 프로세스 자원 하나와 메모리를 공유하므로 응용 프로그램 하나가 동일한 주소 공간에서 스레드를 여러 개 실행하여 시스템 성능을 향상시킬 수 있다.
- **경제성이 좋음** : 프로세스를 생성하는 것보다 스레드를 생성하여 문맥을 교환하면 오버헤드가 줄어든다.
- **다중 처리(멀티 프로세싱)로 성능과 효율 향상** : 각 스레드를 여러 프로세서에서 병렬로 실행하여 성능과 효율성을 높일 수 있다.

## 스레드의 단점
- **사용자 간의 상호간섭** : 멀티 스레드(여러 스레드 사용)가 실행 중인 상황에, 스레드 간의 상호간섭 문제가 발생할 수 있다. 프로세스는 한 개가 다운되면, 그 프로세스만 작업이 멈추고 다른 프로세스에는 영향이 가지 않는다. 하지만 스레드는 다른 스레드가 작업을 방해하거나, 스레드간의 우선순위 설정에 문제가 있을 경우, 서로에게 영향을 미치기 때문에 예상치 못한 이슈가 발생할 수 있다. 
- **성능 저하** : 스레드를 많이 생성하면 성능 저하가 발생할 수 있다. 스레드를 많이 생성하면, 스레드 스케줄러에서 각각의 스케줄러에서 각각의 스레드들이 병렬로 실행되기 위해 컨텍스트 스위칭이 빈번하게 발생해야 하기 때문에 성능 저하가 발생할 수 있다.
- **동기화 이슈** : 여러 스레드가 공유 자원에 동시에 접근할 때, 동기화가 문제가 발생할 수 있다. 경쟁 상태(Race Condition) 무제는 스레드 간의 실행 순서나 타이밍에 따라 예측할 수 없는 결과가 발생할 수 있다.
- **자원 소비** : 스레드는 개별적인 실행 흐름을 가지기 때문에, 슬헤드마다 stack 및 레지스터 등의 메모리 자원을 소비한다. 따라서 스레드의 수가 증가하면 메모리 사용량도 증가하게 되어 시스템 자원이 한계에 도달할 수 있다.  

